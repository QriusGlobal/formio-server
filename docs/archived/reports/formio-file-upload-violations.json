 WARN  Issue while reading "/Users/mishal/code/worktrees/formio-monorepo-20251009/.npmrc". Failed to replace env in config: ${GITHUB_TOKEN}
 WARN  Issue while reading "/Users/mishal/code/worktrees/formio-monorepo-20251009/.npmrc". Failed to replace env in config: ${GITHUB_TOKEN}
 WARN  Issue while reading "/Users/mishal/code/worktrees/formio-monorepo-20251009/.npmrc". Failed to replace env in config: ${GITHUB_TOKEN}
 WARN  Issue while reading "/Users/mishal/code/worktrees/formio-monorepo-20251009/.npmrc". Failed to replace env in config: ${GITHUB_TOKEN}
Multiple projects found, consider using a single `tsconfig` with `references` to speed up, or use `noWarnOnMultipleProjects` to suppress this warning
[{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/.eslintrc.js","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): packages/formio-file-upload/.eslintrc.js"}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"module.exports = {\n  parser: '@typescript-eslint/parser',\n  parserOptions: {\n    ecmaVersion: 2020,\n    sourceType: 'module',\n    ecmaFeatures: {\n      jsx: true\n    }\n  },\n  extends: [\n    'eslint:recommended',\n    'plugin:@typescript-eslint/recommended',\n    'plugin:prettier/recommended'\n  ],\n  plugins: ['@typescript-eslint', 'prettier'],\n  env: {\n    browser: true,\n    es2020: true,\n    node: true,\n    jest: true\n  },\n  rules: {\n    'prettier/prettier': 'error',\n    '@typescript-eslint/explicit-module-boundary-types': 'off',\n    '@typescript-eslint/no-explicit-any': 'warn',\n    '@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],\n    '@typescript-eslint/no-non-null-assertion': 'warn',\n    'no-console': ['warn', { allow: ['warn', 'error'] }],\n    'prefer-const': 'error',\n    'no-var': 'error',\n    'eqeqeq': ['error', 'always', { null: 'ignore' }]\n  },\n  settings: {\n    react: {\n      version: 'detect'\n    }\n  }\n};","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/debug_test.js","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): packages/formio-file-upload/debug_test.js"}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Quick debug of the issue\nconst file = {\n  bits: ['Hello World'],\n  name: 'test.txt',\n  options: { type: 'text/plain' },\n  size: 11,\n  type: 'text/plain',\n  \n  slice(start = 0, end = this.size, contentType) {\n    console.log('slice called:', { start, end, contentType });\n    const combinedBuffer = this.bits.reduce((acc, bit) => {\n      if (typeof bit === 'string') {\n        // TextEncoder is not defined in JSDOM!\n        console.log('Need TextEncoder for:', bit);\n        try {\n          const encoder = new TextEncoder();\n          return [...acc, ...Array.from(encoder.encode(bit))];\n        } catch (e) {\n          console.error('TextEncoder error:', e.message);\n          return acc;\n        }\n      }\n      return acc;\n    }, []);\n    \n    const slicedData = combinedBuffer.slice(start, end);\n    const slicedArray = new Uint8Array(slicedData);\n    \n    return {\n      size: slicedArray.byteLength,\n      type: contentType || this.type,\n      arrayBuffer: () => Promise.resolve(slicedArray.buffer)\n    };\n  },\n  \n  arrayBuffer() {\n    return this.slice(0, this.size).arrayBuffer();\n  }\n};\n\n// Simulate what happens\n(async () => {\n  console.log('File size:', file.size);\n  const chunk = file.slice(0, file.size);\n  console.log('Chunk size:', chunk.size);\n  const buffer = await chunk.arrayBuffer();\n  console.log('ArrayBuffer size:', buffer.byteLength);\n  console.log('Success!');\n})().catch(err => console.error('Failed:', err));\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/jest.config.js","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): packages/formio-file-upload/jest.config.js"}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export default {\n  preset: 'ts-jest',\n  testEnvironment: 'jsdom',\n  roots: ['<rootDir>/src'],\n  testMatch: ['**/__tests__/**/*.ts', '**/?(*.)+(spec|test).ts'],\n  transform: {\n    '^.+\\\\.ts$': 'ts-jest'\n  },\n  moduleNameMapper: {\n    '\\\\.(css|less|scss|sass)$': 'identity-obj-proxy',\n    '^@/(.*)$': '<rootDir>/src/$1'\n  },\n  collectCoverageFrom: [\n    'src/**/*.{ts,tsx}',\n    '!src/**/*.d.ts',\n    '!src/**/*.test.ts',\n    '!src/**/*.spec.ts',\n    '!src/index.ts'\n  ],\n  coverageThreshold: {\n    global: {\n      branches: 70,\n      functions: 70,\n      lines: 70,\n      statements: 70\n    }\n  },\n  setupFilesAfterEnv: ['<rootDir>/src/test-setup.ts']\n};","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/jest.config.parallel.js","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): packages/formio-file-upload/jest.config.parallel.js"}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Jest Configuration for Parallel Test Execution\n *\n * Optimized configuration for BUG-CRIT-001:\n * - Parallel test workers (maxWorkers)\n * - Optimized test environment setup\n * - Test isolation strategies\n * - Performance monitoring\n *\n * Target: 65-75% speedup from baseline\n */\n\nimport os from 'os';\n\n// Calculate optimal worker count based on CPU cores\nconst cpuCount = os.cpus().length;\n// Use 75% of cores, leave some for system operations\nconst optimalWorkers = Math.max(1, Math.floor(cpuCount * 0.75));\n\nexport default {\n  // Base configuration from jest.config.js\n  preset: 'ts-jest',\n  testEnvironment: 'jsdom',\n  roots: ['<rootDir>/src'],\n  testMatch: ['**/__tests__/**/*.ts', '**/?(*.)+(spec|test).ts'],\n  moduleNameMapper: {\n    '\\\\.(css|less|scss|sass)$': 'identity-obj-proxy',\n    '^@/(.*)$': '<rootDir>/src/$1'\n  },\n  collectCoverageFrom: [\n    'src/**/*.{ts,tsx}',\n    '!src/**/*.d.ts',\n    '!src/**/*.test.ts',\n    '!src/**/*.spec.ts',\n    '!src/index.ts'\n  ],\n  coverageThreshold: {\n    global: {\n      branches: 70,\n      functions: 70,\n      lines: 70,\n      statements: 70\n    }\n  },\n  setupFilesAfterEnv: ['<rootDir>/src/test-setup.ts'],\n\n  // ==========================================\n  // PARALLEL EXECUTION OPTIMIZATIONS\n  // ==========================================\n\n  // Enable parallel test execution\n  maxWorkers: optimalWorkers,\n\n  // Run tests in parallel across worker threads\n  // This is the key to the 65-75% speedup\n  workerIdleMemoryLimit: '512MB',\n\n  // Cache configuration for faster subsequent runs\n  cache: true,\n  cacheDirectory: '<rootDir>/.jest-cache',\n\n  // Bail after first test failure in CI (optional, can speed up failing builds)\n  // bail: process.env.CI ? 1 : 0,\n\n  // Faster test discovery\n  testPathIgnorePatterns: [\n    '/node_modules/',\n    '/dist/',\n    '/lib/',\n    '/.jest-cache/'\n  ],\n\n  // Optimize module resolution\n  modulePathIgnorePatterns: [\n    '<rootDir>/dist/',\n    '<rootDir>/lib/'\n  ],\n\n  // Faster transformer options (updated for ts-jest v29+)\n  transform: {\n    '^.+\\\\.ts$': ['ts-jest', {\n      isolatedModules: true,\n      tsconfig: {\n        jsx: 'react',\n        esModuleInterop: true,\n        allowSyntheticDefaultImports: true,\n        // Skip type checking for faster compilation\n        skipLibCheck: true,\n        skipDefaultLibCheck: true\n      }\n    }]\n  },\n\n  // Clear mocks between tests for isolation\n  clearMocks: true,\n  resetMocks: true,\n  restoreMocks: true,\n\n  // Faster timeout for quick test detection\n  testTimeout: 10000,\n\n  // Detect slow tests\n  slowTestThreshold: 1000,\n\n  // Optimize watch mode (for development)\n  watchPathIgnorePatterns: [\n    '/node_modules/',\n    '/dist/',\n    '/lib/',\n    '/.jest-cache/'\n  ],\n\n  // Performance monitoring\n  verbose: false, // Reduces console output overhead\n  silent: false,\n\n  // Notify on completion (optional, for development)\n  notify: false,\n  notifyMode: 'failure-change',\n\n  // Error handling\n  errorOnDeprecated: false, // Don't slow down tests with deprecation warnings\n\n  // Coverage collection optimizations (when needed)\n  collectCoverage: false, // Disabled by default for speed, enable with --coverage flag\n  coverageProvider: 'v8', // Faster than 'babel'\n\n  // Reporters (minimal for performance)\n  reporters: [\n    'default',\n    // Add custom reporter for performance metrics if needed\n    // ['<rootDir>/scripts/performance-reporter.js', {}]\n  ],\n\n  // Test sequencer for optimal ordering (optional)\n  // testSequencer: '<rootDir>/scripts/test-sequencer.js',\n};\n\n// Log configuration on startup\nif (process.env.VERBOSE_CONFIG) {\n  console.log('\\n🚀 Jest Parallel Configuration');\n  console.log('================================');\n  console.log(`CPU Cores: ${cpuCount}`);\n  console.log(`Max Workers: ${optimalWorkers}`);\n  console.log(`Cache: Enabled`);\n  console.log(`Isolated Modules: Enabled`);\n  console.log('================================\\n');\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/rollup.config.js","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): packages/formio-file-upload/rollup.config.js"}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import typescript from '@rollup/plugin-typescript';\nimport resolve from '@rollup/plugin-node-resolve';\nimport commonjs from '@rollup/plugin-commonjs';\nimport json from '@rollup/plugin-json';\nimport postcss from 'rollup-plugin-postcss';\nimport terser from '@rollup/plugin-terser';\nimport replace from '@rollup/plugin-replace';\n\nconst isProduction = process.env.NODE_ENV === 'production';\n\nconst external = ['@formio/js', 'react', 'react-dom', 'react/jsx-runtime'];\n\nconst isExternal = (id) => {\n  return external.some((dep) => id.startsWith(dep));\n};\n\nconst productionReplacements = isProduction\n  ? {\n      preventAssignment: true,\n      include: ['**/*.ts', '**/*.tsx', '**/*.js', '**/*.jsx'],\n      exclude: ['node_modules/**'],\n      values: {\n        '\"@formio/js\"': '\"@internal/forms\"',\n        \"'@formio/js'\": \"'@internal/forms'\",\n      },\n    }\n  : null;\n\nexport default [\n  // ES Module build\n  {\n    input: 'src/index.ts',\n    output: {\n      file: 'lib/index.esm.js',\n      format: 'esm',\n      sourcemap: !isProduction,\n      exports: 'named',\n    },\n    external: isExternal,\n    plugins: [\n      resolve({\n        extensions: ['.js', '.jsx', '.ts', '.tsx'],\n        preferBuiltins: false,\n        browser: true,\n      }),\n      commonjs(),\n      json(),\n      productionReplacements && replace(productionReplacements),\n      typescript({\n        tsconfig: './tsconfig.json',\n        declaration: true,\n        declarationDir: './lib',\n        exclude: ['src/test-setup.ts', '**/*.test.ts', '**/*.spec.ts'],\n      }),\n      postcss({\n        extract: 'styles.css',\n        modules: false,\n        sourceMap: !isProduction,\n        minimize: isProduction,\n      }),\n      isProduction &&\n        terser({\n          compress: {\n            drop_console: true,\n            drop_debugger: true,\n            passes: 2,\n          },\n          mangle: {\n            toplevel: true,\n          },\n          format: {\n            comments: false,\n            preamble: `/* @formio/file-upload - Production Build */`,\n          },\n        }),\n    ].filter(Boolean),\n  },\n  // UMD build (minified, for CDN)\n  {\n    input: 'src/index.ts',\n    output: {\n      file: 'dist/formio-file-upload.min.js',\n      format: 'umd',\n      name: isProduction ? 'QriusUpload' : 'FormioFileUpload',\n      sourcemap: !isProduction,\n      exports: 'named',\n      globals: {\n        '@formio/js': 'Formio',\n        react: 'React',\n        'react-dom': 'ReactDOM',\n      },\n    },\n    external: ['@formio/js', 'react', 'react-dom'],\n    plugins: [\n      resolve({\n        extensions: ['.js', '.jsx', '.ts', '.tsx'],\n        preferBuiltins: false,\n        browser: true,\n      }),\n      commonjs(),\n      json(),\n      productionReplacements && replace(productionReplacements),\n      typescript({\n        tsconfig: './tsconfig.json',\n        declaration: false,\n        declarationMap: false,\n        exclude: ['src/test-setup.ts', '**/*.test.ts', '**/*.spec.ts'],\n      }),\n      postcss({\n        extract: 'formio-file-upload.min.css',\n        minimize: true,\n      }),\n      terser({\n        compress: {\n          drop_console: isProduction,\n          drop_debugger: true,\n          passes: isProduction ? 3 : 1,\n        },\n        mangle: isProduction\n          ? {\n              toplevel: true,\n            }\n          : false,\n        format: {\n          comments: false,\n        },\n      }),\n    ].filter(Boolean),\n  },\n];\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/scripts/benchmark-tests.js","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): packages/formio-file-upload/scripts/benchmark-tests.js"}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n/**\n * Benchmark script for comparing test execution performance\n *\n * Measures test execution time before and after optimizations\n * to validate 65-75% speedup target for BUG-CRIT-001\n */\n\nimport { execSync } from 'child_process';\nimport { writeFileSync } from 'fs';\n\nconst RUNS = 5; // Number of test runs for averaging\nconst TARGET_SPEEDUP = 0.65; // 65% minimum speedup target\n\n/**\n * Run tests and measure execution time\n */\nfunction runTestBenchmark(label, jestConfig = null) {\n  console.log(`\\n${'='.repeat(60)}`);\n  console.log(`🏃 Running benchmark: ${label}`);\n  console.log('='.repeat(60));\n\n  const times = [];\n\n  for (let i = 1; i <= RUNS; i++) {\n    console.log(`\\n📊 Run ${i}/${RUNS}...`);\n\n    const startTime = Date.now();\n\n    try {\n      const cmd = jestConfig\n        ? `jest --config=${jestConfig} --silent --no-coverage`\n        : 'jest --silent --no-coverage';\n\n      execSync(cmd, {\n        stdio: 'pipe',\n        cwd: process.cwd()\n      });\n\n      const duration = Date.now() - startTime;\n      times.push(duration);\n      console.log(`   ✅ Completed in ${(duration / 1000).toFixed(2)}s`);\n\n    } catch (error) {\n      console.error(`   ❌ Test run failed:`, error.message);\n      times.push(null);\n    }\n  }\n\n  const validTimes = times.filter(t => t !== null);\n  const avgTime = validTimes.reduce((a, b) => a + b, 0) / validTimes.length;\n  const minTime = Math.min(...validTimes);\n  const maxTime = Math.max(...validTimes);\n\n  console.log(`\\n📈 Results for ${label}:`);\n  console.log(`   Average: ${(avgTime / 1000).toFixed(2)}s`);\n  console.log(`   Min:     ${(minTime / 1000).toFixed(2)}s`);\n  console.log(`   Max:     ${(maxTime / 1000).toFixed(2)}s`);\n  console.log(`   Std Dev: ${(calculateStdDev(validTimes) / 1000).toFixed(2)}s`);\n\n  return {\n    label,\n    avgTime,\n    minTime,\n    maxTime,\n    times: validTimes,\n    stdDev: calculateStdDev(validTimes)\n  };\n}\n\n/**\n * Calculate standard deviation\n */\nfunction calculateStdDev(values) {\n  const avg = values.reduce((a, b) => a + b, 0) / values.length;\n  const squareDiffs = values.map(value => Math.pow(value - avg, 2));\n  const avgSquareDiff = squareDiffs.reduce((a, b) => a + b, 0) / squareDiffs.length;\n  return Math.sqrt(avgSquareDiff);\n}\n\n/**\n * Compare benchmarks and calculate improvement\n */\nfunction compareBenchmarks(baseline, optimized) {\n  const speedup = (baseline.avgTime - optimized.avgTime) / baseline.avgTime;\n  const speedupPercent = speedup * 100;\n\n  console.log(`\\n${'='.repeat(60)}`);\n  console.log('📊 BENCHMARK COMPARISON');\n  console.log('='.repeat(60));\n  console.log(`\\nBaseline:  ${(baseline.avgTime / 1000).toFixed(2)}s`);\n  console.log(`Optimized: ${(optimized.avgTime / 1000).toFixed(2)}s`);\n  console.log(`\\nSpeedup:   ${speedupPercent.toFixed(1)}% faster`);\n  console.log(`Time saved: ${((baseline.avgTime - optimized.avgTime) / 1000).toFixed(2)}s`);\n\n  if (speedup >= TARGET_SPEEDUP) {\n    console.log(`\\n✅ SUCCESS: Exceeded ${(TARGET_SPEEDUP * 100).toFixed(0)}% speedup target!`);\n  } else {\n    console.log(`\\n⚠️  WARNING: Did not meet ${(TARGET_SPEEDUP * 100).toFixed(0)}% speedup target.`);\n    console.log(`   Need ${((TARGET_SPEEDUP - speedup) * 100).toFixed(1)}% more improvement.`);\n  }\n\n  return {\n    baseline,\n    optimized,\n    speedup,\n    speedupPercent,\n    targetMet: speedup >= TARGET_SPEEDUP\n  };\n}\n\n/**\n * Save benchmark results to file\n */\nfunction saveBenchmarkResults(results) {\n  const timestamp = new Date().toISOString();\n  const report = {\n    timestamp,\n    results,\n    metadata: {\n      runs: RUNS,\n      targetSpeedup: TARGET_SPEEDUP,\n      platform: process.platform,\n      nodeVersion: process.version\n    }\n  };\n\n  const filename = `benchmark-results-${Date.now()}.json`;\n  writeFileSync(filename, JSON.stringify(report, null, 2));\n  console.log(`\\n💾 Results saved to: ${filename}`);\n\n  return filename;\n}\n\n/**\n * Main benchmark execution\n */\nasync function main() {\n  console.log('🎯 Test Performance Benchmark');\n  console.log('================================\\n');\n  console.log(`Target: ${(TARGET_SPEEDUP * 100).toFixed(0)}% speedup`);\n  console.log(`Runs per configuration: ${RUNS}\\n`);\n\n  // Run baseline tests (current configuration)\n  const baseline = runTestBenchmark('Baseline (Current Config)', 'jest.config.js');\n\n  // Run optimized tests (parallel configuration)\n  const optimized = runTestBenchmark('Optimized (Parallel Config)', 'jest.config.parallel.js');\n\n  // Compare results\n  const comparison = compareBenchmarks(baseline, optimized);\n\n  // Save results\n  saveBenchmarkResults(comparison);\n\n  // Exit with appropriate code\n  process.exit(comparison.targetMet ? 0 : 1);\n}\n\n// Run benchmark\nmain().catch(error => {\n  console.error('❌ Benchmark failed:', error);\n  process.exit(1);\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/scripts/benchmark.js","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): packages/formio-file-upload/scripts/benchmark.js"}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * Performance Benchmark Suite for @formio/file-upload\n *\n * Validates:\n * - Build performance (<30s target)\n * - Test execution time (<5s target)\n * - Bundle sizes (ES, CJS, UMD)\n * - Security validation overhead\n * - Magic number verification (<5ms)\n * - Filename sanitization (<1ms)\n */\n\nimport { execSync } from 'child_process';\nimport { readFileSync, statSync, readdirSync } from 'fs';\nimport { join, dirname } from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\nconst ROOT_DIR = join(__dirname, '..');\n\n// ANSI color codes\nconst colors = {\n  reset: '\\x1b[0m',\n  bright: '\\x1b[1m',\n  green: '\\x1b[32m',\n  yellow: '\\x1b[33m',\n  red: '\\x1b[31m',\n  cyan: '\\x1b[36m',\n  blue: '\\x1b[34m'\n};\n\nfunction log(message, color = 'reset') {\n  console.log(colors[color] + message + colors.reset);\n}\n\nfunction formatBytes(bytes) {\n  if (bytes === 0) return '0 Bytes';\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i];\n}\n\nfunction formatTime(ms) {\n  if (ms < 1000) return `${Math.round(ms)}ms`;\n  return `${(ms / 1000).toFixed(2)}s`;\n}\n\nclass PerformanceBenchmark {\n  constructor() {\n    this.results = {\n      build: {},\n      test: {},\n      bundles: {},\n      security: {},\n      overall: {}\n    };\n    this.baseline = {\n      buildTime: 30000, // 30s\n      testTime: 5000, // 5s\n      magicNumberCheck: 5, // 5ms\n      filenameSanitization: 1 // 1ms\n    };\n  }\n\n  async run() {\n    log('\\n' + '='.repeat(80), 'bright');\n    log('PERFORMANCE BENCHMARK SUITE - @formio/file-upload', 'bright');\n    log('='.repeat(80) + '\\n', 'bright');\n\n    await this.benchmarkBuild();\n    await this.benchmarkTests();\n    await this.analyzeBundles();\n    await this.benchmarkSecurity();\n    await this.generateReport();\n  }\n\n  async benchmarkBuild() {\n    log('📦 BENCHMARK 1: Build Performance', 'cyan');\n    log('-'.repeat(80), 'cyan');\n\n    try {\n      // Clean previous build\n      log('Cleaning previous build artifacts...');\n      try {\n        execSync('rm -rf lib dist', { cwd: ROOT_DIR, stdio: 'ignore' });\n      } catch (e) {\n        // Ignore errors if directories don't exist\n      }\n\n      // Benchmark build time\n      log('Running build with timing measurement...');\n      const buildStart = Date.now();\n      execSync('npm run build', {\n        cwd: ROOT_DIR,\n        stdio: 'pipe',\n        encoding: 'utf-8'\n      });\n      const buildEnd = Date.now();\n      const buildTime = buildEnd - buildStart;\n\n      this.results.build = {\n        time: buildTime,\n        timeFormatted: formatTime(buildTime),\n        target: this.baseline.buildTime,\n        targetFormatted: formatTime(this.baseline.buildTime),\n        pass: buildTime < this.baseline.buildTime,\n        efficiency: ((this.baseline.buildTime - buildTime) / this.baseline.buildTime * 100).toFixed(1)\n      };\n\n      log(`✓ Build completed in ${this.results.build.timeFormatted}`, 'green');\n      log(`  Target: <${this.results.build.targetFormatted}`, 'yellow');\n      log(`  Status: ${this.results.build.pass ? 'PASS ✓' : 'FAIL ✗'}`,\n          this.results.build.pass ? 'green' : 'red');\n\n      if (this.results.build.pass) {\n        log(`  Efficiency: ${this.results.build.efficiency}% faster than baseline`, 'green');\n      }\n\n    } catch (error) {\n      log(`✗ Build failed: ${error.message}`, 'red');\n      this.results.build.error = error.message;\n      this.results.build.pass = false;\n    }\n\n    log('');\n  }\n\n  async benchmarkTests() {\n    log('🧪 BENCHMARK 2: Test Execution Performance', 'cyan');\n    log('-'.repeat(80), 'cyan');\n\n    try {\n      log('Running test suite with timing measurement...');\n      const testStart = Date.now();\n\n      try {\n        execSync('npm test -- --silent', {\n          cwd: ROOT_DIR,\n          stdio: 'pipe',\n          encoding: 'utf-8'\n        });\n      } catch (e) {\n        // Tests might fail, but we still want timing\n        log('  Warning: Some tests failed, but measuring performance anyway', 'yellow');\n      }\n\n      const testEnd = Date.now();\n      const testTime = testEnd - testStart;\n\n      this.results.test = {\n        time: testTime,\n        timeFormatted: formatTime(testTime),\n        target: this.baseline.testTime,\n        targetFormatted: formatTime(this.baseline.testTime),\n        pass: testTime < this.baseline.testTime,\n        efficiency: ((this.baseline.testTime - testTime) / this.baseline.testTime * 100).toFixed(1)\n      };\n\n      log(`✓ Tests completed in ${this.results.test.timeFormatted}`, 'green');\n      log(`  Target: <${this.results.test.targetFormatted}`, 'yellow');\n      log(`  Status: ${this.results.test.pass ? 'PASS ✓' : 'FAIL ✗'}`,\n          this.results.test.pass ? 'green' : 'red');\n\n      if (this.results.test.pass) {\n        log(`  Efficiency: ${this.results.test.efficiency}% faster than baseline`, 'green');\n      }\n\n    } catch (error) {\n      log(`✗ Test execution failed: ${error.message}`, 'red');\n      this.results.test.error = error.message;\n      this.results.test.pass = false;\n    }\n\n    log('');\n  }\n\n  async analyzeBundles() {\n    log('📊 BENCHMARK 3: Bundle Size Analysis', 'cyan');\n    log('-'.repeat(80), 'cyan');\n\n    const bundles = {\n      esm: 'lib/index.esm.js',\n      cjs: 'lib/index.js',\n      umd: 'dist/formio-file-upload.min.js',\n      types: 'lib/index.d.ts'\n    };\n\n    const sourcemaps = {\n      esmMap: 'lib/index.esm.js.map',\n      cjsMap: 'lib/index.js.map',\n      umdMap: 'dist/formio-file-upload.min.js.map'\n    };\n\n    this.results.bundles = {\n      outputs: {},\n      sourcemaps: {},\n      total: 0,\n      pass: true\n    };\n\n    log('Analyzing bundle sizes:');\n\n    // Check main bundles\n    for (const [name, path] of Object.entries(bundles)) {\n      const fullPath = join(ROOT_DIR, path);\n      try {\n        const stats = statSync(fullPath);\n        const size = stats.size;\n        this.results.bundles.outputs[name] = {\n          path,\n          size,\n          sizeFormatted: formatBytes(size)\n        };\n        this.results.bundles.total += size;\n\n        log(`  ${name.toUpperCase()}: ${formatBytes(size)}`, 'green');\n      } catch (error) {\n        log(`  ${name.toUpperCase()}: Missing or not generated`, 'red');\n        this.results.bundles.outputs[name] = { error: 'Not found' };\n        this.results.bundles.pass = false;\n      }\n    }\n\n    // Check sourcemaps\n    log('\\nSourcemap analysis:');\n    for (const [name, path] of Object.entries(sourcemaps)) {\n      const fullPath = join(ROOT_DIR, path);\n      try {\n        const stats = statSync(fullPath);\n        this.results.bundles.sourcemaps[name] = {\n          path,\n          size: stats.size,\n          sizeFormatted: formatBytes(stats.size)\n        };\n        log(`  ${name}: ${formatBytes(stats.size)}`, 'green');\n      } catch (error) {\n        log(`  ${name}: Not found`, 'yellow');\n      }\n    }\n\n    log(`\\nTotal bundle size: ${formatBytes(this.results.bundles.total)}`, 'bright');\n    log('');\n  }\n\n  async benchmarkSecurity() {\n    log('🔒 BENCHMARK 4: Security Validation Performance', 'cyan');\n    log('-'.repeat(80), 'cyan');\n\n    this.results.security = {\n      magicNumber: {},\n      filenameSanitization: {},\n      overall: { pass: true }\n    };\n\n    // Benchmark magic number verification\n    log('Testing magic number verification performance...');\n    const iterations = 10000;\n\n    const magicNumberStart = performance.now();\n    for (let i = 0; i < iterations; i++) {\n      // Simulate magic number check (reading first few bytes)\n      const testBuffer = Buffer.from([0xFF, 0xD8, 0xFF, 0xE0]); // JPEG magic number\n      const magic = testBuffer.toString('hex', 0, 4);\n    }\n    const magicNumberEnd = performance.now();\n    const magicNumberAvg = (magicNumberEnd - magicNumberStart) / iterations;\n\n    this.results.security.magicNumber = {\n      iterations,\n      avgTime: magicNumberAvg,\n      avgTimeFormatted: formatTime(magicNumberAvg),\n      target: this.baseline.magicNumberCheck,\n      targetFormatted: formatTime(this.baseline.magicNumberCheck),\n      pass: magicNumberAvg < this.baseline.magicNumberCheck\n    };\n\n    log(`  Average time per check: ${magicNumberAvg.toFixed(3)}ms`,\n        this.results.security.magicNumber.pass ? 'green' : 'red');\n    log(`  Target: <${this.baseline.magicNumberCheck}ms`, 'yellow');\n    log(`  Status: ${this.results.security.magicNumber.pass ? 'PASS ✓' : 'FAIL ✗'}`,\n        this.results.security.magicNumber.pass ? 'green' : 'red');\n\n    // Benchmark filename sanitization\n    log('\\nTesting filename sanitization performance...');\n\n    const sanitizeFilename = (name) => {\n      return name\n        .replace(/[^a-zA-Z0-9.-]/g, '_')\n        .replace(/_{2,}/g, '_')\n        .replace(/^[._]+|[._]+$/g, '');\n    };\n\n    const sanitizeStart = performance.now();\n    for (let i = 0; i < iterations; i++) {\n      sanitizeFilename('../../etc/passwd<script>alert(1)</script>.jpg');\n    }\n    const sanitizeEnd = performance.now();\n    const sanitizeAvg = (sanitizeEnd - sanitizeStart) / iterations;\n\n    this.results.security.filenameSanitization = {\n      iterations,\n      avgTime: sanitizeAvg,\n      avgTimeFormatted: formatTime(sanitizeAvg),\n      target: this.baseline.filenameSanitization,\n      targetFormatted: formatTime(this.baseline.filenameSanitization),\n      pass: sanitizeAvg < this.baseline.filenameSanitization\n    };\n\n    log(`  Average time per sanitization: ${sanitizeAvg.toFixed(3)}ms`,\n        this.results.security.filenameSanitization.pass ? 'green' : 'red');\n    log(`  Target: <${this.baseline.filenameSanitization}ms`, 'yellow');\n    log(`  Status: ${this.results.security.filenameSanitization.pass ? 'PASS ✓' : 'FAIL ✗'}`,\n        this.results.security.filenameSanitization.pass ? 'green' : 'red');\n\n    this.results.security.overall.pass =\n      this.results.security.magicNumber.pass &&\n      this.results.security.filenameSanitization.pass;\n\n    log('');\n  }\n\n  async generateReport() {\n    log('📋 PERFORMANCE CERTIFICATION REPORT', 'bright');\n    log('='.repeat(80), 'bright');\n\n    const allPassed =\n      this.results.build.pass &&\n      this.results.test.pass &&\n      this.results.bundles.pass &&\n      this.results.security.overall.pass;\n\n    log('\\n┌─────────────────────────────────────────────────────────┐', 'bright');\n    log('│                   CERTIFICATION STATUS                  │', 'bright');\n    log('└─────────────────────────────────────────────────────────┘', 'bright');\n\n    log(`\\n  Overall Status: ${allPassed ? '✓ PASSED' : '✗ FAILED'}`,\n        allPassed ? 'green' : 'red');\n\n    log('\\n┌─────────────────────────────────────────────────────────┐', 'bright');\n    log('│                   DETAILED METRICS                      │', 'bright');\n    log('└─────────────────────────────────────────────────────────┘', 'bright');\n\n    log('\\n1. Build Performance:', 'cyan');\n    log(`   Time: ${this.results.build.timeFormatted}`,\n        this.results.build.pass ? 'green' : 'red');\n    log(`   Target: <${this.results.build.targetFormatted}`);\n    log(`   Status: ${this.results.build.pass ? '✓ PASS' : '✗ FAIL'}`,\n        this.results.build.pass ? 'green' : 'red');\n\n    log('\\n2. Test Performance:', 'cyan');\n    log(`   Time: ${this.results.test.timeFormatted}`,\n        this.results.test.pass ? 'green' : 'red');\n    log(`   Target: <${this.results.test.targetFormatted}`);\n    log(`   Status: ${this.results.test.pass ? '✓ PASS' : '✗ FAIL'}`,\n        this.results.test.pass ? 'green' : 'red');\n\n    log('\\n3. Bundle Sizes:', 'cyan');\n    for (const [name, bundle] of Object.entries(this.results.bundles.outputs)) {\n      if (bundle.sizeFormatted) {\n        log(`   ${name.toUpperCase()}: ${bundle.sizeFormatted}`, 'green');\n      }\n    }\n    log(`   Total: ${formatBytes(this.results.bundles.total)}`, 'bright');\n    log(`   Status: ${this.results.bundles.pass ? '✓ PASS' : '✗ FAIL'}`,\n        this.results.bundles.pass ? 'green' : 'red');\n\n    log('\\n4. Security Performance:', 'cyan');\n    log(`   Magic Number Check: ${this.results.security.magicNumber.avgTime.toFixed(3)}ms (target: <${this.baseline.magicNumberCheck}ms)`,\n        this.results.security.magicNumber.pass ? 'green' : 'red');\n    log(`   Filename Sanitization: ${this.results.security.filenameSanitization.avgTime.toFixed(3)}ms (target: <${this.baseline.filenameSanitization}ms)`,\n        this.results.security.filenameSanitization.pass ? 'green' : 'red');\n    log(`   Status: ${this.results.security.overall.pass ? '✓ PASS' : '✗ FAIL'}`,\n        this.results.security.overall.pass ? 'green' : 'red');\n\n    log('\\n┌─────────────────────────────────────────────────────────┐', 'bright');\n    log('│              OPTIMIZATION RECOMMENDATIONS               │', 'bright');\n    log('└─────────────────────────────────────────────────────────┘', 'bright');\n\n    const recommendations = [];\n\n    if (!this.results.build.pass) {\n      recommendations.push('• Build time exceeds target - consider incremental builds or caching');\n    } else if (this.results.build.efficiency > 20) {\n      recommendations.push('• Build performance is excellent - no optimizations needed');\n    }\n\n    if (!this.results.test.pass) {\n      recommendations.push('• Test execution is slow - consider parallelization or selective testing');\n    } else if (this.results.test.efficiency > 20) {\n      recommendations.push('• Test performance is excellent - no optimizations needed');\n    }\n\n    if (this.results.bundles.total > 1024 * 1024) { // > 1MB\n      recommendations.push('• Bundle size is large - consider code splitting or tree shaking');\n    }\n\n    if (!this.results.security.magicNumber.pass) {\n      recommendations.push('• Magic number verification is slow - consider caching or optimization');\n    }\n\n    if (!this.results.security.filenameSanitization.pass) {\n      recommendations.push('• Filename sanitization is slow - consider regex optimization');\n    }\n\n    if (recommendations.length === 0) {\n      log('\\n  ✓ All performance metrics are optimal!', 'green');\n      log('  No optimization recommendations at this time.', 'green');\n    } else {\n      log('');\n      recommendations.forEach(rec => log(rec, 'yellow'));\n    }\n\n    log('\\n' + '='.repeat(80), 'bright');\n    log('END OF PERFORMANCE CERTIFICATION REPORT', 'bright');\n    log('='.repeat(80) + '\\n', 'bright');\n\n    // Save JSON report\n    const reportPath = join(ROOT_DIR, 'docs', 'PERFORMANCE_BENCHMARK_REPORT.json');\n    try {\n      const { writeFileSync, mkdirSync } = await import('fs');\n      mkdirSync(join(ROOT_DIR, 'docs'), { recursive: true });\n      writeFileSync(reportPath, JSON.stringify(this.results, null, 2));\n      log(`📄 JSON report saved to: ${reportPath}`, 'cyan');\n    } catch (error) {\n      log(`Warning: Could not save JSON report: ${error.message}`, 'yellow');\n    }\n\n    process.exit(allPassed ? 0 : 1);\n  }\n}\n\n// Run benchmark\nconst benchmark = new PerformanceBenchmark();\nbenchmark.run().catch(error => {\n  console.error('Benchmark failed:', error);\n  process.exit(1);\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/async/AsyncFileProcessor.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'UploadFile' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":20},{"ruleId":"no-unused-vars","severity":2,"message":"'UploadFile' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"UploadFile"},"fix":{"range":[177,188],"text":""},"desc":"Remove unused variable 'UploadFile'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'UploadStatus' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":34},{"ruleId":"no-unused-vars","severity":2,"message":"'UploadStatus' is defined but never used.","line":8,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"UploadStatus"},"fix":{"range":[187,201],"text":""},"desc":"Remove unused variable 'UploadStatus'."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'metadata' should be typed with a non-any type.","line":55,"column":5,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":55,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1393,1396],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1393,1396],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":66,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":66,"endColumn":17},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":67,"column":24,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":67,"endColumn":26,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[1714,1716],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":68,"column":36,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":68,"endColumn":38,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[1756,1758],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":73,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":73,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .message on an `any` value.","line":74,"column":29,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":74,"endColumn":36},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":74,"column":37,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":74,"endColumn":39,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[1885,1887],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":77,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":77,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":78,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":78,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .jobId on an `any` value.","line":78,"column":19,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":78,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":94,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":94,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .message on an `any` value.","line":95,"column":29,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":95,"endColumn":36},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":95,"column":37,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":95,"endColumn":39,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[2458,2460],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `Promise<any>`.","line":98,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":98,"endColumn":28},{"ruleId":"require-await","severity":2,"message":"Async method 'pollJobUntilComplete' has no 'await' expression.","line":108,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":108,"endColumn":29,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2707,2713],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":113,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":113,"endColumn":31},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":130,"column":52,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":130,"endColumn":54,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[3399,3401],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":135,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":135,"endColumn":21},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":142,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":142,"endColumn":14,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[3631,3631],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[3631,3631],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":156,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":156,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .message on an `any` value.","line":157,"column":29,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":157,"endColumn":36},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":157,"column":37,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":157,"endColumn":39,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[3996,3998],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":174,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":174,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .message on an `any` value.","line":175,"column":29,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":175,"endColumn":36},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":175,"column":37,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":175,"endColumn":39,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[4396,4398],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"security/detect-non-literal-regexp","severity":2,"message":"Found non-literal argument to RegExp Constructor","line":219,"column":34,"nodeType":"NewExpression","endLine":219,"endColumn":72},{"ruleId":"require-await","severity":2,"message":"Async method 'verifyFileMagicNumber' has no 'await' expression.","line":258,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":258,"endColumn":38,"suggestions":[{"messageId":"removeAsync","fix":{"range":[6807,6813],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"unicorn/prefer-add-event-listener","severity":2,"message":"Prefer `addEventListener` over `onload`.","line":262,"column":14,"nodeType":"Identifier","messageId":"prefer-add-event-listener","endLine":262,"endColumn":20,"fix":{"range":[6959,7938],"text":"reader.addEventListener('load', (e) => {\n        try {\n          const arrayBuffer = e.target?.result as ArrayBuffer;\n          const bytes = new Uint8Array(arrayBuffer);\n\n          // Check magic numbers for common file types\n          const magicNumbers: Record<string, number[]> = {\n            'image/png': [0x89, 0x50, 0x4e, 0x47],\n            'image/jpeg': [0xff, 0xd8, 0xff],\n            'application/pdf': [0x25, 0x50, 0x44, 0x46], // %PDF\n            'application/zip': [0x50, 0x4b, 0x03, 0x04],\n            'image/gif': [0x47, 0x49, 0x46, 0x38],\n          };\n\n          const expectedMagic = magicNumbers[file.type];\n\n          if (!expectedMagic) {\n            // No magic number check for this type\n            resolve(true);\n            return;\n          }\n\n          // Verify magic number matches\n          const matches = expectedMagic.every((byte, index) => bytes[index] === byte);\n          resolve(matches);\n        } catch (error) {\n          reject(error);\n        }\n      })"}},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":285,"column":64,"nodeType":"MemberExpression","endLine":285,"endColumn":76},{"ruleId":"unicorn/prefer-add-event-listener","severity":2,"message":"Prefer `addEventListener` over `onerror`. Note that there is difference between `{window,element}.onerror` and `{window,element}.addEventListener('error')`.","line":292,"column":14,"nodeType":"Identifier","messageId":"prefer-add-event-listener","endLine":292,"endColumn":21},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":312,"column":34,"nodeType":"MemberExpression","endLine":312,"endColumn":50}],"suppressedMessages":[],"errorCount":34,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":1,"fixableWarningCount":0,"source":"/**\n * Async File Processor\n *\n * Non-blocking file processing using BullMQ job queue\n * Replaces synchronous file validation and processing with async operations\n */\n\nimport { UploadFile, UploadStatus } from '../types';\nimport { logger } from '../utils/logger';\n\n/**\n * Job status from BullMQ API\n */\nexport interface JobStatus {\n  jobId: string;\n  status: 'waiting' | 'active' | 'completed' | 'failed' | 'delayed' | 'paused';\n  progress: number;\n  templateType?: string;\n  result?: {\n    filename: string;\n    size: number;\n    path: string;\n    processingTime: number;\n  };\n  error?: {\n    message: string;\n    code: string;\n  };\n}\n\n/**\n * Async File Processor Class\n * Handles non-blocking file operations via BullMQ job queue\n */\nexport class AsyncFileProcessor {\n  private apiBaseUrl: string;\n  private pollingInterval: number;\n\n  constructor(apiBaseUrl: string = '/api/file-generation', pollingInterval: number = 1000) {\n    this.apiBaseUrl = apiBaseUrl;\n    this.pollingInterval = pollingInterval;\n  }\n\n  /**\n   * Submit file generation job to queue\n   *\n   * @param templateType - Type of file to generate (pdf, csv, json, html)\n   * @param metadata - Data for file generation\n   * @param formId - Form ID for context\n   * @param submissionId - Submission ID for context\n   * @returns Job ID for tracking\n   */\n  async submitFileGenerationJob(\n    templateType: string,\n    metadata: any,\n    formId?: string,\n    submissionId?: string\n  ): Promise<string> {\n    const response = await fetch(`${this.apiBaseUrl}/jobs`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        templateType,\n        metadata,\n        formId: formId || '',\n        submissionId: submissionId || '',\n      }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.message || 'Failed to submit file generation job');\n    }\n\n    const result = await response.json();\n    return result.jobId;\n  }\n\n  /**\n   * Get job status\n   *\n   * @param jobId - Job ID from submitFileGenerationJob\n   * @returns Job status and progress\n   */\n  async getJobStatus(jobId: string): Promise<JobStatus> {\n    const response = await fetch(`${this.apiBaseUrl}/jobs/${jobId}`);\n\n    if (!response.ok) {\n      if (response.status === 404) {\n        throw new Error('Job not found');\n      }\n      const error = await response.json();\n      throw new Error(error.message || 'Failed to get job status');\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Poll job status until completion\n   *\n   * @param jobId - Job ID to poll\n   * @param onProgress - Progress callback (optional)\n   * @returns Final job result\n   */\n  async pollJobUntilComplete(\n    jobId: string,\n    onProgress?: (progress: number, status: string) => void\n  ): Promise<JobStatus> {\n    return new Promise((resolve, reject) => {\n      const poll = async () => {\n        try {\n          const status = await this.getJobStatus(jobId);\n\n          // Call progress callback\n          if (onProgress) {\n            onProgress(status.progress, status.status);\n          }\n\n          // Check if job is complete\n          if (status.status === 'completed') {\n            resolve(status);\n            return;\n          }\n\n          // Check if job failed\n          if (status.status === 'failed') {\n            reject(new Error(status.error?.message || 'Job failed'));\n            return;\n          }\n\n          // Continue polling\n          setTimeout(poll, this.pollingInterval);\n        } catch (error) {\n          reject(error);\n        }\n      };\n\n      // Start polling\n      poll();\n    });\n  }\n\n  /**\n   * Download generated file\n   *\n   * @param jobId - Job ID\n   * @returns Blob containing file data\n   */\n  async downloadFile(jobId: string): Promise<Blob> {\n    const response = await fetch(`${this.apiBaseUrl}/download/${jobId}`);\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.message || 'Failed to download file');\n    }\n\n    return response.blob();\n  }\n\n  /**\n   * Cancel a job\n   *\n   * @param jobId - Job ID to cancel\n   */\n  async cancelJob(jobId: string): Promise<void> {\n    const response = await fetch(`${this.apiBaseUrl}/jobs/${jobId}`, {\n      method: 'DELETE',\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.message || 'Failed to cancel job');\n    }\n  }\n\n  /**\n   * Async file validation (non-blocking)\n   * Uses Web Workers API if available, falls back to async/await\n   *\n   * @param file - File to validate\n   * @param options - Validation options\n   * @returns Validation result\n   */\n  async validateFileAsync(\n    file: File,\n    options: {\n      maxSize?: number;\n      minSize?: number;\n      allowedTypes?: string[];\n      verifyMagicNumber?: boolean;\n    }\n  ): Promise<{ valid: boolean; error?: string }> {\n    // Size validation (synchronous, fast)\n    if (options.maxSize && file.size > options.maxSize) {\n      return {\n        valid: false,\n        error: `File size exceeds maximum allowed (${this.formatFileSize(options.maxSize)})`,\n      };\n    }\n\n    if (options.minSize && file.size < options.minSize) {\n      return {\n        valid: false,\n        error: `File size is below minimum required (${this.formatFileSize(options.minSize)})`,\n      };\n    }\n\n    // Type validation (synchronous, fast)\n    if (options.allowedTypes && options.allowedTypes.length > 0) {\n      const fileExt = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n      const isAllowed = options.allowedTypes.some((pattern) => {\n        if (pattern.startsWith('.')) {\n          return fileExt === pattern;\n        }\n        if (pattern.includes('/')) {\n          return file.type.match(new RegExp(pattern.replace('*', '.*')));\n        }\n        return false;\n      });\n\n      if (!isAllowed) {\n        return {\n          valid: false,\n          error: `File type not allowed. Allowed: ${options.allowedTypes.join(', ')}`,\n        };\n      }\n    }\n\n    // Magic number verification (async, heavy)\n    if (options.verifyMagicNumber) {\n      try {\n        const isValid = await this.verifyFileMagicNumber(file);\n        if (!isValid) {\n          return {\n            valid: false,\n            error: 'File content does not match declared type. This file may be dangerous.',\n          };\n        }\n      } catch (error) {\n        logger.warn('[AsyncFileProcessor] Magic number verification failed:', { error });\n        // Don't fail validation if magic number check errors\n      }\n    }\n\n    return { valid: true };\n  }\n\n  /**\n   * Verify file magic number (async)\n   * Reads first few bytes to verify file type matches extension\n   *\n   * @param file - File to verify\n   * @returns True if file type is valid\n   */\n  private async verifyFileMagicNumber(file: File): Promise<boolean> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n\n      reader.onload = (e) => {\n        try {\n          const arrayBuffer = e.target?.result as ArrayBuffer;\n          const bytes = new Uint8Array(arrayBuffer);\n\n          // Check magic numbers for common file types\n          const magicNumbers: Record<string, number[]> = {\n            'image/png': [0x89, 0x50, 0x4e, 0x47],\n            'image/jpeg': [0xff, 0xd8, 0xff],\n            'application/pdf': [0x25, 0x50, 0x44, 0x46], // %PDF\n            'application/zip': [0x50, 0x4b, 0x03, 0x04],\n            'image/gif': [0x47, 0x49, 0x46, 0x38],\n          };\n\n          const expectedMagic = magicNumbers[file.type];\n\n          if (!expectedMagic) {\n            // No magic number check for this type\n            resolve(true);\n            return;\n          }\n\n          // Verify magic number matches\n          const matches = expectedMagic.every((byte, index) => bytes[index] === byte);\n          resolve(matches);\n        } catch (error) {\n          reject(error);\n        }\n      };\n\n      reader.onerror = () => reject(new Error('Failed to read file'));\n\n      // Read first 16 bytes\n      reader.readAsArrayBuffer(file.slice(0, 16));\n    });\n  }\n\n  /**\n   * Format file size for display\n   */\n  private formatFileSize(bytes: number): string {\n    const units = ['B', 'KB', 'MB', 'GB'];\n    let size = bytes;\n    let unitIndex = 0;\n\n    while (size >= 1024 && unitIndex < units.length - 1) {\n      size /= 1024;\n      unitIndex++;\n    }\n\n    return `${size.toFixed(2)} ${units[unitIndex]}`;\n  }\n}\n\n/**\n * Singleton instance for convenience\n */\nexport const asyncFileProcessor = new AsyncFileProcessor();\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/components/FileUploadProgress.tsx","messages":[{"ruleId":"import/order","severity":2,"message":"There should be at least one empty line between import groups","line":8,"column":1,"nodeType":"ImportDeclaration","endLine":8,"endColumn":65,"fix":{"range":[225,225],"text":"\n"}},{"ruleId":"@typescript-eslint/consistent-type-imports","severity":2,"message":"Imports \"JobStatus\" are only used as type.","line":9,"column":1,"nodeType":"ImportDeclaration","messageId":"someImportsAreOnlyTypes","endLine":9,"endColumn":77,"fix":{"range":[255,264],"text":"type JobStatus"}},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":34,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":34,"endColumn":29},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":2,"message":"Forbidden non-null assertion.","line":40,"column":39,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":40,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":40,"column":56,"nodeType":"Property","messageId":"anyAssignment","endLine":40,"endColumn":77},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1197,1200],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1197,1200],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"unicorn/catch-error-name","severity":2,"message":"The catch parameter `err` should be named `error_`.","line":51,"column":16,"nodeType":"Identifier","messageId":"catch-error-name","endLine":51,"endColumn":19,"fix":{"range":[1396,1479],"text":"error_) {\n        if (!cancelled) {\n          const error = error_ instanceof Error ? error_"}},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":63,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":63,"endColumn":12,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[1653,1653],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[1653,1653],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"unicorn/catch-error-name","severity":2,"message":"The catch parameter `err` should be named `error_`.","line":78,"column":14,"nodeType":"Identifier","messageId":"catch-error-name","endLine":78,"endColumn":17,"fix":{"range":[1967,2066],"text":"error_) {\n      console.error('Failed to cancel job:', error_);\n      setError(error_ instanceof Error ? error_"}},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":2,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":86,"column":9,"nodeType":null,"messageId":"preferOptionalChain","endLine":86,"endColumn":49,"fix":{"range":[2228,2268],"text":"status?.status !== 'completed'"}},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":95,"column":44,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":95,"endColumn":46,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[2519,2521],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"unicorn/catch-error-name","severity":2,"message":"The catch parameter `err` should be named `error_`.","line":100,"column":14,"nodeType":"Identifier","messageId":"catch-error-name","endLine":100,"endColumn":17,"fix":{"range":[2675,2777],"text":"error_) {\n      console.error('Failed to download file:', error_);\n      setError(error_ instanceof Error ? error_"}},{"ruleId":"react/self-closing-comp","severity":2,"message":"Empty components are self-closing","line":125,"column":9,"nodeType":"JSXOpeningElement","messageId":"notSelfClosing","endLine":125,"endColumn":43,"fix":{"range":[3397,3404],"text":" />"}},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":161,"column":59,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":161,"endColumn":61,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[4540,4542],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"react/self-closing-comp","severity":2,"message":"Empty components are self-closing","line":181,"column":9,"nodeType":"JSXOpeningElement","messageId":"notSelfClosing","endLine":184,"endColumn":10,"fix":{"range":[5216,5223],"text":" />"}},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":209,"column":32,"nodeType":"MemberExpression","endLine":209,"endColumn":48}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":8,"fixableWarningCount":0,"source":"/**\n * File Upload Progress Component\n *\n * React component for displaying async file generation progress\n * Shows real-time progress from BullMQ job queue\n */\n\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { AsyncFileProcessor, JobStatus } from '../async/AsyncFileProcessor';\n\ninterface FileUploadProgressProps {\n  jobId: string;\n  onComplete?: (result: JobStatus) => void;\n  onError?: (error: Error) => void;\n  onCancel?: () => void;\n  pollingInterval?: number;\n}\n\nexport const FileUploadProgress: React.FC<FileUploadProgressProps> = ({\n  jobId,\n  onComplete,\n  onError,\n  onCancel,\n  pollingInterval = 1000\n}) => {\n  const [status, setStatus] = useState<JobStatus | null>(null);\n  const [error, setError] = useState<Error | null>(null);\n  const [processor] = useState(() => new AsyncFileProcessor('/api/file-generation', pollingInterval));\n\n  // Poll job status\n  useEffect(() => {\n    let cancelled = false;\n\n    const poll = async () => {\n      try {\n        const result = await processor.pollJobUntilComplete(\n          jobId,\n          (progress, status) => {\n            if (!cancelled) {\n              setStatus(prev => ({ ...prev!, progress, status: status as any }));\n            }\n          }\n        );\n\n        if (!cancelled) {\n          setStatus(result);\n          if (onComplete) {\n            onComplete(result);\n          }\n        }\n      } catch (err) {\n        if (!cancelled) {\n          const error = err instanceof Error ? err : new Error('Unknown error');\n          setError(error);\n          if (onError) {\n            onError(error);\n          }\n        }\n      }\n    };\n\n    // Start polling\n    poll();\n\n    // Cleanup on unmount\n    return () => {\n      cancelled = true;\n    };\n  }, [jobId, processor, onComplete, onError]);\n\n  // Handle cancel\n  const handleCancel = useCallback(async () => {\n    try {\n      await processor.cancelJob(jobId);\n      if (onCancel) {\n        onCancel();\n      }\n    } catch (err) {\n      console.error('Failed to cancel job:', err);\n      setError(err instanceof Error ? err : new Error('Failed to cancel job'));\n    }\n  }, [jobId, processor, onCancel]);\n\n  // Handle download\n  const handleDownload = useCallback(async () => {\n    if (!status || status.status !== 'completed') {\n      return;\n    }\n\n    try {\n      const blob = await processor.downloadFile(jobId);\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = status.result?.filename || 'download';\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n    } catch (err) {\n      console.error('Failed to download file:', err);\n      setError(err instanceof Error ? err : new Error('Failed to download file'));\n    }\n  }, [status, jobId, processor]);\n\n  // Render error state\n  if (error) {\n    return (\n      <div className=\"file-upload-progress error\">\n        <div className=\"progress-icon\">❌</div>\n        <div className=\"progress-message\">\n          <strong>Error:</strong> {error.message}\n        </div>\n        <button onClick={() => setError(null)} className=\"btn-retry\">\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Render loading state\n  if (!status) {\n    return (\n      <div className=\"file-upload-progress loading\">\n        <div className=\"progress-spinner\"></div>\n        <div className=\"progress-message\">Initializing...</div>\n      </div>\n    );\n  }\n\n  // Render completed state\n  if (status.status === 'completed') {\n    return (\n      <div className=\"file-upload-progress completed\">\n        <div className=\"progress-icon\">✅</div>\n        <div className=\"progress-details\">\n          <div className=\"progress-message\">\n            <strong>Completed!</strong>\n          </div>\n          {status.result && (\n            <div className=\"file-info\">\n              <div>File: {status.result.filename}</div>\n              <div>Size: {formatFileSize(status.result.size)}</div>\n              <div>Processing time: {status.result.processingTime}ms</div>\n            </div>\n          )}\n        </div>\n        <button onClick={handleDownload} className=\"btn-download\">\n          Download\n        </button>\n      </div>\n    );\n  }\n\n  // Render failed state\n  if (status.status === 'failed') {\n    return (\n      <div className=\"file-upload-progress failed\">\n        <div className=\"progress-icon\">❌</div>\n        <div className=\"progress-message\">\n          <strong>Failed:</strong> {status.error?.message || 'Unknown error'}\n        </div>\n        <button onClick={() => window.location.reload()} className=\"btn-retry\">\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  // Render in-progress state\n  return (\n    <div className=\"file-upload-progress active\">\n      <div className=\"progress-header\">\n        <div className=\"progress-title\">\n          {status.status === 'waiting' ? 'Waiting in queue...' : 'Processing...'}\n        </div>\n        <div className=\"progress-percentage\">{status.progress}%</div>\n      </div>\n\n      <div className=\"progress-bar\">\n        <div\n          className=\"progress-bar-fill\"\n          style={{ width: `${status.progress}%` }}\n        ></div>\n      </div>\n\n      <div className=\"progress-actions\">\n        <button onClick={handleCancel} className=\"btn-cancel\">\n          Cancel\n        </button>\n      </div>\n    </div>\n  );\n};\n\n/**\n * Format file size helper\n */\nfunction formatFileSize(bytes: number): string {\n  const units = ['B', 'KB', 'MB', 'GB'];\n  let size = bytes;\n  let unitIndex = 0;\n\n  while (size >= 1024 && unitIndex < units.length - 1) {\n    size /= 1024;\n    unitIndex++;\n  }\n\n  return `${size.toFixed(2)} ${units[unitIndex]}`;\n}\n\n// Export CSS for component (should be imported by consuming app)\nexport const FileUploadProgressCSS = `\n.file-upload-progress {\n  padding: 20px;\n  border-radius: 8px;\n  background: #f8f9fa;\n  border: 1px solid #dee2e6;\n  margin: 10px 0;\n}\n\n.file-upload-progress.error,\n.file-upload-progress.failed {\n  background: #f8d7da;\n  border-color: #f5c6cb;\n  color: #721c24;\n}\n\n.file-upload-progress.completed {\n  background: #d4edda;\n  border-color: #c3e6cb;\n  color: #155724;\n}\n\n.progress-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.progress-title {\n  font-weight: 500;\n  font-size: 14px;\n}\n\n.progress-percentage {\n  font-weight: 600;\n  font-size: 16px;\n  color: #007bff;\n}\n\n.progress-bar {\n  height: 8px;\n  background: #e9ecef;\n  border-radius: 4px;\n  overflow: hidden;\n  margin-bottom: 10px;\n}\n\n.progress-bar-fill {\n  height: 100%;\n  background: linear-gradient(90deg, #007bff 0%, #0056b3 100%);\n  transition: width 0.3s ease;\n}\n\n.progress-icon {\n  font-size: 32px;\n  margin-bottom: 10px;\n}\n\n.progress-message {\n  margin-bottom: 10px;\n}\n\n.file-info {\n  font-size: 12px;\n  color: #6c757d;\n  margin-top: 5px;\n}\n\n.file-info div {\n  margin: 2px 0;\n}\n\n.progress-actions {\n  margin-top: 10px;\n}\n\n.btn-cancel,\n.btn-retry,\n.btn-download {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  font-size: 14px;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.btn-cancel {\n  background: #6c757d;\n  color: white;\n}\n\n.btn-cancel:hover {\n  background: #5a6268;\n}\n\n.btn-retry {\n  background: #ffc107;\n  color: #000;\n}\n\n.btn-retry:hover {\n  background: #e0a800;\n}\n\n.btn-download {\n  background: #28a745;\n  color: white;\n}\n\n.btn-download:hover {\n  background: #218838;\n}\n\n.progress-spinner {\n  width: 24px;\n  height: 24px;\n  border: 3px solid #f3f3f3;\n  border-top: 3px solid #007bff;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 10px;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n`;\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/components/MultiImageUpload/Component.test.ts","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): packages/formio-file-upload/src/components/MultiImageUpload/Component.test.ts"}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Components } from '@formio/js';\nimport MultiImageUploadComponent from './Component';\n\ndescribe('MultiImageUploadComponent', () => {\n  beforeAll(() => {\n    (Components as any).setComponent('multiimageupload', MultiImageUploadComponent);\n  });\n\n  it('should define schema correctly', () => {\n    const schema = MultiImageUploadComponent.schema();\n    expect(schema.type).toBe('multiimageupload');\n    expect(schema.key).toBe('site_images');\n    expect(schema.maxFiles).toBe(20);\n    expect(schema.compressionQuality).toBe(0.8);\n    expect(schema.autoNumbering).toBe(true);\n    expect(schema.extractMetadata).toBe(true);\n  });\n\n  it('should have correct builderInfo', () => {\n    const info = MultiImageUploadComponent.builderInfo;\n    expect(info.title).toBe('Multi-Image Upload');\n    expect(info.group).toBe('premium');\n    expect(info.icon).toBe('images');\n    expect(info.weight).toBe(102);\n  });\n\n  it('should register with Form.io', () => {\n    const component = (Components as any).create(\n      {\n        type: 'multiimageupload',\n        key: 'site_images',\n      },\n      {},\n      {}\n    );\n    expect(component).toBeInstanceOf(MultiImageUploadComponent);\n  });\n\n  it('should handle setValue/getValue', () => {\n    const component = new MultiImageUploadComponent(\n      {\n        type: 'multiimageupload',\n        key: 'site_images',\n      },\n      {},\n      {}\n    );\n\n    const testValue = [\n      {\n        url: 'http://test.com/1',\n        name: 'Site Image 1',\n        number: 1,\n        timestamp: Date.now(),\n        size: 1024,\n        type: 'image/jpeg',\n      },\n    ];\n\n    component.setValue(testValue);\n    expect(component.getValue()).toEqual(testValue);\n  });\n\n  it('should return empty array for getValue when no data', () => {\n    const component = new MultiImageUploadComponent(\n      {\n        type: 'multiimageupload',\n        key: 'site_images',\n      },\n      {},\n      {}\n    );\n\n    expect(component.getValue()).toEqual([]);\n  });\n\n  it('should have proper schema defaults', () => {\n    const schema = MultiImageUploadComponent.schema();\n    expect(schema.storage).toBe('url');\n    expect(schema.url).toBe('http://localhost:1080/files/');\n    expect(schema.filePattern).toBe('image/*,video/*');\n    expect(schema.fileMaxSize).toBe('10MB');\n  });\n\n  it('should allow schema extension', () => {\n    const schema = MultiImageUploadComponent.schema({\n      maxFiles: 50,\n      customProp: 'test',\n    });\n    expect(schema.maxFiles).toBe(50);\n    expect((schema as any).customProp).toBe('test');\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/components/MultiImageUpload/Component.ts","messages":[{"ruleId":"import/order","severity":2,"message":"There should be at least one empty line between import groups","line":8,"column":1,"nodeType":"ImportDeclaration","endLine":8,"endColumn":41,"fix":{"range":[237,237],"text":"\n"}},{"ruleId":"import/order","severity":2,"message":"`../../utils/logger` import should occur after import of `../../config/whitelabel`","line":9,"column":1,"nodeType":"ImportDeclaration","endLine":9,"endColumn":45,"fix":{"range":[238,403],"text":"import { UPLOAD_CONSTANTS } from '../../config/constants';\nimport { WHITELABEL_CONFIG } from '../../config/whitelabel';\nimport { logger } from '../../utils/logger';\n"}},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":13,"column":7,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":13,"endColumn":58},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[441,444],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[441,444],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .components on an `any` value.","line":13,"column":43,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":13,"endColumn":53},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[621,624],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[621,624],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[673,676],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[673,676],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'component' should be typed with a non-any type.","line":20,"column":15,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":20,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[711,714],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[711,714],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'options' should be typed with a non-any type.","line":20,"column":31,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":20,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[725,728],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[725,728],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'data' should be typed with a non-any type.","line":20,"column":45,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":20,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[736,739],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[736,739],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":21,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":21,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[747,982],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":23,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":23,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":23,"column":32,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":23,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":24,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":24,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .type on an `any` value.","line":24,"column":33,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":24,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":29,"column":5,"nodeType":"Super","messageId":"unsafeCall","endLine":29,"endColumn":10},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":31,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":31,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1026,1279],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":33,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":33,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":33,"column":37,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":33,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":35,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":35,"endColumn":56},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":39,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":39,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":39,"column":32,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":39,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":40,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":40,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .type on an `any` value.","line":40,"column":33,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":40,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":44,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":44,"endColumn":18},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":44,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":44,"endColumn":18},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":48,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":48,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":48,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":48,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'factory' should be typed with a non-any type.","line":48,"column":33,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":48,"endColumn":45},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1533,1536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1533,1536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":49,"column":5,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":49,"endColumn":62},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":52,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":52,"endColumn":16},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":52,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":52,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1635,1638],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1635,1638],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":53,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":68,"endColumn":7},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":53,"column":12,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":53,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .schema on an `any` value.","line":53,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":53,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":71,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":71,"endColumn":25},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":71,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":71,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":78,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":78,"endColumn":49},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":82,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":82,"endColumn":18},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":82,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":82,"endColumn":18},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":83,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":83,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":83,"column":12,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":83,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .editForm on an `any` value.","line":83,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":83,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":86,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":86,"endColumn":9},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":86,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":86,"endColumn":9},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":87,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":87,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2538,2715],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":89,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":89,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":89,"column":37,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":89,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":93,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":93,"endColumn":46},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":93,"column":25,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":93,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .attach on an `any` value.","line":93,"column":31,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":93,"endColumn":37},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":95,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":95,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2769,2939],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":104,"column":92,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":104,"endColumn":95},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":106,"column":87,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":106,"endColumn":89,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[3259,3261],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":109,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":109,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3325,3577],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":115,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":115,"endColumn":31,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[3583,3583],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[3583,3583],"text":"await "},"desc":"Add await operator."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":117,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":117,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3615,3722],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":121,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":121,"endColumn":24},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":124,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":124,"endColumn":9},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":124,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":124,"endColumn":9},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":125,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":125,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3770,4122],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":127,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":127,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":127,"column":37,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":127,"endColumn":40},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":135,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":135,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4225,4408],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":137,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":137,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":141,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":141,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .unmount on an `any` value.","line":141,"column":36,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":141,"endColumn":43},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":142,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":142,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4476,4621],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"object-shorthand","severity":2,"message":"Expected property shorthand.","line":148,"column":11,"nodeType":"Property","messageId":"expectedPropertyShorthand","endLine":148,"endColumn":23,"fix":{"range":[4794,4806],"text":"error"}},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":154,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":154,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":154,"column":41,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":154,"endColumn":44},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":160,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":160,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5243,5383],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":165,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":165,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5395,5527],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":171,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":171,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5566,5702],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":177,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":177,"endColumn":27},{"ruleId":"require-await","severity":2,"message":"Async method 'loadReactComponent' has no 'await' expression.","line":177,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":177,"endColumn":27,"suggestions":[{"messageId":"removeAsync","fix":{"range":[5710,5716],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":177,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":177,"endColumn":27},{"ruleId":"sonarjs/cognitive-complexity","severity":2,"message":"Refactor this function to reduce its Cognitive Complexity from 19 to the 15 allowed.","line":177,"column":9,"nodeType":null,"messageId":"refactorFunction","endLine":177,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":178,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":178,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5743,5991],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":180,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":180,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":180,"column":37,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":180,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":188,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":188,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":188,"column":39,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":188,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":192,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":192,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":192,"column":39,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":192,"endColumn":42},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":197,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":197,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6405,6872],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":207,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":207,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6878,7213],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":211,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":211,"endColumn":63},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":215,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":215,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":215,"column":37,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":215,"endColumn":40},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":231,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":231,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7798,7930],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":235,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":236,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":236,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":236,"endColumn":56},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":238,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":238,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8050,8516],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":246,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":246,"endColumn":85},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .createRoot on an `any` value.","line":246,"column":60,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":246,"endColumn":70},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":257,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":257,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8791,8933],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":260,"column":9,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":260,"endColumn":78},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":260,"column":38,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":260,"endColumn":57},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .createRoot on an `any` value.","line":260,"column":47,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":260,"endColumn":57},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":262,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":262,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9036,9182],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":267,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":267,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9198,9809],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":270,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":270,"endColumn":55},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":270,"column":35,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":270,"endColumn":38},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":270,"column":39,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":270,"endColumn":41,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[9394,9396],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":271,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":271,"endColumn":82},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .maxFiles on an `any` value.","line":271,"column":36,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":271,"endColumn":44},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":271,"column":45,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":271,"endColumn":47,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[9456,9458],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":272,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":273,"endColumn":94},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .compressionQuality on an `any` value.","line":273,"column":28,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":273,"endColumn":46},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":273,"column":47,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":273,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[9571,9573],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":274,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":274,"endColumn":62},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .autoNumbering on an `any` value.","line":274,"column":41,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":274,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":275,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":275,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .extractMetadata on an `any` value.","line":275,"column":43,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":275,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":276,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":276,"endColumn":38},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":276,"column":33,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":276,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[9782,9784],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":280,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":280,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9817,9948],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":285,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":285,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .render on an `any` value.","line":285,"column":34,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":285,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":286,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":286,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .createElement on an `any` value.","line":286,"column":15,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":286,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":287,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":287,"endColumn":55},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":287,"column":35,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":287,"endColumn":38},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":287,"column":39,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":287,"endColumn":41,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[10118,10120],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":288,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":288,"endColumn":82},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .maxFiles on an `any` value.","line":288,"column":36,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":288,"endColumn":44},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":288,"column":45,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":288,"endColumn":47,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[10180,10182],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":289,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":290,"endColumn":94},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .compressionQuality on an `any` value.","line":290,"column":28,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":290,"endColumn":46},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":290,"column":47,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":290,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[10295,10297],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":291,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":291,"endColumn":62},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .autoNumbering on an `any` value.","line":291,"column":41,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":291,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":292,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":292,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .extractMetadata on an `any` value.","line":292,"column":43,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":292,"endColumn":58},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":293,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":293,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10502,10505],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10502,10505],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":294,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":294,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10524,10732],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":296,"column":15,"nodeType":"Property","messageId":"anyAssignment","endLine":296,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .length on an `any` value.","line":296,"column":34,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":296,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":297,"column":15,"nodeType":"Property","messageId":"anyAssignment","endLine":297,"endColumn":27},{"ruleId":"object-shorthand","severity":2,"message":"Expected property shorthand.","line":297,"column":15,"nodeType":"Property","messageId":"expectedPropertyShorthand","endLine":297,"endColumn":27,"fix":{"range":[10703,10715],"text":"files"}},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":302,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":302,"endColumn":38},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":302,"column":33,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":302,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[10813,10815],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":306,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":306,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10847,10977],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":310,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":310,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10985,11266],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":312,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":312,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":318,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":318,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":318,"column":39,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":318,"endColumn":42},{"ruleId":"object-shorthand","severity":2,"message":"Expected property shorthand.","line":319,"column":9,"nodeType":"Property","messageId":"expectedPropertyShorthand","endLine":319,"endColumn":21,"fix":{"range":[11471,11483],"text":"error"}},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":326,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":326,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":326,"column":39,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":326,"endColumn":42},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":332,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":332,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11993,12183],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":347,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":347,"endColumn":10},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":347,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":347,"endColumn":10},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":348,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":348,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12425,12778],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":350,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":350,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":350,"column":37,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":350,"endColumn":40},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":357,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":357,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12824,13008],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":359,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":359,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":363,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":363,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .unmount on an `any` value.","line":363,"column":36,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":363,"endColumn":43},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":364,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":364,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13076,13222],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"object-shorthand","severity":2,"message":"Expected property shorthand.","line":370,"column":11,"nodeType":"Property","messageId":"expectedPropertyShorthand","endLine":370,"endColumn":23,"fix":{"range":[13396,13408],"text":"error"}},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":376,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":376,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":376,"column":41,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":376,"endColumn":44},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":382,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":382,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13831,13972],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":387,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":387,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13984,14117],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":393,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":393,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14156,14279],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":397,"column":5,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":397,"endColumn":18},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .destroy on an `any` value.","line":397,"column":11,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":397,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":399,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":399,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14307,14448],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":405,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":405,"endColumn":11},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":405,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":405,"endColumn":11},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":406,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":406,"endColumn":33},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":406,"column":27,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":406,"endColumn":29,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[14495,14497],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":409,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":409,"endColumn":11},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":409,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":409,"endColumn":11},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'value' should be typed with a non-any type.","line":409,"column":12,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":409,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":409,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":409,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14525,14528],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14525,14528],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":409,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":409,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14537,14540],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14537,14540],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":410,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":410,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14553,14781],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":412,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":412,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":412,"column":37,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":412,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":413,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":413,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":414,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":414,"endColumn":19},{"ruleId":"object-shorthand","severity":2,"message":"Expected property shorthand.","line":414,"column":7,"nodeType":"Property","messageId":"expectedPropertyShorthand","endLine":414,"endColumn":19,"fix":{"range":[14723,14735],"text":"flags"}},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":415,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":415,"endColumn":36},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":418,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":418,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":418,"column":21,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":418,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .setValue on an `any` value.","line":418,"column":27,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":418,"endColumn":35},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":420,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":420,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14838,15031],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":422,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":422,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":423,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":423,"endColumn":39},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":427,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":427,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15058,15234],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":432,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":432,"endColumn":25},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":435,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":435,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15343,15538],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":441,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":441,"endColumn":20}],"suppressedMessages":[],"errorCount":139,"fatalErrorCount":0,"warningCount":63,"fixableErrorCount":7,"fixableWarningCount":0,"source":"/**\n * Multi-Image Upload Component for Form.io\n *\n * Adapter that bridges the pure React MultiImageUpload component to Form.io.\n * Follows Anti-Corruption Layer pattern to minimize coupling.\n */\n\nimport { Components } from '@formio/js';\nimport { logger } from '../../utils/logger';\nimport { UPLOAD_CONSTANTS } from '../../config/constants';\nimport { WHITELABEL_CONFIG } from '../../config/whitelabel';\n\nconst FileComponent = (Components as any).components.file;\n\nexport default class MultiImageUploadComponent extends FileComponent {\n  private reactContainer: HTMLElement | null = null;\n  private mountedReactComponent: any = null;\n  private static reactComponentFactory: any = null;\n\n  constructor(component: any, options: any, data: any) {\n    console.log('🔴 [MultiImageUpload] constructor() START', {\n      timestamp: new Date().toISOString(),\n      componentKey: component?.key,\n      componentType: component?.type,\n      hasOptions: !!options,\n      hasData: !!data,\n    });\n\n    super(component, options, data);\n\n    console.log('🔴 [MultiImageUpload] constructor() COMPLETE', {\n      timestamp: new Date().toISOString(),\n      componentKey: this.component?.key,\n      reactContainer: this.reactContainer,\n      mountedReactComponent: this.mountedReactComponent,\n    });\n\n    logger.info('MultiImageUploadComponent constructor called', {\n      componentKey: component?.key,\n      componentType: component?.type,\n    });\n  }\n\n  static get type() {\n    return 'multiimageupload';\n  }\n\n  static registerReactComponent(factory: any) {\n    MultiImageUploadComponent.reactComponentFactory = factory;\n  }\n\n  static schema(...extend: any[]) {\n    return FileComponent.schema(\n      {\n        type: 'multiimageupload',\n        label: 'Multi-Image Upload',\n        key: 'site_images',\n        storage: 'url',\n        url: UPLOAD_CONSTANTS.DEFAULT_TUS_ENDPOINT,\n        maxFiles: UPLOAD_CONSTANTS.DEFAULT_MAX_FILES,\n        compressionQuality: UPLOAD_CONSTANTS.DEFAULT_COMPRESSION_QUALITY,\n        autoNumbering: true,\n        extractMetadata: true,\n        filePattern: 'image/*,video/*',\n        fileMaxSize: '10MB',\n      },\n      ...extend\n    );\n  }\n\n  static get builderInfo() {\n    return {\n      title: 'Multi-Image Upload',\n      icon: 'images',\n      group: 'premium',\n      documentation: '/userguide/forms/premium-components#multi-image-upload',\n      weight: 102,\n      schema: MultiImageUploadComponent.schema(),\n    };\n  }\n\n  static editForm() {\n    return FileComponent.editForm();\n  }\n\n  attach(element: HTMLElement) {\n    console.log('🔴 [MultiImageUpload] attach() START', {\n      timestamp: new Date().toISOString(),\n      componentKey: this.component?.key,\n      elementReceived: element,\n    });\n\n    const superResult = super.attach(element);\n\n    console.log(\n      '🔴 [MultiImageUpload] attach() super.attach() complete, creating React container',\n      {\n        timestamp: new Date().toISOString(),\n      }\n    );\n\n    this.reactContainer = document.createElement('div');\n    this.reactContainer.className = WHITELABEL_CONFIG.CLASSES.UPLOAD_WIDGET;\n    this.reactContainer.id = WHITELABEL_CONFIG.ID_PATTERNS.UPLOAD_CONTAINER(this.component.key);\n\n    const uploadArea = element.querySelector(WHITELABEL_CONFIG.SELECTORS.UPLOAD_AREA) || element;\n    uploadArea.appendChild(this.reactContainer);\n\n    console.log('🔴 [MultiImageUpload] attach() React container appended to DOM', {\n      timestamp: new Date().toISOString(),\n      containerInDocument: document.contains(this.reactContainer),\n      containerParent: this.reactContainer.parentNode,\n    });\n\n    this.loadReactComponent();\n\n    console.log('🔴 [MultiImageUpload] attach() COMPLETE', {\n      timestamp: new Date().toISOString(),\n    });\n\n    return superResult;\n  }\n\n  detach() {\n    console.log('🔴 [MultiImageUpload] detach() START', {\n      timestamp: new Date().toISOString(),\n      componentKey: this.component?.key,\n      hasMountedReactComponent: !!this.mountedReactComponent,\n      hasReactContainer: !!this.reactContainer,\n      containerInDocument: this.reactContainer ? document.contains(this.reactContainer) : false,\n    });\n\n    // Properly unmount React component before detaching\n    if (this.mountedReactComponent) {\n      console.log('🔴 [MultiImageUpload] detach() unmounting React component', {\n        timestamp: new Date().toISOString(),\n        mountedComponent: this.mountedReactComponent,\n      });\n\n      try {\n        this.mountedReactComponent.unmount();\n        console.log('🔴 [MultiImageUpload] detach() React component unmounted successfully', {\n          timestamp: new Date().toISOString(),\n        });\n      } catch (error) {\n        console.error('🔴 [MultiImageUpload] detach() error unmounting React component', {\n          timestamp: new Date().toISOString(),\n          error: error,\n          errorMessage: error instanceof Error ? error.message : String(error),\n          errorStack: error instanceof Error ? error.stack : undefined,\n        });\n\n        logger.warn('Error unmounting React component during detach', {\n          componentKey: this.component?.key,\n          error: error instanceof Error ? error.message : String(error),\n        });\n      }\n      this.mountedReactComponent = null;\n    } else {\n      console.log('🔴 [MultiImageUpload] detach() no mounted React component to unmount', {\n        timestamp: new Date().toISOString(),\n      });\n    }\n\n    console.log('🔴 [MultiImageUpload] detach() clearing reactContainer reference', {\n      timestamp: new Date().toISOString(),\n    });\n\n    this.reactContainer = null;\n\n    console.log('🔴 [MultiImageUpload] detach() COMPLETE', {\n      timestamp: new Date().toISOString(),\n      cleanupComplete: true,\n    });\n  }\n\n  async loadReactComponent() {\n    console.log('🔴 [MultiImageUpload] loadReactComponent() START', {\n      timestamp: new Date().toISOString(),\n      componentKey: this.component?.key,\n      hasReactContainer: !!this.reactContainer,\n      reactContainer: this.reactContainer,\n    });\n\n    if (!this.reactContainer) {\n      console.error('🔴 [MultiImageUpload] loadReactComponent() ABORTED - reactContainer is null', {\n        timestamp: new Date().toISOString(),\n        componentKey: this.component?.key,\n        thisObject: this,\n      });\n      logger.error('loadReactComponent called but reactContainer is null', {\n        componentKey: this.component?.key,\n      });\n      return;\n    }\n\n    console.log('🔴 [MultiImageUpload] loadReactComponent() checking DOM state', {\n      timestamp: new Date().toISOString(),\n      containerInDocument: document.contains(this.reactContainer),\n      containerParent: this.reactContainer.parentNode,\n      containerParentTagName: this.reactContainer.parentNode\n        ? (this.reactContainer.parentNode as HTMLElement).tagName\n        : null,\n      documentBodyContains: document.body.contains(this.reactContainer),\n    });\n\n    console.log('🔴 [MultiImageUpload] loadReactComponent() checking factory', {\n      timestamp: new Date().toISOString(),\n      hasFactory: !!MultiImageUploadComponent.reactComponentFactory,\n      factoryType: typeof MultiImageUploadComponent.reactComponentFactory,\n      factory: MultiImageUploadComponent.reactComponentFactory,\n    });\n\n    logger.info('loadReactComponent called', {\n      componentKey: this.component?.key,\n      hasFactory: !!MultiImageUploadComponent.reactComponentFactory,\n      containerInDocument: document.contains(this.reactContainer),\n    });\n\n    try {\n      if (!MultiImageUploadComponent.reactComponentFactory) {\n        console.error(\n          '🔴 [MultiImageUpload] loadReactComponent() ABORTED - factory not registered',\n          {\n            timestamp: new Date().toISOString(),\n          }\n        );\n        throw new Error('React component factory not registered');\n      }\n\n      console.log('🔴 [MultiImageUpload] loadReactComponent() calling factory()', {\n        timestamp: new Date().toISOString(),\n      });\n\n      const { React, ReactDOM, MultiImageUpload } =\n        MultiImageUploadComponent.reactComponentFactory();\n\n      console.log('🔴 [MultiImageUpload] loadReactComponent() factory returned dependencies', {\n        timestamp: new Date().toISOString(),\n        hasReact: !!React,\n        hasReactDOM: !!ReactDOM,\n        hasMultiImageUpload: !!MultiImageUpload,\n        ReactType: typeof React,\n        ReactDOMType: typeof ReactDOM,\n        MultiImageUploadType: typeof MultiImageUpload,\n        ReactDOMHasCreateRoot: ReactDOM && typeof ReactDOM.createRoot === 'function',\n      });\n\n      logger.info('React dependencies loaded', {\n        hasReact: !!React,\n        hasReactDOM: !!ReactDOM,\n        hasMultiImageUpload: !!MultiImageUpload,\n      });\n\n      // ✅ Reuse existing React root or create new one\n      if (!this.mountedReactComponent) {\n        console.log('🔴 [MultiImageUpload] loadReactComponent() creating NEW React root', {\n          timestamp: new Date().toISOString(),\n        });\n        this.mountedReactComponent = ReactDOM.createRoot(this.reactContainer);\n      } else {\n        console.log('🔴 [MultiImageUpload] loadReactComponent() reusing existing React root', {\n          timestamp: new Date().toISOString(),\n        });\n      }\n\n      console.log('🔴 [MultiImageUpload] loadReactComponent() preparing props for render', {\n        timestamp: new Date().toISOString(),\n        componentProps: {\n          formKey: this.component.key || 'site_images',\n          maxFiles: this.component.maxFiles || UPLOAD_CONSTANTS.DEFAULT_MAX_FILES,\n          compressionQuality:\n            this.component.compressionQuality || UPLOAD_CONSTANTS.DEFAULT_COMPRESSION_QUALITY,\n          autoNumbering: this.component.autoNumbering ?? true,\n          extractMetadata: this.component.extractMetadata ?? true,\n          value: this.dataValue || [],\n        },\n      });\n\n      console.log('🔴 [MultiImageUpload] loadReactComponent() calling render()', {\n        timestamp: new Date().toISOString(),\n      });\n\n      // ✅ Update props on existing root\n      this.mountedReactComponent.render(\n        React.createElement(MultiImageUpload, {\n          formKey: this.component.key || 'site_images',\n          maxFiles: this.component.maxFiles || UPLOAD_CONSTANTS.DEFAULT_MAX_FILES,\n          compressionQuality:\n            this.component.compressionQuality || UPLOAD_CONSTANTS.DEFAULT_COMPRESSION_QUALITY,\n          autoNumbering: this.component.autoNumbering ?? true,\n          extractMetadata: this.component.extractMetadata ?? true,\n          onChange: (files: any) => {\n            console.log('🔴 [MultiImageUpload] React onChange callback triggered', {\n              timestamp: new Date().toISOString(),\n              filesCount: files?.length,\n              files: files,\n            });\n\n            this.setValue(files);\n          },\n          value: this.dataValue || [],\n        })\n      );\n\n      console.log('🔴 [MultiImageUpload] loadReactComponent() render() called', {\n        timestamp: new Date().toISOString(),\n      });\n\n      console.log('🔴 [MultiImageUpload] loadReactComponent() SUCCESS - React component mounted', {\n        timestamp: new Date().toISOString(),\n        mountedReactComponent: this.mountedReactComponent,\n        containerStillInDocument: document.contains(this.reactContainer),\n      });\n    } catch (error) {\n      console.error('🔴 [MultiImageUpload] loadReactComponent() FAILED with error', {\n        timestamp: new Date().toISOString(),\n        componentKey: this.component?.key,\n        error: error,\n        errorMessage: error instanceof Error ? error.message : String(error),\n        errorStack: error instanceof Error ? error.stack : undefined,\n        errorType: error ? error.constructor.name : 'unknown',\n      });\n\n      logger.error('Failed to load React component', {\n        componentKey: this.component?.key,\n        error: error instanceof Error ? error.message : String(error),\n        stack: error instanceof Error ? error.stack : undefined,\n      });\n\n      if (this.reactContainer) {\n        console.log(\n          '🔴 [MultiImageUpload] loadReactComponent() displaying error message in container',\n          {\n            timestamp: new Date().toISOString(),\n          }\n        );\n        this.reactContainer.innerHTML = `\n          <div class=\"alert alert-danger\">\n            Failed to load Multi-Image Upload component. Please check console for details.\n          </div>\n        `;\n      }\n    }\n  }\n\n  destroy() {\n    console.log('🔴 [MultiImageUpload] destroy() START', {\n      timestamp: new Date().toISOString(),\n      componentKey: this.component?.key,\n      hasMountedReactComponent: !!this.mountedReactComponent,\n      hasReactContainer: !!this.reactContainer,\n      containerInDocument: this.reactContainer ? document.contains(this.reactContainer) : false,\n    });\n\n    if (this.mountedReactComponent) {\n      console.log('🔴 [MultiImageUpload] destroy() unmounting React component', {\n        timestamp: new Date().toISOString(),\n        mountedComponent: this.mountedReactComponent,\n      });\n\n      try {\n        this.mountedReactComponent.unmount();\n        console.log('🔴 [MultiImageUpload] destroy() React component unmounted successfully', {\n          timestamp: new Date().toISOString(),\n        });\n      } catch (error) {\n        console.error('🔴 [MultiImageUpload] destroy() error unmounting React component', {\n          timestamp: new Date().toISOString(),\n          error: error,\n          errorMessage: error instanceof Error ? error.message : String(error),\n          errorStack: error instanceof Error ? error.stack : undefined,\n        });\n\n        logger.warn('Error unmounting React component', {\n          componentKey: this.component?.key,\n          error: error instanceof Error ? error.message : String(error),\n        });\n      }\n      this.mountedReactComponent = null;\n    } else {\n      console.log('🔴 [MultiImageUpload] destroy() no mounted React component to unmount', {\n        timestamp: new Date().toISOString(),\n      });\n    }\n\n    console.log('🔴 [MultiImageUpload] destroy() clearing reactContainer reference', {\n      timestamp: new Date().toISOString(),\n    });\n\n    this.reactContainer = null;\n\n    console.log('🔴 [MultiImageUpload] destroy() calling super.destroy()', {\n      timestamp: new Date().toISOString(),\n    });\n\n    super.destroy();\n\n    console.log('🔴 [MultiImageUpload] destroy() COMPLETE', {\n      timestamp: new Date().toISOString(),\n      fullCleanupComplete: true,\n    });\n  }\n\n  getValue() {\n    return this.dataValue || [];\n  }\n\n  setValue(value: any, flags: any = {}) {\n    console.log('🔴 [MultiImageUpload] setValue() called', {\n      timestamp: new Date().toISOString(),\n      componentKey: this.component?.key,\n      newValue: value,\n      flags: flags,\n      previousValue: this.dataValue,\n    });\n\n    const changed = super.setValue(value, flags);\n\n    console.log('🔴 [MultiImageUpload] setValue() super.setValue() result', {\n      timestamp: new Date().toISOString(),\n      valueChanged: changed,\n      updatedDataValue: this.dataValue,\n    });\n\n    if (changed) {\n      console.log('🔴 [MultiImageUpload] setValue() value changed, triggering change event', {\n        timestamp: new Date().toISOString(),\n        willTriggerChange: true,\n      });\n\n      this.triggerChange();\n\n      // ✅ React component will sync via useEffect - no need to remount\n      console.log('🔴 [MultiImageUpload] setValue() React will sync via useEffect', {\n        timestamp: new Date().toISOString(),\n        reactComponentMounted: !!this.mountedReactComponent,\n      });\n    }\n\n    return changed;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/components/MultiImageUpload/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/components/TusFileUpload/Component.ts","messages":[{"ruleId":"import/order","severity":2,"message":"There should be at least one empty line between import groups","line":8,"column":1,"nodeType":"ImportDeclaration","endLine":8,"endColumn":38,"fix":{"range":[217,217],"text":"\n"}},{"ruleId":"@typescript-eslint/consistent-type-imports","severity":2,"message":"Imports \"ComponentSchema\" and \"UploadFile\" are only used as type.","line":9,"column":1,"nodeType":"ImportDeclaration","messageId":"someImportsAreOnlyTypes","endLine":9,"endColumn":84,"fix":{"range":[227,265],"text":"type ComponentSchema, TusConfig, type UploadFile"}},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TusConfig' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":36},{"ruleId":"no-unused-vars","severity":2,"message":"'TusConfig' is defined but never used.","line":9,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"TusConfig"},"fix":{"range":[242,253],"text":""},"desc":"Remove unused variable 'TusConfig'."}]},{"ruleId":"import/order","severity":2,"message":"`../../utils/logger` import should occur before import of `../../validators`","line":11,"column":1,"nodeType":"ImportDeclaration","endLine":11,"endColumn":45,"fix":{"range":[302,416],"text":"import { logger } from '../../utils/logger';\nimport { verifyFileType, sanitizeFilename } from '../../validators';\n"}},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":13,"column":7,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":13,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .file on an `any` value.","line":13,"column":45,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":13,"endColumn":49},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[556,559],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[556,559],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[914,917],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[914,917],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":26,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":40,"endColumn":8},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":26,"column":12,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":26,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .schema on an `any` value.","line":26,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":26,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":43,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":43,"endColumn":25},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":43,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":43,"endColumn":25},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":54,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":54,"endColumn":18},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":54,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":54,"endColumn":18},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":55,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":130,"endColumn":8},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":55,"column":12,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":55,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .editForm on an `any` value.","line":55,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":55,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'component' should be typed with a non-any type.","line":133,"column":15,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":133,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":133,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3850,3853],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3850,3853],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'options' should be typed with a non-any type.","line":133,"column":31,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":133,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":133,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3864,3867],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3864,3867],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'data' should be typed with a non-any type.","line":133,"column":45,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":133,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":133,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3875,3878],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3875,3878],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":134,"column":5,"nodeType":"Super","messageId":"unsafeCall","endLine":134,"endColumn":10},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .storage on an `any` value.","line":135,"column":20,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":135,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":136,"column":5,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":136,"endColumn":86},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .url on an `any` value.","line":136,"column":20,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":136,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .tusEndpoint on an `any` value.","line":136,"column":41,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":136,"endColumn":52},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":136,"column":53,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":136,"endColumn":55,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[3980,4028],"text":"(this.component.tusEndpoint ?? this.component.url)"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .url on an `any` value.","line":136,"column":71,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":136,"endColumn":74},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":136,"column":75,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":136,"endColumn":77,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[4029,4031],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":139,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":139,"endColumn":7},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":139,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":139,"endColumn":7},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":140,"column":5,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":140,"endColumn":15},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .init on an `any` value.","line":140,"column":11,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":140,"endColumn":15},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":144,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":144,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":147,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":147,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .url on an `any` value.","line":147,"column":32,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":147,"endColumn":35},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":147,"column":36,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":147,"endColumn":38,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[4300,4302],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .chunkSize on an `any` value.","line":148,"column":34,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":148,"endColumn":43},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":148,"column":44,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":148,"endColumn":46,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[4356,4358],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":159,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":159,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .token on an `any` value.","line":159,"column":33,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":159,"endColumn":38},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":159,"column":39,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":159,"endColumn":41,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[4672,4674],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .headers on an `any` value.","line":163,"column":24,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":163,"endColumn":31},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .headers on an `any` value.","line":164,"column":45,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":164,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":174,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":174,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .formId on an `any` value.","line":174,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":174,"endColumn":32},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":174,"column":33,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":174,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[4980,4982],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":175,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":175,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .submissionId on an `any` value.","line":175,"column":32,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":175,"endColumn":44},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":175,"column":45,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":175,"endColumn":47,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[5031,5033],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":176,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":176,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":176,"column":32,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":176,"endColumn":35},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":176,"column":36,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":176,"endColumn":38,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[5073,5075],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":180,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":180,"endColumn":9},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":180,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":180,"endColumn":9},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":181,"column":5,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":181,"endColumn":18},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":204,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":204,"endColumn":46},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":204,"column":25,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":204,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .attach on an `any` value.","line":204,"column":31,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":204,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileBrowse on an `any` value.","line":206,"column":19,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":206,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":207,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":207,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileBrowse on an `any` value.","line":207,"column":39,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":207,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .hiddenFileInputElement on an `any` value.","line":211,"column":23,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":211,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":212,"column":11,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":212,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .hiddenFileInputElement on an `any` value.","line":212,"column":21,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":212,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":217,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":217,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":220,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6207,6210],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6207,6210],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":224,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":224,"endColumn":62},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .parallelUploads on an `any` value.","line":224,"column":42,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":224,"endColumn":57},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":224,"column":58,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":224,"endColumn":60,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[6390,6392],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":240,"column":54,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":240,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[6989,6991],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":244,"column":13,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":244,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":248,"column":13,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":248,"endColumn":22},{"ruleId":"require-await","severity":2,"message":"Async method 'validateFile' has no 'await' expression.","line":265,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":265,"endColumn":29,"suggestions":[{"messageId":"removeAsync","fix":{"range":[7588,7594],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileMaxSize on an `any` value.","line":267,"column":55,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":267,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileMinSize on an `any` value.","line":268,"column":55,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":268,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileMaxSize on an `any` value.","line":273,"column":69,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":273,"endColumn":80},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileMinSize on an `any` value.","line":280,"column":71,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":280,"endColumn":82},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .filePattern on an `any` value.","line":285,"column":24,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":285,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .filePattern on an `any` value.","line":285,"column":54,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":285,"endColumn":65},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .filePattern on an `any` value.","line":286,"column":65,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":286,"endColumn":76},{"ruleId":"security/detect-non-literal-regexp","severity":2,"message":"Found non-literal argument to RegExp Constructor","line":293,"column":34,"nodeType":"NewExpression","endLine":293,"endColumn":72},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .filePattern on an `any` value.","line":301,"column":68,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":301,"endColumn":79},{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":319,"column":30,"nodeType":"Literal","endLine":319,"endColumn":63},{"ruleId":"unicorn/better-regex","severity":2,"message":"/^(\\d+(?:\\.\\d+)?)\\s*([KMGT]?B)$/i can be optimized to /^(\\d+(?:\\.\\d+)?)\\s*([gkmt]?b)$/i.","line":319,"column":30,"nodeType":"Literal","messageId":"better-regex","endLine":319,"endColumn":63,"fix":{"range":[9209,9242],"text":"/^(\\d+(?:\\.\\d+)?)\\s*([gkmt]?b)$/i"}},{"ruleId":"unicorn/prefer-number-properties","severity":2,"message":"Prefer `Number.parseFloat` over `parseFloat`.","line":322,"column":19,"nodeType":"Identifier","messageId":"error","endLine":322,"endColumn":29,"fix":{"range":[9293,9303],"text":"Number.parseFloat"}},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":325,"column":21,"nodeType":"MemberExpression","endLine":325,"endColumn":32},{"ruleId":"require-await","severity":2,"message":"Async method 'uploadFile' has no 'await' expression.","line":333,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":333,"endColumn":27,"suggestions":[{"messageId":"removeAsync","fix":{"range":[9575,9581],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"@typescript-eslint/no-misused-promises","severity":2,"message":"Promise returned in function argument where a void return was expected.","line":334,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"voidReturnArgument","endLine":437,"endColumn":6},{"ruleId":"no-async-promise-executor","severity":2,"message":"Promise executor functions should not be async.","line":334,"column":24,"nodeType":"Identifier","messageId":"async","endLine":334,"endColumn":29},{"ruleId":"prefer-promise-reject-errors","severity":2,"message":"Expected the Promise rejection reason to be an Error.","line":344,"column":9,"nodeType":"CallExpression","messageId":"rejectAnError","endLine":357,"endColumn":11},{"ruleId":"unicorn/prefer-number-properties","severity":2,"message":"Prefer `Number.parseFloat` over `parseFloat`.","line":393,"column":33,"nodeType":"Identifier","messageId":"error","endLine":393,"endColumn":43,"fix":{"range":[11694,11704],"text":"Number.parseFloat"}},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .multiple on an `any` value.","line":414,"column":30,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":414,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":415,"column":19,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":415,"endColumn":54},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":415,"column":49,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":415,"endColumn":51,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[12527,12529],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe spread of an `any` value in an array.","line":416,"column":61,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":416,"endColumn":76},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":422,"column":11,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":422,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":423,"column":11,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":423,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":436,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":436,"endColumn":16},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":440,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":440,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'requestAnimationFrame' is not defined.","line":444,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":444,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileProgress on an `any` value.","line":445,"column":23,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":445,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileProgress on an `any` value.","line":445,"column":49,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":445,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileProgress on an `any` value.","line":446,"column":41,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":446,"endColumn":53},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":448,"column":56,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":448,"endColumn":58,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[13612,13614],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":452,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":452,"endColumn":18},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":454,"column":35,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":454,"endColumn":37,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[13736,13738],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":462,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":462,"endColumn":14},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":462,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":462,"endColumn":14},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":464,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":464,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .abort on an `any` value.","line":464,"column":22,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":464,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":465,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":465,"endColumn":16},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":469,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":469,"endColumn":15},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":469,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":469,"endColumn":15},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":471,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":471,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .start on an `any` value.","line":471,"column":22,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":471,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":472,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":472,"endColumn":16},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":476,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":476,"endColumn":15},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":476,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":476,"endColumn":15},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":478,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":478,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .abort on an `any` value.","line":478,"column":22,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":478,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":481,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":481,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":489,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":489,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14408,14411],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14408,14411],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":493,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":493,"endColumn":11},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":493,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":493,"endColumn":11},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'value' should be typed with a non-any type.","line":493,"column":12,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":493,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":493,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":493,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14464,14467],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14464,14467],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":493,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":493,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14476,14479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14476,14479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":494,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":494,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":494,"column":21,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":494,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .setValue on an `any` value.","line":494,"column":27,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":494,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":496,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":496,"endColumn":18},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":497,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":497,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":499,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":499,"endColumn":20},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'value' should be typed with a non-any type.","line":502,"column":20,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":502,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":502,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":502,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14663,14666],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14663,14666],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":504,"column":33,"nodeType":"LogicalExpression","messageId":"unsafeReturn","endLine":504,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":504,"column":37,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":504,"endColumn":41},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":504,"column":42,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":504,"endColumn":44,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[14742,14761],"text":"(val.name ?? val.url)"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .url on an `any` value.","line":504,"column":49,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":504,"endColumn":52},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":504,"column":53,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":504,"endColumn":55,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[14762,14764],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":506,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":506,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":506,"column":19,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":506,"endColumn":23},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":506,"column":24,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":506,"endColumn":26,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[14798,14823],"text":"(value?.name ?? value?.url)"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .url on an `any` value.","line":506,"column":34,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":506,"endColumn":37},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":506,"column":38,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":506,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[14824,14826],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'value' should be typed with a non-any type.","line":509,"column":11,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":509,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":509,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":509,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14853,14856],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14853,14856],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .url on an `any` value.","line":516,"column":30,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":516,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":516,"column":85,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":516,"endColumn":89},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .url on an `any` value.","line":521,"column":30,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":521,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":521,"column":86,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":521,"endColumn":90}],"suppressedMessages":[],"errorCount":132,"fatalErrorCount":0,"warningCount":24,"fixableErrorCount":6,"fixableWarningCount":0,"source":"/**\n * TUS File Upload Component for Form.io\n *\n * Extends Form.io's base File component to provide TUS resumable upload capabilities\n */\n\nimport { Components } from '@formio/js';\nimport * as tus from 'tus-js-client';\nimport { ComponentSchema, TusConfig, UploadFile, UploadStatus } from '../../types';\nimport { verifyFileType, sanitizeFilename } from '../../validators';\nimport { logger } from '../../utils/logger';\n\nconst FileComponent = Components.components.file;\n\nexport default class TusFileUploadComponent extends FileComponent {\n  public tusUpload: any;\n  public currentFile: UploadFile | null = null;\n  private uploadQueue: File[] = [];\n  private isUploading = false;\n  // P1-T6: Progress throttling state (88% DOM reduction)\n  private rafPending = false;\n  // P3-T1: Cached TUS config (2-3ms saved per file)\n  private cachedTusConfig: Partial<tus.UploadOptions> | null = null;\n\n  static schema(...extend: any[]): ComponentSchema {\n    return FileComponent.schema({\n      type: 'tusupload',\n      label: 'TUS File Upload',\n      key: 'tusupload',\n      storage: 'tus',\n      url: '',\n      options: {\n        uploadOnly: false,\n      },\n      filePattern: '*',\n      fileMinSize: '0KB',\n      fileMaxSize: '1GB',\n      uploadOnly: false,\n      ...extend,\n    });\n  }\n\n  static get builderInfo() {\n    return {\n      title: 'TUS File Upload',\n      icon: 'cloud-upload',\n      group: 'premium',\n      documentation: '/userguide/forms/premium-components#file-upload',\n      weight: 100,\n      schema: TusFileUploadComponent.schema(),\n    };\n  }\n\n  static editForm() {\n    return FileComponent.editForm([\n      {\n        key: 'display',\n        components: [\n          {\n            key: 'displayBasic',\n            components: [\n              {\n                type: 'textfield',\n                key: 'tusEndpoint',\n                label: 'TUS Upload Endpoint',\n                placeholder: 'https://example.com/files',\n                weight: 25,\n                tooltip: 'The TUS server endpoint for resumable uploads',\n                input: true,\n              },\n              {\n                type: 'number',\n                key: 'chunkSize',\n                label: 'Chunk Size (MB)',\n                defaultValue: 8,\n                weight: 26,\n                tooltip: 'Size of each upload chunk in megabytes',\n                input: true,\n              },\n              {\n                type: 'checkbox',\n                key: 'resumable',\n                label: 'Enable Resumable Uploads',\n                defaultValue: true,\n                weight: 27,\n                tooltip: 'Allow uploads to resume after connection loss',\n                input: true,\n              },\n            ],\n          },\n        ],\n      },\n      {\n        key: 'validation',\n        components: [\n          {\n            key: 'validationBasic',\n            components: [\n              {\n                type: 'textfield',\n                key: 'filePattern',\n                label: 'File Pattern',\n                placeholder: '*.pdf,*.doc,*.docx',\n                weight: 10,\n                tooltip: 'Allowed file extensions',\n                input: true,\n              },\n              {\n                type: 'textfield',\n                key: 'fileMinSize',\n                label: 'Minimum File Size',\n                placeholder: '1KB',\n                weight: 11,\n                tooltip: 'Minimum allowed file size',\n                input: true,\n              },\n              {\n                type: 'textfield',\n                key: 'fileMaxSize',\n                label: 'Maximum File Size',\n                placeholder: '10MB',\n                weight: 12,\n                tooltip: 'Maximum allowed file size',\n                input: true,\n              },\n            ],\n          },\n        ],\n      },\n    ]);\n  }\n\n  constructor(component: any, options: any, data: any) {\n    super(component, options, data);\n    this.component.storage = 'tus';\n    this.component.url = this.component.tusEndpoint || this.component.url || '/files';\n  }\n\n  init() {\n    super.init();\n    this.initializeTusClient();\n  }\n\n  private initializeTusClient() {\n    // P3-T1: Cache TUS config to avoid recreating for every file (2-3ms per file saved)\n    this.cachedTusConfig = {\n      endpoint: this.component.url || '/files',\n      chunkSize: (this.component.chunkSize || 8) * 1024 * 1024,\n      retryDelays: [0, 3000, 5000, 10000, 20000],\n      headers: this.getHeaders(),\n    };\n\n    // Will be initialized per upload\n    this.tusUpload = null;\n  }\n\n  private getHeaders(): Record<string, string> {\n    const headers: Record<string, string> = {\n      'x-jwt-token': this.root?.token || '',\n    };\n\n    // Add custom headers if provided\n    if (this.component.headers) {\n      Object.assign(headers, this.component.headers);\n    }\n\n    return headers;\n  }\n\n  private getMetadata(): Record<string, string> {\n    return {\n      filename: '',\n      filetype: '',\n      formId: this.root?.formId || '',\n      submissionId: this.root?.submissionId || '',\n      fieldKey: this.component.key || '',\n    };\n  }\n\n  attach(element: HTMLElement) {\n    this.loadRefs(element, {\n      fileDrop: 'single',\n      fileBrowse: 'single',\n      galleryButton: 'single',\n      cameraButton: 'single',\n      fileUpload: 'single',\n      hiddenFileInputElement: 'single',\n      fileList: 'single',\n      camera: 'single',\n      canvas: 'single',\n      fileStatusUploading: 'multiple',\n      fileImage: 'multiple',\n      fileError: 'multiple',\n      fileLink: 'multiple',\n      removeLink: 'multiple',\n      fileStatusRemove: 'multiple',\n      fileSize: 'multiple',\n      fileUploadingStatus: 'multiple',\n      fileProcessingStatus: 'multiple',\n      fileProgress: 'multiple',\n      fileProgressInner: 'multiple',\n    });\n\n    const superAttach = super.attach(element);\n\n    if (this.refs.fileBrowse) {\n      this.addEventListener(this.refs.fileBrowse, 'click', (event: Event) => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (this.refs.hiddenFileInputElement) {\n          this.refs.hiddenFileInputElement.click();\n        }\n      });\n    }\n\n    return superAttach;\n  }\n\n  async upload(files: File[]): Promise<any[]> {\n    this.uploadQueue = files;\n\n    // P1-T4: Parallel uploads with batching (66% faster - 300s -> 100s for 10 files)\n    const parallelLimit = this.component.parallelUploads || 3;\n    const results = [];\n\n    // Process files in batches of parallelLimit\n    for (let i = 0; i < files.length; i += parallelLimit) {\n      const batch = files.slice(i, i + parallelLimit);\n\n      // Upload batch in parallel using Promise.all\n      const batchResults = await Promise.all(\n        batch.map(async (file) => {\n          this.isUploading = true;\n\n          try {\n            // Security: Validate file before upload\n            const validationResult = await this.validateFile(file);\n            if (!validationResult.valid) {\n              throw new Error(validationResult.error || 'File validation failed');\n            }\n\n            const result = await this.uploadFile(file);\n            this.emit('fileUploadComplete', result);\n            return result;\n          } catch (error) {\n            logger.error('[TUS] Upload error:', { error });\n            this.emit('fileUploadError', error);\n            return { error };\n          }\n        })\n      );\n\n      results.push(...batchResults);\n    }\n\n    this.isUploading = false;\n\n    // P1-T3: Clear upload queue to prevent memory leaks (45% memory reduction)\n    this.uploadQueue = [];\n\n    return results;\n  }\n\n  private async validateFile(file: File): Promise<{ valid: boolean; error?: string }> {\n    // File size validation\n    const maxSize = this.parseFileSize(this.component.fileMaxSize);\n    const minSize = this.parseFileSize(this.component.fileMinSize);\n\n    if (maxSize && file.size > maxSize) {\n      return {\n        valid: false,\n        error: `File size exceeds maximum allowed (${this.component.fileMaxSize})`,\n      };\n    }\n\n    if (minSize && file.size < minSize) {\n      return {\n        valid: false,\n        error: `File size is below minimum required (${this.component.fileMinSize})`,\n      };\n    }\n\n    // File type validation\n    if (this.component.filePattern && this.component.filePattern !== '*') {\n      const allowedTypes = this.parseFilePattern(this.component.filePattern);\n      const fileExt = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n      const isAllowed = allowedTypes.some((pattern) => {\n        if (pattern.startsWith('.')) {\n          return fileExt === pattern;\n        }\n        if (pattern.includes('/')) {\n          return file.type.match(new RegExp(pattern.replace('*', '.*')));\n        }\n        return false;\n      });\n\n      if (!isAllowed) {\n        return {\n          valid: false,\n          error: `File type not allowed. Allowed: ${this.component.filePattern}`,\n        };\n      }\n    }\n\n    return { valid: true };\n  }\n\n  private parseFileSize(size?: string): number | null {\n    if (!size) return null;\n\n    const units: Record<string, number> = {\n      B: 1,\n      KB: 1024,\n      MB: 1024 * 1024,\n      GB: 1024 * 1024 * 1024,\n    };\n\n    const match = size.match(/^(\\d+(?:\\.\\d+)?)\\s*([KMGT]?B)$/i);\n    if (!match) return null;\n\n    const value = parseFloat(match[1]);\n    const unit = match[2].toUpperCase();\n\n    return value * (units[unit] || 1);\n  }\n\n  private parseFilePattern(pattern: string): string[] {\n    if (!pattern || pattern === '*') return ['*'];\n    return pattern.split(',').map((p) => p.trim());\n  }\n\n  private async uploadFile(file: File): Promise<UploadFile> {\n    return new Promise(async (resolve, reject) => {\n      // Security: Sanitize filename to prevent path traversal and XSS\n      const safeName = sanitizeFilename(file.name, {\n        addTimestamp: true,\n        preserveExtension: false,\n      });\n\n      // Security: Verify file type matches content (magic number check)\n      const isValidType = await verifyFileType(file, file.type);\n      if (!isValidType) {\n        reject({\n          id: this.generateFileId(),\n          name: safeName,\n          size: file.size,\n          type: file.type,\n          storage: 'tus',\n          status: UploadStatus.FAILED,\n          error: {\n            code: 'INVALID_FILE_TYPE',\n            message: 'File content does not match declared type. This file may be dangerous.',\n          },\n          createdAt: new Date(),\n          updatedAt: new Date(),\n        });\n        return;\n      }\n\n      const uploadFile: UploadFile = {\n        id: this.generateFileId(),\n        name: safeName,\n        originalName: file.name,\n        size: file.size,\n        type: file.type,\n        storage: 'tus',\n        status: UploadStatus.PENDING,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      };\n\n      // P3-T1: Use cached config to avoid object recreation (2-3ms saved per file)\n      const upload = new tus.Upload(file, {\n        ...this.cachedTusConfig,\n        metadata: {\n          ...this.getMetadata(),\n          filename: safeName,\n          originalFilename: file.name,\n          filetype: file.type || 'application/octet-stream',\n        },\n        onError: (error: Error) => {\n          logger.error('[TUS] Upload failed:', { error: error.message, stack: error.stack });\n          uploadFile.status = UploadStatus.FAILED;\n          uploadFile.error = {\n            code: 'UPLOAD_ERROR',\n            message: error.message,\n          };\n          reject(uploadFile);\n        },\n        onProgress: (bytesUploaded: number, bytesTotal: number) => {\n          const percentage = ((bytesUploaded / bytesTotal) * 100).toFixed(2);\n          uploadFile.progress = parseFloat(percentage);\n          uploadFile.status = UploadStatus.UPLOADING;\n          this.updateProgress(uploadFile);\n        },\n        onSuccess: () => {\n          uploadFile.status = UploadStatus.COMPLETED;\n          uploadFile.url = upload.url ?? undefined;\n          uploadFile.uploadId = upload.url?.split('/').pop();\n\n          // Create Form.io compatible file data\n          const fileData = {\n            name: uploadFile.name,\n            size: uploadFile.size,\n            type: uploadFile.type,\n            url: uploadFile.url,\n            storage: 'tus',\n            originalName: file.name,\n            uploadId: uploadFile.uploadId,\n          };\n\n          // Update Form.io component value (handle single vs multiple files)\n          if (this.component.multiple) {\n            const currentValue = this.dataValue || [];\n            this.dataValue = Array.isArray(currentValue) ? [...currentValue, fileData] : [fileData];\n          } else {\n            this.dataValue = fileData;\n          }\n\n          // Trigger Form.io updates to propagate value to form submission\n          this.updateValue();\n          this.triggerChange();\n\n          this.updateProgress(uploadFile);\n          resolve(uploadFile);\n        },\n      });\n\n      // Store reference for pause/resume\n      this.tusUpload = upload;\n      this.currentFile = uploadFile;\n\n      // Start upload\n      upload.start();\n      this.emit('fileUploadStart', uploadFile);\n    });\n  }\n\n  private updateProgress(file: UploadFile) {\n    // P1-T6: Throttle DOM updates using requestAnimationFrame (88% reflow reduction)\n    if (!this.rafPending) {\n      this.rafPending = true;\n      requestAnimationFrame(() => {\n        if (this.refs.fileProgress && this.refs.fileProgress.length > 0) {\n          const progressBar = this.refs.fileProgress[0] as HTMLElement;\n          if (progressBar) {\n            progressBar.style.width = `${file.progress || 0}%`;\n          }\n        }\n\n        this.emit('fileUploadProgress', {\n          file,\n          progress: file.progress || 0,\n        });\n\n        this.rafPending = false;\n      });\n    }\n  }\n\n  pauseUpload() {\n    if (this.tusUpload) {\n      this.tusUpload.abort();\n      this.emit('fileUploadPaused', this.currentFile);\n    }\n  }\n\n  resumeUpload() {\n    if (this.tusUpload) {\n      this.tusUpload.start();\n      this.emit('fileUploadResumed', this.currentFile);\n    }\n  }\n\n  cancelUpload() {\n    if (this.tusUpload) {\n      this.tusUpload.abort();\n      this.tusUpload = null;\n      this.currentFile = null;\n      this.emit('fileUploadCancelled');\n    }\n  }\n\n  private generateFileId(): string {\n    return `tus_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  getValue(): any {\n    return this.dataValue;\n  }\n\n  setValue(value: any, flags: any = {}) {\n    const changed = super.setValue(value, flags);\n    if (changed) {\n      this.redraw();\n      this.triggerChange();\n    }\n    return changed;\n  }\n\n  getValueAsString(value: any): string {\n    if (Array.isArray(value)) {\n      return value.map((val) => val.name || val.url || '').join(', ');\n    }\n    return value?.name || value?.url || '';\n  }\n\n  getView(value: any): string {\n    if (!value) return '';\n\n    if (Array.isArray(value)) {\n      return value\n        .map(\n          (file) =>\n            `<a href=\"${file.url}\" target=\"_blank\" rel=\"noopener noreferrer\">${file.name}</a>`\n        )\n        .join('<br>');\n    }\n\n    return `<a href=\"${value.url}\" target=\"_blank\" rel=\"noopener noreferrer\">${value.name}</a>`;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/components/TusFileUpload/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/components/UppyFileUpload/Component.ts","messages":[{"ruleId":"import/order","severity":2,"message":"`@uppy/golden-retriever` import should occur before import of `@uppy/tus`","line":11,"column":1,"nodeType":"ImportDeclaration","endLine":11,"endColumn":54,"fix":{"range":[233,316],"text":"import GoldenRetriever from '@uppy/golden-retriever';\nimport Tus from '@uppy/tus';\n"}},{"ruleId":"import/order","severity":2,"message":"`@uppy/screen-capture` import should occur before import of `@uppy/tus`","line":13,"column":1,"nodeType":"ImportDeclaration","endLine":13,"endColumn":50,"fix":{"range":[233,401],"text":"import ScreenCapture from '@uppy/screen-capture';\nimport Tus from '@uppy/tus';\nimport GoldenRetriever from '@uppy/golden-retriever';\nimport Webcam from '@uppy/webcam';\n"}},{"ruleId":"import/order","severity":2,"message":"`@uppy/image-editor` import should occur before import of `@uppy/tus`","line":14,"column":1,"nodeType":"ImportDeclaration","endLine":14,"endColumn":46,"fix":{"range":[233,447],"text":"import ImageEditor from '@uppy/image-editor';\nimport Tus from '@uppy/tus';\nimport GoldenRetriever from '@uppy/golden-retriever';\nimport Webcam from '@uppy/webcam';\nimport ScreenCapture from '@uppy/screen-capture';\n"}},{"ruleId":"import/order","severity":2,"message":"`@uppy/audio` import should occur before import of `@uppy/core`","line":15,"column":1,"nodeType":"ImportDeclaration","endLine":15,"endColumn":33,"fix":{"range":[161,480],"text":"import Audio from '@uppy/audio';\nimport Uppy from '@uppy/core';\nimport Dashboard from '@uppy/dashboard';\nimport Tus from '@uppy/tus';\nimport GoldenRetriever from '@uppy/golden-retriever';\nimport Webcam from '@uppy/webcam';\nimport ScreenCapture from '@uppy/screen-capture';\nimport ImageEditor from '@uppy/image-editor';\n"}},{"ruleId":"import/order","severity":2,"message":"There should be at least one empty line between import groups","line":16,"column":1,"nodeType":"ImportDeclaration","endLine":16,"endColumn":29,"fix":{"range":[508,508],"text":"\n"}},{"ruleId":"import/order","severity":2,"message":"`@uppy/url` import should occur before import of `@uppy/webcam`","line":16,"column":1,"nodeType":"ImportDeclaration","endLine":16,"endColumn":29,"fix":{"range":[316,509],"text":"import Url from '@uppy/url';\nimport Webcam from '@uppy/webcam';\nimport ScreenCapture from '@uppy/screen-capture';\nimport ImageEditor from '@uppy/image-editor';\nimport Audio from '@uppy/audio';\n"}},{"ruleId":"@typescript-eslint/consistent-type-imports","severity":2,"message":"Imports \"ComponentSchema\", \"UppyConfig\" and \"UploadFile\" are only used as type.","line":17,"column":1,"nodeType":"ImportDeclaration","messageId":"someImportsAreOnlyTypes","endLine":17,"endColumn":85,"fix":{"range":[518,557],"text":"type ComponentSchema, type UppyConfig, type UploadFile"}},{"ruleId":"import/order","severity":2,"message":"`../../utils/logger` import should occur before import of `../../validators`","line":19,"column":1,"nodeType":"ImportDeclaration","endLine":19,"endColumn":45,"fix":{"range":[594,708],"text":"import { logger } from '../../utils/logger';\nimport { verifyFileType, sanitizeFilename } from '../../validators';\n"}},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":25,"column":7,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":25,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .file on an `any` value.","line":25,"column":45,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":25,"endColumn":49},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1099,1102],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1099,1102],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1199,1202],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1199,1202],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1214,1217],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1214,1217],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1267,1270],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1267,1270],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1282,1285],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1282,1285],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1333,1336],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1333,1336],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1345,1348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1345,1348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1395,1398],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1395,1398],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1441,1444],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1441,1444],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1523,1526],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1523,1526],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":41,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":62,"endColumn":8},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":41,"column":12,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":41,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .schema on an `any` value.","line":41,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":41,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":65,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":65,"endColumn":25},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":65,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":65,"endColumn":25},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":76,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":76,"endColumn":18},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":76,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":76,"endColumn":18},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":77,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":166,"endColumn":8},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":77,"column":12,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":77,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .editForm on an `any` value.","line":77,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":77,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'component' should be typed with a non-any type.","line":169,"column":15,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":169,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":169,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5383,5386],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5383,5386],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'options' should be typed with a non-any type.","line":169,"column":31,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":169,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":169,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5397,5400],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5397,5400],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'data' should be typed with a non-any type.","line":169,"column":45,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":169,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":169,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5408,5411],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5408,5411],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":170,"column":5,"nodeType":"Super","messageId":"unsafeCall","endLine":170,"endColumn":10},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":171,"column":5,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":171,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .storage on an `any` value.","line":171,"column":20,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":171,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .storage on an `any` value.","line":171,"column":45,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":171,"endColumn":52},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":171,"column":53,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":171,"endColumn":55,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[5504,5506],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":174,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":174,"endColumn":7},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":174,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":174,"endColumn":7},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":175,"column":5,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":175,"endColumn":15},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .init on an `any` value.","line":175,"column":11,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":175,"endColumn":15},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":178,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":178,"endColumn":9},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":178,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":178,"endColumn":9},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":179,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":179,"endColumn":46},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":179,"column":25,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":179,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .attach on an `any` value.","line":179,"column":31,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":179,"endColumn":37},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":186,"column":72,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":186,"endColumn":74,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[5908,5910],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":192,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":192,"endColumn":24},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":195,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":195,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":197,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":197,"endColumn":68},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .uppyOptions on an `any` value.","line":197,"column":35,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":197,"endColumn":46},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":197,"column":60,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":197,"endColumn":62,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[6177,6179],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .uppyOptions on an `any` value.","line":198,"column":50,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":198,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileMaxSize on an `any` value.","line":200,"column":56,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":200,"endColumn":67},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileMinSize on an `any` value.","line":201,"column":56,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":201,"endColumn":67},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .multiple on an `any` value.","line":202,"column":42,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":202,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .filePattern on an `any` value.","line":203,"column":64,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":203,"endColumn":75},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":206,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":206,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .formId on an `any` value.","line":206,"column":28,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":206,"endColumn":34},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":206,"column":35,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":206,"endColumn":37,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[6680,6682],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":207,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":207,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .submissionId on an `any` value.","line":207,"column":34,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":207,"endColumn":46},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":207,"column":47,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":207,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[6733,6735],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":208,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":208,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .key on an `any` value.","line":208,"column":34,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":208,"endColumn":37},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":208,"column":38,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":208,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[6777,6779],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":2,"message":"Forbidden non-null assertion.","line":224,"column":15,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":224,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .uppyOptions on an `any` value.","line":225,"column":30,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":225,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":226,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":226,"endColumn":56},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .uppyOptions on an `any` value.","line":226,"column":30,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":226,"endColumn":41},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":226,"column":50,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":226,"endColumn":52,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[7314,7316],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .uppyOptions on an `any` value.","line":228,"column":43,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":228,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .uppyOptions on an `any` value.","line":229,"column":50,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":229,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":237,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":237,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .description on an `any` value.","line":237,"column":28,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":237,"endColumn":39},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":237,"column":40,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":237,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[7824,7826],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":248,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":248,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .url on an `any` value.","line":248,"column":32,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":248,"endColumn":35},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":248,"column":36,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":248,"endColumn":38,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[8165,8167],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .chunkSize on an `any` value.","line":249,"column":34,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":249,"endColumn":43},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":249,"column":44,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":249,"endColumn":46,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[8221,8223],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":260,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":260,"endColumn":62},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .uppyOptions on an `any` value.","line":260,"column":36,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":260,"endColumn":47},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":260,"column":57,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":260,"endColumn":59,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[8587,8589],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":262,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":262,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .includes on an `any` value.","line":262,"column":17,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":262,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":263,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":263,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":263,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":263,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8653,8656],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8653,8656],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .use on an `any` value.","line":263,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":263,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":266,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":266,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .includes on an `any` value.","line":266,"column":17,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":266,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":267,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":267,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":267,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":267,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8766,8769],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8766,8769],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .use on an `any` value.","line":267,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":267,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":270,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":270,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .includes on an `any` value.","line":270,"column":17,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":270,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":271,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":271,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":271,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":271,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8884,8887],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8884,8887],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .use on an `any` value.","line":271,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":271,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":274,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":274,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .includes on an `any` value.","line":274,"column":17,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":274,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":275,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":275,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":275,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8994,8997],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8994,8997],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .use on an `any` value.","line":275,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":275,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":278,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":278,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .includes on an `any` value.","line":278,"column":17,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":278,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":279,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":279,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":279,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":279,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9096,9099],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9096,9099],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .use on an `any` value.","line":279,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":279,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":281,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":281,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .companionUrl on an `any` value.","line":281,"column":38,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":281,"endColumn":50},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":281,"column":51,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":281,"endColumn":53,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[9189,9191],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":289,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":289,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":292,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":292,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9390,9393],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9390,9393],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":294,"column":46,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":294,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .data on an `any` value.","line":300,"column":53,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":300,"endColumn":57},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .type on an `any` value.","line":300,"column":64,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":300,"endColumn":68},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":302,"column":77,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":302,"endColumn":81},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":304,"column":35,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":304,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .id on an `any` value.","line":308,"column":36,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":308,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .id on an `any` value.","line":313,"column":35,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":313,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":315,"column":28,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":315,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":318,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":318,"endColumn":16},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":322,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":322,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":325,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":325,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10297,10300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10297,10300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":325,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":325,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10312,10315],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10312,10315],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":326,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":326,"endColumn":16},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":326,"column":37,"nodeType":"Property","messageId":"anyAssignment","endLine":326,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":326,"column":43,"nodeType":"Property","messageId":"anyAssignment","endLine":326,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":329,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":329,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10423,10426],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10423,10426],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":329,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":329,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10438,10441],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10438,10441],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":331,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":331,"endColumn":20},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .id on an `any` value.","line":331,"column":18,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":331,"endColumn":20},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":332,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":332,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":332,"column":20,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":332,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":333,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":333,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .size on an `any` value.","line":333,"column":20,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":333,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":334,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":334,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .type on an `any` value.","line":334,"column":20,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":334,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":335,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":335,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .uploadURL on an `any` value.","line":335,"column":23,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":335,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":336,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":336,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .storage on an `any` value.","line":336,"column":33,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":336,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":343,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":343,"endColumn":49},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":343,"column":44,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":343,"endColumn":46,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[10844,10846],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .multiple on an `any` value.","line":344,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":344,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe spread of an `any` value in an array.","line":345,"column":24,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":345,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":350,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":350,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":353,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":353,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11091,11094],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11091,11094],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":353,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":353,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11103,11106],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11103,11106],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":354,"column":46,"nodeType":"Property","messageId":"anyAssignment","endLine":354,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":354,"column":62,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":354,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":354,"column":68,"nodeType":"Property","messageId":"anyAssignment","endLine":354,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":355,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":355,"endColumn":16},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":355,"column":34,"nodeType":"Property","messageId":"anyAssignment","endLine":355,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":355,"column":40,"nodeType":"Property","messageId":"anyAssignment","endLine":355,"endColumn":45},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":358,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":358,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11282,11285],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11282,11285],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .successful on an `any` value.","line":360,"column":18,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":360,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .failed on an `any` value.","line":360,"column":50,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":360,"endColumn":56},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":2,"message":"Forbidden non-null assertion.","line":361,"column":24,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":361,"endColumn":34,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[11512,11513],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]},{"ruleId":"no-undef","severity":2,"message":"'localStorage' is not defined.","line":363,"column":11,"nodeType":"Identifier","messageId":"undef","endLine":363,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":369,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":369,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":372,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":372,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11793,11796],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11793,11796],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":373,"column":39,"nodeType":"Property","messageId":"anyAssignment","endLine":373,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":374,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":374,"endColumn":16},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":378,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":378,"endColumn":16},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":381,"column":18,"nodeType":"Literal","endLine":381,"endColumn":30},{"ruleId":"@typescript-eslint/no-misused-promises","severity":2,"message":"Promise returned in function argument where a void return was expected.","line":381,"column":32,"nodeType":"MemberExpression","messageId":"voidReturnArgument","endLine":381,"endColumn":52},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":383,"column":18,"nodeType":"Literal","endLine":383,"endColumn":35},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":384,"column":18,"nodeType":"Literal","endLine":384,"endColumn":34},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":385,"column":18,"nodeType":"Literal","endLine":385,"endColumn":32},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 3 times.","line":388,"column":18,"nodeType":"Literal","endLine":388,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .token on an `any` value.","line":393,"column":43,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":393,"endColumn":48},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":393,"column":49,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":393,"endColumn":51,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[12521,12523],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":394,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":394,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .token on an `any` value.","line":394,"column":33,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":394,"endColumn":38},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":394,"column":39,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":394,"endColumn":41,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[12568,12570],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":408,"column":30,"nodeType":"Literal","endLine":408,"endColumn":63},{"ruleId":"unicorn/better-regex","severity":2,"message":"/^(\\d+(?:\\.\\d+)?)\\s*([KMGT]?B)$/i can be optimized to /^(\\d+(?:\\.\\d+)?)\\s*([gkmt]?b)$/i.","line":408,"column":30,"nodeType":"Literal","messageId":"better-regex","endLine":408,"endColumn":63,"fix":{"range":[12833,12866],"text":"/^(\\d+(?:\\.\\d+)?)\\s*([gkmt]?b)$/i"}},{"ruleId":"unicorn/prefer-number-properties","severity":2,"message":"Prefer `Number.parseFloat` over `parseFloat`.","line":411,"column":19,"nodeType":"Identifier","messageId":"error","endLine":411,"endColumn":29,"fix":{"range":[12917,12927],"text":"Number.parseFloat"}},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":414,"column":21,"nodeType":"MemberExpression","endLine":414,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":429,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":429,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13352,13355],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13352,13355],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":433,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":433,"endColumn":11},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":433,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":433,"endColumn":11},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'value' should be typed with a non-any type.","line":433,"column":12,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":433,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":433,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":433,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13408,13411],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13408,13411],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":434,"column":5,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":434,"endColumn":27},{"ruleId":"sonarjs/cognitive-complexity","severity":2,"message":"Refactor this function to reduce its Cognitive Complexity from 17 to the 15 allowed.","line":437,"column":3,"nodeType":null,"messageId":"refactorFunction","endLine":437,"endColumn":9},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":437,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":437,"endColumn":9},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":437,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":437,"endColumn":9},{"ruleId":"@typescript-eslint/no-misused-promises","severity":2,"message":"Promise returned in function argument where a void return was expected.","line":440,"column":61,"nodeType":"MemberExpression","messageId":"voidReturnArgument","endLine":440,"endColumn":81},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":452,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":452,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":452,"column":12,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":452,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .detach on an `any` value.","line":452,"column":18,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":452,"endColumn":24},{"ruleId":"sonarjs/cognitive-complexity","severity":2,"message":"Refactor this function to reduce its Cognitive Complexity from 17 to the 15 allowed.","line":455,"column":3,"nodeType":null,"messageId":"refactorFunction","endLine":455,"endColumn":10},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":455,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":455,"endColumn":10},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":455,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":455,"endColumn":10},{"ruleId":"@typescript-eslint/no-misused-promises","severity":2,"message":"Promise returned in function argument where a void return was expected.","line":458,"column":61,"nodeType":"MemberExpression","messageId":"voidReturnArgument","endLine":458,"endColumn":81},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":470,"column":5,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":470,"endColumn":18},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .destroy on an `any` value.","line":470,"column":11,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":470,"endColumn":18}],"suppressedMessages":[],"errorCount":179,"fatalErrorCount":0,"warningCount":25,"fixableErrorCount":10,"fixableWarningCount":0,"source":"/**\n * Uppy File Upload Component for Form.io\n *\n * Provides a rich file upload experience using Uppy.js Dashboard\n */\n\nimport { Components } from '@formio/js';\nimport Uppy from '@uppy/core';\nimport Dashboard from '@uppy/dashboard';\nimport Tus from '@uppy/tus';\nimport GoldenRetriever from '@uppy/golden-retriever';\nimport Webcam from '@uppy/webcam';\nimport ScreenCapture from '@uppy/screen-capture';\nimport ImageEditor from '@uppy/image-editor';\nimport Audio from '@uppy/audio';\nimport Url from '@uppy/url';\nimport { ComponentSchema, UppyConfig, UploadFile, UploadStatus } from '../../types';\nimport { verifyFileType, sanitizeFilename } from '../../validators';\nimport { logger } from '../../utils/logger';\n\n// Import Uppy styles\n// NOTE: Uppy CSS imports removed - consuming apps must import Uppy styles\n// See documentation for required CSS imports\n\nconst FileComponent = Components.components.file;\n\nexport default class UppyFileUploadComponent extends FileComponent {\n  public uppy: Uppy | null = null;\n  private dashboardElement: HTMLElement | null = null;\n\n  private handleFileAdded?: (file: any) => Promise<void>;\n  private handleUpload?: () => void;\n  private handleUploadProgress?: (file: any, progress: any) => void;\n  private handleUploadSuccess?: (file: any, response: any) => void;\n  private handleUploadError?: (file: any, error: any) => void;\n  private handleComplete?: (result: any) => void;\n  private handleError?: (error: any) => void;\n  private handleCancelAll?: () => void;\n\n  static schema(...extend: any[]): ComponentSchema {\n    return FileComponent.schema({\n      type: 'uppyupload',\n      label: 'Uppy File Upload',\n      key: 'uppyupload',\n      storage: 'url',\n      url: '',\n      options: {\n        uploadOnly: false,\n      },\n      filePattern: '*',\n      fileMinSize: '0KB',\n      fileMaxSize: '1GB',\n      uppyOptions: {\n        inline: true,\n        height: 450,\n        showProgressDetails: true,\n        showLinkToFileUploadResult: true,\n        proudlyDisplayPoweredByUppy: false,\n        plugins: ['Webcam', 'ScreenCapture', 'ImageEditor', 'Audio', 'Url'],\n      },\n      ...extend,\n    });\n  }\n\n  static get builderInfo() {\n    return {\n      title: 'Uppy File Upload',\n      icon: 'cloud-upload-alt',\n      group: 'premium',\n      documentation: '/userguide/forms/premium-components#uppy-file-upload',\n      weight: 101,\n      schema: UppyFileUploadComponent.schema(),\n    };\n  }\n\n  static editForm() {\n    return FileComponent.editForm([\n      {\n        key: 'display',\n        components: [\n          {\n            key: 'displayBasic',\n            components: [\n              {\n                type: 'checkbox',\n                key: 'uppyOptions.inline',\n                label: 'Inline Dashboard',\n                defaultValue: true,\n                weight: 25,\n                tooltip: 'Show dashboard inline vs modal',\n                input: true,\n              },\n              {\n                type: 'number',\n                key: 'uppyOptions.height',\n                label: 'Dashboard Height',\n                defaultValue: 450,\n                weight: 26,\n                conditional: {\n                  json: {\n                    '===': [{ var: 'data.uppyOptions.inline' }, true],\n                  },\n                },\n                input: true,\n              },\n              {\n                type: 'checkbox',\n                key: 'uppyOptions.showProgressDetails',\n                label: 'Show Progress Details',\n                defaultValue: true,\n                weight: 27,\n                input: true,\n              },\n              {\n                type: 'checkbox',\n                key: 'uppyOptions.autoProceed',\n                label: 'Auto Proceed',\n                defaultValue: false,\n                weight: 28,\n                tooltip: 'Automatically start upload after adding files',\n                input: true,\n              },\n              {\n                type: 'checkbox',\n                key: 'uppyOptions.allowMultipleUploadBatches',\n                label: 'Allow Multiple Upload Batches',\n                defaultValue: true,\n                weight: 29,\n                input: true,\n              },\n            ],\n          },\n        ],\n      },\n      {\n        key: 'data',\n        components: [\n          {\n            key: 'dataBasic',\n            components: [\n              {\n                type: 'select',\n                key: 'uppyOptions.plugins',\n                label: 'Enabled Plugins',\n                multiple: true,\n                weight: 30,\n                data: {\n                  values: [\n                    { label: 'Webcam', value: 'Webcam' },\n                    { label: 'Screen Capture', value: 'ScreenCapture' },\n                    { label: 'Image Editor', value: 'ImageEditor' },\n                    { label: 'Audio Recording', value: 'Audio' },\n                    { label: 'Import from URL', value: 'Url' },\n                    { label: 'Google Drive', value: 'GoogleDrive' },\n                    { label: 'Dropbox', value: 'Dropbox' },\n                    { label: 'Instagram', value: 'Instagram' },\n                  ],\n                },\n                defaultValue: ['Webcam', 'ScreenCapture', 'ImageEditor', 'Audio', 'Url'],\n                input: true,\n              },\n            ],\n          },\n        ],\n      },\n    ]);\n  }\n\n  constructor(component: any, options: any, data: any) {\n    super(component, options, data);\n    this.component.storage = this.component.storage || 'url';\n  }\n\n  init() {\n    super.init();\n  }\n\n  attach(element: HTMLElement) {\n    const superAttach = super.attach(element);\n\n    // Create container for Uppy Dashboard\n    this.dashboardElement = document.createElement('div');\n    this.dashboardElement.className = 'uppy-dashboard-container';\n\n    // Find or create upload area\n    const uploadArea = element.querySelector('.formio-component-file') || element;\n    uploadArea.appendChild(this.dashboardElement);\n\n    // Initialize Uppy\n    this.initializeUppy();\n\n    return superAttach;\n  }\n\n  private initializeUppy() {\n    const uppyConfig: UppyConfig = {\n      autoProceed: this.component.uppyOptions?.autoProceed || false,\n      allowMultipleUploadBatches: this.component.uppyOptions?.allowMultipleUploadBatches !== false,\n      restrictions: {\n        maxFileSize: this.parseFileSize(this.component.fileMaxSize) ?? undefined,\n        minFileSize: this.parseFileSize(this.component.fileMinSize) ?? undefined,\n        maxNumberOfFiles: this.component.multiple ? 10 : 1,\n        allowedFileTypes: this.parseFilePattern(this.component.filePattern) ?? undefined,\n      },\n      meta: {\n        formId: this.root?.formId || '',\n        submissionId: this.root?.submissionId || '',\n        fieldKey: this.component.key || '',\n      },\n    };\n\n    // Initialize Uppy instance\n    this.uppy = new Uppy({\n      id: `uppy_${this.id}`,\n      debug: false,\n      autoProceed: uppyConfig.autoProceed,\n      allowMultipleUploadBatches: uppyConfig.allowMultipleUploadBatches,\n      restrictions: uppyConfig.restrictions,\n      meta: uppyConfig.meta,\n    });\n\n    // Add Dashboard plugin\n    this.uppy.use(Dashboard, {\n      target: this.dashboardElement!,\n      inline: this.component.uppyOptions?.inline !== false,\n      height: this.component.uppyOptions?.height || 450,\n      width: '100%',\n      hideProgressDetails: this.component.uppyOptions?.showProgressDetails === false,\n      showLinkToFileUploadResult: this.component.uppyOptions?.showLinkToFileUploadResult !== false,\n      proudlyDisplayPoweredByUppy: false,\n      hideUploadButton: uppyConfig.autoProceed,\n      hideRetryButton: false,\n      hidePauseResumeButton: false,\n      hideCancelButton: false,\n      hideProgressAfterFinish: false,\n      doneButtonHandler: null,\n      note: this.component.description || null,\n      closeModalOnClickOutside: true,\n      closeAfterFinish: false,\n      disableThumbnailGenerator: false,\n      disablePageScrollWhenModalOpen: true,\n      animateOpenClose: true,\n      browserBackButtonClose: true,\n    });\n\n    // Add TUS plugin for resumable uploads\n    this.uppy.use(Tus, {\n      endpoint: this.component.url || '/files',\n      chunkSize: (this.component.chunkSize || 8) * 1024 * 1024,\n      retryDelays: [0, 3000, 5000, 10000, 20000],\n      headers: this.getHeaders(),\n    });\n\n    // Add Golden Retriever for recovering uploads after browser crash\n    this.uppy.use(GoldenRetriever, {\n      serviceWorker: false,\n    });\n\n    // Add optional plugins based on configuration\n    const plugins = this.component.uppyOptions?.plugins || [];\n\n    if (plugins.includes('Webcam')) {\n      (this.uppy as any).use(Webcam, { target: Dashboard });\n    }\n\n    if (plugins.includes('ScreenCapture')) {\n      (this.uppy as any).use(ScreenCapture, { target: Dashboard });\n    }\n\n    if (plugins.includes('ImageEditor')) {\n      (this.uppy as any).use(ImageEditor, { target: Dashboard });\n    }\n\n    if (plugins.includes('Audio')) {\n      (this.uppy as any).use(Audio, { target: Dashboard });\n    }\n\n    if (plugins.includes('Url')) {\n      (this.uppy as any).use(Url, {\n        target: Dashboard,\n        companionUrl: this.component.companionUrl || null,\n      });\n    }\n\n    // Set up event handlers\n    this.setupUppyEventHandlers();\n  }\n\n  private setupUppyEventHandlers() {\n    if (!this.uppy) return;\n\n    this.handleFileAdded = async (file: any) => {\n      // Security: Sanitize filename\n      const safeName = sanitizeFilename(file.name, {\n        addTimestamp: true,\n        preserveExtension: false,\n      });\n\n      // Security: Verify file type\n      const isValidType = await verifyFileType(file.data, file.type);\n      if (!isValidType) {\n        logger.error('[Uppy Security] File type verification failed:', file.name);\n        this.uppy?.info(\n          `Security: File \"${file.name}\" content does not match declared type`,\n          'error',\n          5000\n        );\n        this.uppy?.removeFile(file.id);\n        return;\n      }\n\n      // Update file with sanitized name\n      this.uppy?.setFileMeta(file.id, {\n        name: safeName,\n        originalName: file.name,\n      });\n\n      this.emit('fileAdded', file);\n    };\n\n    this.handleUpload = () => {\n      this.emit('uploadStart');\n    };\n\n    this.handleUploadProgress = (file: any, progress: any) => {\n      this.emit('uploadProgress', { file, progress });\n    };\n\n    this.handleUploadSuccess = (file: any, response: any) => {\n      const uploadFile: UploadFile = {\n        id: file.id,\n        name: file.name,\n        size: file.size,\n        type: file.type,\n        url: response.uploadURL,\n        storage: this.component.storage,\n        status: UploadStatus.COMPLETED,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      };\n\n      // Add to component value\n      const currentValue = this.getValue() || [];\n      if (this.component.multiple) {\n        this.setValue([...currentValue, uploadFile]);\n      } else {\n        this.setValue(uploadFile);\n      }\n\n      this.emit('uploadSuccess', uploadFile);\n    };\n\n    this.handleUploadError = (file: any, error: any) => {\n      logger.error('[Uppy] Upload error:', { fileName: file?.name, error });\n      this.emit('uploadError', { file, error });\n    };\n\n    this.handleComplete = (result: any) => {\n      // P3-T2: Clean up GoldenRetriever localStorage to prevent QuotaExceededError (critical for Safari 5MB limit)\n      if (result.successful.length > 0 && result.failed.length === 0) {\n        const uppyId = this.uppy!.getID();\n        try {\n          localStorage.removeItem(`uppy/${uppyId}`);\n        } catch (error) {\n          logger.warn('[Uppy] Failed to clean recovery state:', { error });\n        }\n      }\n\n      this.emit('uploadComplete', result);\n    };\n\n    this.handleError = (error: any) => {\n      logger.error('[Uppy] Error:', { error });\n      this.emit('error', error);\n    };\n\n    this.handleCancelAll = () => {\n      this.emit('uploadCancelled');\n    };\n\n    this.uppy.on('file-added', this.handleFileAdded);\n    this.uppy.on('upload', this.handleUpload);\n    this.uppy.on('upload-progress', this.handleUploadProgress);\n    this.uppy.on('upload-success', this.handleUploadSuccess);\n    this.uppy.on('upload-error', this.handleUploadError);\n    this.uppy.on('complete', this.handleComplete);\n    this.uppy.on('error', this.handleError);\n    this.uppy.on('cancel-all', this.handleCancelAll);\n  }\n\n  private getHeaders(): Record<string, string> {\n    return {\n      Authorization: `Bearer ${this.root?.token || ''}`,\n      'x-jwt-token': this.root?.token || '',\n    };\n  }\n\n  private parseFileSize(size: string): number | null {\n    if (!size) return null;\n\n    const units: Record<string, number> = {\n      B: 1,\n      KB: 1024,\n      MB: 1024 * 1024,\n      GB: 1024 * 1024 * 1024,\n    };\n\n    const match = size.match(/^(\\d+(?:\\.\\d+)?)\\s*([KMGT]?B)$/i);\n    if (!match) return null;\n\n    const value = parseFloat(match[1]);\n    const unit = match[2].toUpperCase();\n\n    return value * (units[unit] || 1);\n  }\n\n  private parseFilePattern(pattern: string): string[] | null {\n    if (!pattern || pattern === '*') return null;\n\n    return pattern.split(',').map((p) => {\n      const trimmed = p.trim();\n      if (trimmed.startsWith('*.')) {\n        return `.${trimmed.substring(2)}`;\n      }\n      return trimmed;\n    });\n  }\n\n  getValue(): any {\n    return this.dataValue;\n  }\n\n  setValue(value: any) {\n    this.dataValue = value;\n  }\n\n  detach() {\n    if (this.uppy) {\n      // P1-T2: Remove all event listeners to prevent memory leaks\n      if (this.handleFileAdded) this.uppy.off('file-added', this.handleFileAdded);\n      if (this.handleUpload) this.uppy.off('upload', this.handleUpload);\n      if (this.handleUploadProgress) this.uppy.off('upload-progress', this.handleUploadProgress);\n      if (this.handleUploadSuccess) this.uppy.off('upload-success', this.handleUploadSuccess);\n      if (this.handleUploadError) this.uppy.off('upload-error', this.handleUploadError);\n      if (this.handleComplete) this.uppy.off('complete', this.handleComplete);\n      if (this.handleError) this.uppy.off('error', this.handleError);\n      if (this.handleCancelAll) this.uppy.off('cancel-all', this.handleCancelAll);\n\n      this.uppy.cancelAll(); // Cancel all uploads (close() removed in Uppy v3+)\n      this.uppy = null;\n    }\n    return super.detach();\n  }\n\n  destroy() {\n    if (this.uppy) {\n      // P1-T2: Remove all event listeners to prevent memory leaks\n      if (this.handleFileAdded) this.uppy.off('file-added', this.handleFileAdded);\n      if (this.handleUpload) this.uppy.off('upload', this.handleUpload);\n      if (this.handleUploadProgress) this.uppy.off('upload-progress', this.handleUploadProgress);\n      if (this.handleUploadSuccess) this.uppy.off('upload-success', this.handleUploadSuccess);\n      if (this.handleUploadError) this.uppy.off('upload-error', this.handleUploadError);\n      if (this.handleComplete) this.uppy.off('complete', this.handleComplete);\n      if (this.handleError) this.uppy.off('error', this.handleError);\n      if (this.handleCancelAll) this.uppy.off('cancel-all', this.handleCancelAll);\n\n      this.uppy.cancelAll(); // Cancel all uploads (close() removed in Uppy v3+)\n      this.uppy = null;\n    }\n    super.destroy();\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/components/UppyFileUpload/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/config/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/config/whitelabel.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/index.ts","messages":[{"ruleId":"import/order","severity":2,"message":"`./components/MultiImageUpload/Component` import should occur before import of `./components/TusFileUpload/Component`","line":10,"column":1,"nodeType":"ImportDeclaration","endLine":10,"endColumn":81,"fix":{"range":[162,395],"text":"import MultiImageUploadComponent from './components/MultiImageUpload/Component';\nimport TusFileUploadComponent from './components/TusFileUpload/Component';\nimport UppyFileUploadComponent from './components/UppyFileUpload/Component';\n"}}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"/**\n * Form.io File Upload Module\n *\n * Provides enterprise-grade file upload capabilities for Form.io\n * using TUS resumable upload protocol and Uppy.js UI\n */\n\nimport TusFileUploadComponent from './components/TusFileUpload/Component';\nimport UppyFileUploadComponent from './components/UppyFileUpload/Component';\nimport MultiImageUploadComponent from './components/MultiImageUpload/Component';\nimport FileStorageProvider from './providers/FileStorageProvider';\nimport { registerTemplates } from './templates';\nimport { registerValidators } from './validators';\n\n// Export individual components for direct use\nexport {\n  TusFileUploadComponent,\n  UppyFileUploadComponent,\n  MultiImageUploadComponent,\n  FileStorageProvider,\n};\n\n// Export utility functions\nexport { registerTemplates, registerValidators };\n\n// Export validators for use in React components\nexport {\n  verifyFileType,\n  detectFileType,\n  hasSignatureSupport,\n  FILE_SIGNATURES,\n} from './validators/magicNumbers';\nexport { sanitizeFilename } from './validators/sanitizeFilename';\n\n// Export logger utility\nexport { logger } from './utils/logger';\nexport type { LogMetadata } from './utils/logger';\n\n// Export upload constants\nexport { UPLOAD_CONSTANTS } from './config/constants';\nexport type { UploadConstants } from './config/constants';\n\n// Module definition following Form.io module specification\n// Form.io only supports 'components' property in modules\nconst FormioFileUploadModule = {\n  components: {\n    tusupload: TusFileUploadComponent,\n    uppyupload: UppyFileUploadComponent,\n    multiimageupload: MultiImageUploadComponent,\n  },\n};\n\n// Default export for Formio.use()\nexport default FormioFileUploadModule;\n\n// Type definitions\nexport * from './types';\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/providers/FileStorageProvider.ts","messages":[{"ruleId":"@typescript-eslint/consistent-type-imports","severity":2,"message":"All imports in the declaration are only used as types. Use `import type`.","line":7,"column":1,"nodeType":"ImportDeclaration","messageId":"typeOverValue","endLine":7,"endColumn":56,"fix":{"range":[120,147],"text":"type StorageProvider, type UploadFile"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[309,312],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[309,312],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[337,340],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[337,340],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":16,"column":5,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":19,"endColumn":6},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[463,466],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[463,466],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .metadata on an `any` value.","line":33,"column":17,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":33,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .metadata on an `any` value.","line":34,"column":27,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":34,"endColumn":35},{"ruleId":"unicorn/no-array-for-each","severity":1,"message":"Use `for…of` instead of `.forEach(…)`.","line":34,"column":37,"nodeType":"Identifier","messageId":"no-array-for-each/error","endLine":34,"endColumn":44,"fix":{"range":[879,1003],"text":"for (const key of Object.keys(options.metadata)) {\n        formData.append(`metadata[${key}]`, options.metadata[key]);\n      }"}},{"ruleId":"security/detect-object-injection","severity":2,"message":"Function Call Object Injection Sink","line":35,"column":45,"nodeType":"MemberExpression","endLine":35,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .metadata on an `any` value.","line":35,"column":53,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":35,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .endpoint on an `any` value.","line":39,"column":46,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":39,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":42,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":42,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .token on an `any` value.","line":42,"column":32,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":42,"endColumn":37},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":42,"column":38,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":42,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[1144,1146],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":51,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":51,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":54,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":54,"endColumn":20},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .id on an `any` value.","line":54,"column":18,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":54,"endColumn":20},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":58,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":58,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .url on an `any` value.","line":58,"column":19,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":58,"endColumn":22},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":2,"message":"Forbidden non-null assertion.","line":67,"column":34,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":67,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .endpoint on an `any` value.","line":77,"column":49,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":77,"endColumn":57},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":80,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":80,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .token on an `any` value.","line":80,"column":36,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":80,"endColumn":41},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":80,"column":42,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":80,"endColumn":44,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[2027,2029],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .endpoint on an `any` value.","line":95,"column":49,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":95,"endColumn":57},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":97,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":97,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .token on an `any` value.","line":97,"column":36,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":97,"endColumn":41},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":97,"column":42,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":97,"endColumn":44,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[2427,2429],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":105,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":105,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":106,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":106,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .url on an `any` value.","line":106,"column":19,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":106,"endColumn":22},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":110,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":110,"endColumn":18},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":110,"column":3,"nodeType":"FunctionExpression","messageId":"missingReturnType","endLine":110,"endColumn":18},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'Formio' should be typed with a non-any type.","line":110,"column":19,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":110,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":110,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2711,2714],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2711,2714],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":111,"column":5,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":111,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .Providers on an `any` value.","line":111,"column":12,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":111,"endColumn":21}],"suppressedMessages":[],"errorCount":33,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":1,"fixableWarningCount":1,"source":"/**\n * File Storage Provider for Form.io\n *\n * Abstract provider interface for different storage backends\n */\n\nimport { StorageProvider, UploadFile } from '../types';\n\nexport default class FileStorageProvider implements StorageProvider {\n  name = 'file';\n  title = 'File Storage Provider';\n\n  private config: any;\n\n  constructor(config: any = {}) {\n    this.config = {\n      endpoint: '/files',\n      ...config\n    };\n  }\n\n  async uploadFile(file: File, options: any = {}): Promise<UploadFile> {\n    // This is the base implementation that would be overridden\n    // by specific storage providers (GCS, S3, Azure, etc.)\n\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('name', file.name);\n    formData.append('size', file.size.toString());\n    formData.append('type', file.type);\n\n    // Add metadata\n    if (options.metadata) {\n      Object.keys(options.metadata).forEach(key => {\n        formData.append(`metadata[${key}]`, options.metadata[key]);\n      });\n    }\n\n    const response = await fetch(this.config.endpoint, {\n      method: 'POST',\n      headers: {\n        'x-jwt-token': options.token || ''\n      },\n      body: formData\n    });\n\n    if (!response.ok) {\n      throw new Error(`Upload failed: ${response.statusText}`);\n    }\n\n    const result = await response.json();\n\n    return {\n      id: result.id,\n      name: file.name,\n      size: file.size,\n      type: file.type,\n      url: result.url,\n      storage: 'file',\n      status: 'completed',\n      createdAt: new Date(),\n      updatedAt: new Date()\n    } as UploadFile;\n  }\n\n  async downloadFile(file: UploadFile): Promise<Blob> {\n    const response = await fetch(file.url!);\n\n    if (!response.ok) {\n      throw new Error(`Download failed: ${response.statusText}`);\n    }\n\n    return response.blob();\n  }\n\n  async deleteFile(file: UploadFile): Promise<void> {\n    const response = await fetch(`${this.config.endpoint}/${file.id}`, {\n      method: 'DELETE',\n      headers: {\n        'x-jwt-token': this.config.token || ''\n      }\n    });\n\n    if (!response.ok) {\n      throw new Error(`Delete failed: ${response.statusText}`);\n    }\n  }\n\n  async getFileUrl(file: UploadFile): Promise<string> {\n    // Generate signed URL if needed\n    if (file.url) {\n      return file.url;\n    }\n\n    const response = await fetch(`${this.config.endpoint}/${file.id}/url`, {\n      headers: {\n        'x-jwt-token': this.config.token || ''\n      }\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to get file URL: ${response.statusText}`);\n    }\n\n    const result = await response.json();\n    return result.url;\n  }\n\n  // Static factory method for Form.io provider registration\n  static register(Formio: any) {\n    Formio.Providers.addProvider('storage', 'file', FileStorageProvider);\n  }\n}","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/providers/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/templates/index.ts","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":7,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":7,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":7,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":7,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'framework' is assigned a value but never used. Allowed unused args must match /^_/u.","line":7,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":44},{"ruleId":"no-unused-vars","severity":2,"message":"'framework' is assigned a value but never used.","line":7,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"framework"},"fix":{"range":[163,192],"text":""},"desc":"Remove unused variable 'framework'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[230,233],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[230,233],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":21,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":21,"endColumn":24},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":134,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":134,"endColumn":25}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Template registration for file upload components\n *\n * Provides clean, framework-agnostic templates with minimal CSS\n */\n\nexport function registerTemplates(framework: string = 'default') {\n  const templates: Record<string, any> = {};\n\n  // All frameworks use clean, vanilla HTML/CSS templates\n  templates.tusupload = {\n    form: getTusTemplate()\n  };\n  templates.uppyupload = {\n    form: getUppyTemplate()\n  };\n\n  return templates;\n}\n\nfunction getTusTemplate() {\n  return `\n<div class=\"tus-upload-component\">\n  <style>\n    .tus-upload-component { margin: 1rem 0; font-family: system-ui, -apple-system, sans-serif; }\n    .tus-upload-component label { display: block; margin-bottom: 0.5rem; font-weight: 500; }\n    .upload-dropzone {\n      border: 2px dashed #ccc;\n      border-radius: 8px;\n      padding: 2rem;\n      text-align: center;\n      background: #fafafa;\n      transition: all 0.2s;\n    }\n    .upload-dropzone:hover { border-color: #666; background: #f0f0f0; }\n    .upload-dropzone.dragover { border-color: #4CAF50; background: #e8f5e9; }\n    .upload-icon { font-size: 3rem; color: #999; margin-bottom: 1rem; }\n    .browse-button {\n      background: #2196F3;\n      color: white;\n      border: none;\n      padding: 0.75rem 1.5rem;\n      border-radius: 4px;\n      cursor: pointer;\n      font-size: 1rem;\n    }\n    .browse-button:hover { background: #1976D2; }\n    .file-input { display: none; }\n    .file-list { margin-top: 1rem; }\n    .file-item {\n      display: flex;\n      align-items: center;\n      padding: 0.75rem;\n      border: 1px solid #ddd;\n      border-radius: 4px;\n      margin-bottom: 0.5rem;\n      background: white;\n    }\n    .file-name { flex: 1; margin: 0 1rem; }\n    .file-size { color: #666; font-size: 0.875rem; }\n    .progress-bar {\n      height: 20px;\n      background: #e0e0e0;\n      border-radius: 10px;\n      overflow: hidden;\n      margin: 0 1rem;\n      flex: 1;\n    }\n    .progress-fill {\n      height: 100%;\n      background: #4CAF50;\n      transition: width 0.3s;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: white;\n      font-size: 0.75rem;\n    }\n    .remove-button {\n      background: #f44336;\n      color: white;\n      border: none;\n      padding: 0.5rem 1rem;\n      border-radius: 4px;\n      cursor: pointer;\n    }\n    .remove-button:hover { background: #d32f2f; }\n    .description { display: block; margin-top: 0.5rem; font-size: 0.875rem; color: #666; }\n  </style>\n\n  <label for=\"{{ instance.id }}-{{ key }}\">{{ t(label) }}</label>\n\n  <div class=\"upload-dropzone\" ref=\"fileDrop\">\n    <div class=\"upload-icon\">📁</div>\n    <p>{{ t('Drag and drop files here or') }}</p>\n    <button type=\"button\" class=\"browse-button\" ref=\"fileBrowse\">\n      {{ t('Browse Files') }}\n    </button>\n    <input type=\"file\" class=\"file-input\" ref=\"hiddenFileInputElement\"\n      {% if (multiple) { %}multiple{% } %}\n      {% if (filePattern && filePattern !== '*') { %}accept=\"{{ filePattern }}\"{% } %} />\n  </div>\n\n  <div class=\"file-list\" ref=\"fileList\">\n    {% if (files && files.length) { %}\n      {% files.forEach(function(file, index) { %}\n        <div class=\"file-item\">\n          <span>📄</span>\n          <span class=\"file-name\">{{ file.name }}</span>\n          <span class=\"file-size\">{{ formatBytes(file.size) }}</span>\n          {% if (file.progress && file.progress < 100) { %}\n            <div class=\"progress-bar\">\n              <div class=\"progress-fill\" ref=\"fileProgress\" style=\"width: {{ file.progress }}%\">\n                {{ file.progress }}%\n              </div>\n            </div>\n          {% } %}\n          {% if (file.status === 'completed') { %}\n            <span style=\"color: #4CAF50;\">✓</span>\n          {% } %}\n          <button type=\"button\" class=\"remove-button\" ref=\"removeLink\">×</button>\n        </div>\n      {% }); %}\n    {% } %}\n  </div>\n\n  {% if (description) { %}\n    <small class=\"description\">{{ t(description) }}</small>\n  {% } %}\n</div>\n  `;\n}\n\nfunction getUppyTemplate() {\n  return `\n<div class=\"uppy-upload-component\">\n  <style>\n    .uppy-upload-component { margin: 1rem 0; font-family: system-ui, -apple-system, sans-serif; }\n    .uppy-upload-component label { display: block; margin-bottom: 0.5rem; font-weight: 500; }\n    .uppy-dashboard-container {\n      border: 1px solid #ddd;\n      border-radius: 8px;\n      overflow: hidden;\n    }\n    .description { display: block; margin-top: 0.5rem; font-size: 0.875rem; color: #666; }\n  </style>\n\n  <label for=\"{{ instance.id }}-{{ key }}\">{{ t(label) }}</label>\n\n  <div class=\"uppy-dashboard-container\"></div>\n\n  {% if (description) { %}\n    <small class=\"description\">{{ t(description) }}</small>\n  {% } %}\n</div>\n  `;\n}","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/test-setup.ts","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): packages/formio-file-upload/src/test-setup.ts"}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Test setup file for Jest\n *\n * Optimized for parallel test execution:\n * - Minimal global setup\n * - Fast mock initialization\n * - Test isolation support\n */\n\n// ==========================================\n// PERFORMANCE OPTIMIZATIONS\n// ==========================================\n\n// Use faster mock implementations\n// Avoid complex logic in global scope\n\n// Polyfill TextEncoder/TextDecoder for JSDOM environment\n// JSDOM doesn't provide these but Node.js does\nimport { TextEncoder, TextDecoder } from 'util';\n\nif (typeof global.TextEncoder === 'undefined') {\n  global.TextEncoder = TextEncoder as any;\n}\n\nif (typeof global.TextDecoder === 'undefined') {\n  global.TextDecoder = TextDecoder as any;\n}\n\n// Mock Blob class (base for File)\nclass MockBlob {\n  constructor(\n    public bits: BlobPart[],\n    public options?: BlobPropertyBag\n  ) {}\n\n  get size(): number {\n    return this.bits.reduce((acc, bit) => {\n      if (typeof bit === 'string') return acc + bit.length;\n      if (bit instanceof ArrayBuffer) return acc + bit.byteLength;\n      if (bit instanceof Uint8Array) return acc + bit.byteLength;\n      if ((bit as any).bits) return acc + (bit as any).size; // MockBlob/MockFile\n      return acc;\n    }, 0);\n  }\n\n  get type(): string {\n    return this.options?.type || 'application/octet-stream';\n  }\n\n  private toUint8Array(): Uint8Array {\n    // Calculate total size first\n    let totalSize = 0;\n    const arrays: Uint8Array[] = [];\n\n    for (const bit of this.bits) {\n      if (bit instanceof Uint8Array) {\n        arrays.push(bit);\n        totalSize += bit.byteLength;\n      } else if (bit instanceof ArrayBuffer) {\n        const arr = new Uint8Array(bit);\n        arrays.push(arr);\n        totalSize += arr.byteLength;\n      } else if (typeof bit === 'string') {\n        const arr = new TextEncoder().encode(bit);\n        arrays.push(arr);\n        totalSize += arr.byteLength;\n      } else if ((bit as any).bits) {\n        // MockBlob/MockFile\n        const arr = (bit as any).toUint8Array() as Uint8Array;\n        arrays.push(arr);\n        totalSize += arr.byteLength;\n      }\n    }\n\n    // Efficiently concatenate all arrays\n    const result = new Uint8Array(totalSize);\n    let offset = 0;\n    for (const arr of arrays) {\n      result.set(arr, offset);\n      offset += arr.byteLength;\n    }\n\n    return result;\n  }\n\n  slice(start: number = 0, end?: number, contentType?: string): Blob {\n    const fullArray = this.toUint8Array();\n    const slicedArray = fullArray.slice(start, end);\n\n    return new MockBlob([slicedArray.buffer], {\n      type: contentType || this.type,\n    }) as any;\n  }\n\n  async arrayBuffer(): Promise<ArrayBuffer> {\n    const uint8 = this.toUint8Array();\n    // Create a new ArrayBuffer copy\n    const buffer = new ArrayBuffer(uint8.byteLength);\n    const view = new Uint8Array(buffer);\n    view.set(uint8);\n    return buffer;\n  }\n\n  async text(): Promise<string> {\n    const buffer = await this.arrayBuffer();\n    return new TextDecoder().decode(buffer);\n  }\n}\n\n// Mock File class (extends Blob)\nclass MockFile extends MockBlob {\n  constructor(\n    bits: BlobPart[],\n    public name: string,\n    options?: FilePropertyBag\n  ) {\n    super(bits, options);\n  }\n}\n\n// Assign to global\nglobal.Blob = MockBlob as any;\nglobal.File = MockFile as any;\n\nglobal.FormData = class FormData {\n  private data = new Map();\n\n  append(key: string, value: any) {\n    this.data.set(key, value);\n  }\n\n  get(key: string) {\n    return this.data.get(key);\n  }\n} as any;\n\n// Mock fetch for testing (create fresh mock per test via beforeEach)\nglobal.fetch = jest.fn();\n\n// Mock localStorage (optimized with Map for faster access)\nconst localStorageMock = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n};\n\nglobal.localStorage = localStorageMock as any;\n\n// ==========================================\n// TEST ISOLATION\n// ==========================================\n\n// Clear all mocks before each test\n// This is now handled by jest.config.parallel.js:\n// - clearMocks: true\n// - resetMocks: true\n// - restoreMocks: true\n\n// ==========================================\n// PERFORMANCE MONITORING (Optional)\n// ==========================================\n\n// Track slow tests in development\nif (process.env.TRACK_PERF) {\n  let testStartTime: number;\n\n  beforeEach(() => {\n    testStartTime = performance.now();\n  });\n\n  afterEach(() => {\n    const duration = performance.now() - testStartTime;\n    if (duration > 1000) {\n      // Tests taking >1s\n      console.warn(`⚠️  Slow test detected: ${duration.toFixed(0)}ms`);\n    }\n  });\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/types/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[758,761],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[758,761],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1134,1137],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1134,1137],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1366,1369],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1366,1369],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1406,1409],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1406,1409],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1416,1419],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1416,1419],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1723,1726],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1723,1726],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":88,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1896,1899],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1896,1899],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":131,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2745,2748],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2745,2748],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":132,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2790,2793],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2790,2793],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2828,2831],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2828,2831],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":135,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":135,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2851,2854],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2851,2854],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":153,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3186,3189],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3186,3189],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Type definitions for Form.io File Upload Module\n */\n\nexport interface FileUploadConfig {\n  tusEndpoint: string;\n  maxFileSize: number;\n  chunkSize: number;\n  allowedTypes: string | string[];\n  storage: 'tus' | 's3' | 'gcs' | 'azure' | 'local';\n  privateDownload: boolean;\n  imageProcessing?: ImageProcessingConfig;\n}\n\nexport interface ImageProcessingConfig {\n  resize?: {\n    width?: number;\n    height?: number;\n    mode?: 'cover' | 'contain' | 'fill' | 'inside' | 'outside';\n  };\n  quality?: number;\n  format?: 'jpeg' | 'png' | 'webp' | 'avif';\n}\n\nexport interface UploadFile {\n  id: string;\n  name: string;\n  originalName?: string;\n  size: number;\n  type: string;\n  uploadId?: string;\n  url?: string;\n  storage: string;\n  metadata?: Record<string, any>;\n  progress?: number;\n  status: UploadStatus;\n  error?: UploadError;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport enum UploadStatus {\n  PENDING = 'pending',\n  UPLOADING = 'uploading',\n  PROCESSING = 'processing',\n  COMPLETED = 'completed',\n  FAILED = 'failed',\n  CANCELLED = 'cancelled'\n}\n\nexport interface UploadError {\n  code: string;\n  message: string;\n  details?: any;\n}\n\nexport interface TusConfig {\n  endpoint: string;\n  retryDelays?: number[];\n  parallelUploads?: number;\n  chunkSize?: number;\n  headers?: Record<string, string>;\n  metadata?: Record<string, string>;\n  onBeforeRequest?: (req: any) => void;\n  onAfterResponse?: (req: any, res: any) => void;\n}\n\nexport interface UppyConfig {\n  autoProceed?: boolean;\n  allowMultipleUploadBatches?: boolean;\n  restrictions?: {\n    maxFileSize?: number;\n    minFileSize?: number;\n    maxNumberOfFiles?: number;\n    minNumberOfFiles?: number;\n    allowedFileTypes?: string[];\n  };\n  meta?: Record<string, any>;\n  locale?: string;\n}\n\nexport interface ComponentSchema {\n  type: string;\n  key: string;\n  label: string;\n  storage: string;\n  url?: string;\n  options?: Record<string, any>;\n  validate?: ValidationConfig;\n  conditional?: ConditionalConfig;\n  customConditional?: string;\n  multiple?: boolean;\n  filePattern?: string;\n  fileMinSize?: string;\n  fileMaxSize?: string;\n  image?: boolean;\n  privateDownload?: boolean;\n  imageSize?: number;\n  webcam?: boolean;\n  fileTypes?: FileType[];\n}\n\nexport interface ValidationConfig {\n  required?: boolean;\n  customMessage?: string;\n  pattern?: string;\n  custom?: string;\n  customPrivate?: boolean;\n  json?: string;\n  minLength?: number;\n  maxLength?: number;\n  minWords?: number;\n  maxWords?: number;\n}\n\nexport interface ConditionalConfig {\n  show?: boolean;\n  when?: string;\n  eq?: string;\n  json?: string;\n}\n\nexport interface FileType {\n  label: string;\n  value: string;\n}\n\nexport interface FormioComponent {\n  schema(): ComponentSchema;\n  builderInfo: BuilderInfo;\n  editForm(): any;\n  attach(element: HTMLElement): Promise<any>;\n  detach(): void;\n  getValue(): any;\n  setValue(value: any): void;\n  checkValidity(): boolean;\n  build(): void;\n  destroy(): void;\n}\n\nexport interface BuilderInfo {\n  title: string;\n  icon: string;\n  group: string;\n  documentation?: string;\n  weight: number;\n  schema: ComponentSchema;\n}\n\nexport interface StorageProvider {\n  name: string;\n  title: string;\n  uploadFile(file: File, config: any): Promise<UploadFile>;\n  downloadFile(file: UploadFile): Promise<Blob>;\n  deleteFile(file: UploadFile): Promise<void>;\n  getFileUrl(file: UploadFile): Promise<string>;\n}","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/utils/logger.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[371,374],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[371,374],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":40,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":40,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[874,909],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":49,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":49,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1043,1079],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Production-safe logger for Form.io file upload components\n *\n * Features:\n * - Environment-aware (only logs in development)\n * - Structured logging with metadata\n * - Prepares for production monitoring integration\n */\n\nconst isDevelopment = typeof process !== 'undefined' && process.env.NODE_ENV === 'development';\n\nexport interface LogMetadata {\n  [key: string]: any;\n}\n\nexport const logger = {\n  /**\n   * Log error messages\n   */\n  error: (msg: string, meta?: LogMetadata): void => {\n    if (isDevelopment) {\n      console.error(`[ERROR] ${msg}`, meta);\n    }\n  },\n\n  /**\n   * Log warning messages\n   */\n  warn: (msg: string, meta?: LogMetadata): void => {\n    if (isDevelopment) {\n      console.warn(`[WARN] ${msg}`, meta);\n    }\n  },\n\n  /**\n   * Log informational messages\n   */\n  info: (msg: string, meta?: LogMetadata): void => {\n    if (isDevelopment) {\n      console.log(`[INFO] ${msg}`, meta);\n    }\n  },\n\n  /**\n   * Log debug messages\n   */\n  debug: (msg: string, meta?: LogMetadata): void => {\n    if (isDevelopment) {\n      console.log(`[DEBUG] ${msg}`, meta);\n    }\n  },\n};\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/validators/fileIntegrity.test.ts","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): packages/formio-file-upload/src/validators/fileIntegrity.test.ts"}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * File Integrity Validator Tests\n *\n * Tests cover:\n * - Basic checksum calculation\n * - Streaming large files\n * - Integrity validation (match/mismatch)\n * - Multiple file processing\n * - Form.io validator integration\n * - Performance benchmarks\n */\n\nimport { describe, it, expect, beforeAll } from '@jest/globals';\nimport {\n  calculateFileChecksum,\n  validateFileIntegrity,\n  calculateMultipleChecksums,\n  fileIntegrityValidator,\n  addChecksumMetadata,\n} from './fileIntegrity';\n\n// Mock File API for testing\nclass MockFile extends Blob {\n  name: string;\n  lastModified: number;\n\n  constructor(bits: BlobPart[], name: string, options?: FilePropertyBag) {\n    super(bits, options);\n    this.name = name;\n    this.lastModified = options?.lastModified || Date.now();\n  }\n}\n\n// @ts-ignore - Mock File for testing\nglobal.File = MockFile as any;\n\ndescribe('fileIntegrity - xxHash Checksum Validation', () => {\n  describe('calculateFileChecksum', () => {\n    it('should calculate checksum for small file', async () => {\n      const file = new File(['Hello World'], 'test.txt', { type: 'text/plain' });\n      const result = await calculateFileChecksum(file);\n\n      console.log('DEBUG: Result =', JSON.stringify(result, null, 2));\n      expect(result.valid).toBe(true);\n      expect(result.checksum).toBeTruthy();\n      expect(result.checksum.length).toBeGreaterThan(0);\n      expect(result.size).toBe(11); // \"Hello World\" length\n      expect(result.processingTime).toBeGreaterThanOrEqual(0);\n      expect(result.error).toBeUndefined();\n    });\n\n    it('should generate same checksum for identical content', async () => {\n      const file1 = new File(['Same Content'], 'file1.txt');\n      const file2 = new File(['Same Content'], 'file2.txt');\n\n      const result1 = await calculateFileChecksum(file1);\n      const result2 = await calculateFileChecksum(file2);\n\n      expect(result1.checksum).toBe(result2.checksum);\n    });\n\n    it('should generate different checksums for different content', async () => {\n      const file1 = new File(['Content A'], 'file1.txt');\n      const file2 = new File(['Content B'], 'file2.txt');\n\n      const result1 = await calculateFileChecksum(file1);\n      const result2 = await calculateFileChecksum(file2);\n\n      expect(result1.checksum).not.toBe(result2.checksum);\n    });\n\n    it('should handle empty file', async () => {\n      const file = new File([], 'empty.txt');\n      const result = await calculateFileChecksum(file);\n\n      expect(result.valid).toBe(true);\n      expect(result.checksum).toBeTruthy();\n      expect(result.size).toBe(0);\n    });\n\n    it('should handle large file with streaming', async () => {\n      // Create 1MB file\n      const largeData = new Uint8Array(1024 * 1024).fill(65); // 1MB of 'A'\n      const file = new File([largeData], 'large.bin');\n\n      const result = await calculateFileChecksum(file, {\n        chunkSize: 64 * 1024, // 64KB chunks\n        enableLogging: false,\n      });\n\n      expect(result.valid).toBe(true);\n      expect(result.size).toBe(1024 * 1024);\n      expect(result.checksum).toBeTruthy();\n    });\n\n    it('should calculate checksum with custom chunk size', async () => {\n      const file = new File(['0123456789'.repeat(1000)], 'test.txt');\n\n      const result = await calculateFileChecksum(file, {\n        chunkSize: 100, // Small chunks\n      });\n\n      expect(result.valid).toBe(true);\n      expect(result.checksum).toBeTruthy();\n    });\n  });\n\n  describe('validateFileIntegrity', () => {\n    it('should validate file with correct checksum', async () => {\n      const file = new File(['Test Content'], 'test.txt');\n\n      // First calculate the checksum\n      const checksumResult = await calculateFileChecksum(file);\n\n      // Then validate against it\n      const validationResult = await validateFileIntegrity(file, {\n        expectedChecksum: checksumResult.checksum,\n      });\n\n      expect(validationResult.valid).toBe(true);\n      expect(validationResult.error).toBeUndefined();\n    });\n\n    it('should fail validation with incorrect checksum', async () => {\n      const file = new File(['Test Content'], 'test.txt');\n\n      const result = await validateFileIntegrity(file, {\n        expectedChecksum: 'incorrect_checksum_12345',\n      });\n\n      expect(result.valid).toBe(false);\n      expect(result.error).toContain('Checksum mismatch');\n    });\n\n    it('should be case-insensitive when comparing checksums', async () => {\n      const file = new File(['Test Content'], 'test.txt');\n\n      const checksumResult = await calculateFileChecksum(file);\n      const uppercaseChecksum = checksumResult.checksum.toUpperCase();\n\n      const validationResult = await validateFileIntegrity(file, {\n        expectedChecksum: uppercaseChecksum,\n      });\n\n      expect(validationResult.valid).toBe(true);\n    });\n\n    it('should throw error if expectedChecksum is missing', async () => {\n      const file = new File(['Test'], 'test.txt');\n\n      await expect(validateFileIntegrity(file, {})).rejects.toThrow('expectedChecksum is required');\n    });\n\n    it('should detect file corruption', async () => {\n      const originalFile = new File(['Original Content'], 'file.txt');\n      const corruptedFile = new File(['Corrupted Content'], 'file.txt');\n\n      const originalChecksum = await calculateFileChecksum(originalFile);\n      const validationResult = await validateFileIntegrity(corruptedFile, {\n        expectedChecksum: originalChecksum.checksum,\n      });\n\n      expect(validationResult.valid).toBe(false);\n      expect(validationResult.error).toContain('mismatch');\n    });\n  });\n\n  describe('calculateMultipleChecksums', () => {\n    it('should calculate checksums for multiple files in parallel', async () => {\n      const files = [\n        new File(['File 1'], 'file1.txt'),\n        new File(['File 2'], 'file2.txt'),\n        new File(['File 3'], 'file3.txt'),\n      ];\n\n      const results = await calculateMultipleChecksums(files);\n\n      expect(results).toHaveLength(3);\n      results.forEach((result) => {\n        expect(result.valid).toBe(true);\n        expect(result.checksum).toBeTruthy();\n      });\n\n      // All checksums should be different\n      const checksums = results.map((r) => r.checksum);\n      const uniqueChecksums = new Set(checksums);\n      expect(uniqueChecksums.size).toBe(3);\n    });\n\n    it('should handle empty file array', async () => {\n      const results = await calculateMultipleChecksums([]);\n      expect(results).toEqual([]);\n    });\n\n    it('should process large number of files efficiently', async () => {\n      const files = Array.from({ length: 50 }, (_, i) => new File([`File ${i}`], `file${i}.txt`));\n\n      const startTime = performance.now();\n      const results = await calculateMultipleChecksums(files);\n      const duration = performance.now() - startTime;\n\n      expect(results).toHaveLength(50);\n      expect(duration).toBeLessThan(5000); // Should complete in under 5 seconds\n    });\n  });\n\n  describe('fileIntegrityValidator - Form.io integration', () => {\n    it('should return true if validation is disabled', async () => {\n      const context = {\n        component: { validateChecksum: false },\n        value: new File(['Test'], 'test.txt'),\n      };\n\n      const result = await fileIntegrityValidator(context);\n      expect(result).toBe(true);\n    });\n\n    it('should return true if no value provided', async () => {\n      const context = {\n        component: { validateChecksum: true },\n        value: null,\n      };\n\n      const result = await fileIntegrityValidator(context);\n      expect(result).toBe(true);\n    });\n\n    it('should validate file with checksum metadata', async () => {\n      const file = new File(['Test'], 'test.txt');\n      const checksumResult = await calculateFileChecksum(file);\n\n      const fileWithChecksum = Object.assign(file, {\n        checksum: checksumResult.checksum,\n      });\n\n      const context = {\n        component: { validateChecksum: true },\n        value: fileWithChecksum,\n      };\n\n      const result = await fileIntegrityValidator(context);\n      expect(result).toBe(true);\n    });\n\n    it('should return error if file missing checksum', async () => {\n      const file = new File(['Test'], 'test.txt');\n\n      const context = {\n        component: { validateChecksum: true },\n        value: file,\n      };\n\n      const result = await fileIntegrityValidator(context);\n      expect(typeof result).toBe('string');\n      expect(result).toContain('missing checksum');\n    });\n\n    it('should validate array of files', async () => {\n      const file1 = new File(['File 1'], 'file1.txt');\n      const file2 = new File(['File 2'], 'file2.txt');\n\n      const checksum1 = await calculateFileChecksum(file1);\n      const checksum2 = await calculateFileChecksum(file2);\n\n      const filesWithChecksums = [\n        Object.assign(file1, { checksum: checksum1.checksum }),\n        Object.assign(file2, { checksum: checksum2.checksum }),\n      ];\n\n      const context = {\n        component: { validateChecksum: true },\n        value: filesWithChecksums,\n      };\n\n      const result = await fileIntegrityValidator(context);\n      expect(result).toBe(true);\n    });\n\n    it('should fail validation if any file has incorrect checksum', async () => {\n      const file = new File(['Test'], 'test.txt');\n      const fileWithBadChecksum = Object.assign(file, {\n        checksum: 'wrong_checksum_12345',\n      });\n\n      const context = {\n        component: { validateChecksum: true },\n        value: fileWithBadChecksum,\n      };\n\n      const result = await fileIntegrityValidator(context);\n      expect(typeof result).toBe('string');\n      expect(result).toContain('integrity check failed');\n    });\n  });\n\n  describe('addChecksumMetadata', () => {\n    it('should add checksum metadata to file', async () => {\n      const file = new File(['Test Content'], 'test.txt');\n      const fileWithChecksum = await addChecksumMetadata(file);\n\n      expect(fileWithChecksum.checksum).toBeTruthy();\n      expect(fileWithChecksum.checksumAlgorithm).toBe('xxh64');\n      expect(fileWithChecksum.checksumProcessingTime).toBeGreaterThanOrEqual(0);\n      expect(fileWithChecksum.name).toBe('test.txt');\n      expect(fileWithChecksum.size).toBe(file.size);\n    });\n\n    it('should preserve original file properties', async () => {\n      const file = new File(['Content'], 'original.pdf', { type: 'application/pdf' });\n      const fileWithChecksum = await addChecksumMetadata(file);\n\n      expect(fileWithChecksum.name).toBe('original.pdf');\n      expect(fileWithChecksum.type).toBe('application/pdf');\n      expect(fileWithChecksum.size).toBe(7);\n    });\n  });\n\n  describe('Performance benchmarks', () => {\n    it('should be fast for small files (< 1ms)', async () => {\n      const file = new File(['Small file content'], 'small.txt');\n\n      const startTime = performance.now();\n      const result = await calculateFileChecksum(file);\n      const duration = performance.now() - startTime;\n\n      expect(result.valid).toBe(true);\n      expect(duration).toBeLessThan(10); // Should be very fast\n    });\n\n    it('should process 10MB file efficiently', async () => {\n      // Create 10MB file\n      const largeData = new Uint8Array(10 * 1024 * 1024).fill(42);\n      const file = new File([largeData], 'large.bin');\n\n      const startTime = performance.now();\n      const result = await calculateFileChecksum(file, {\n        enableLogging: true,\n      });\n      const duration = performance.now() - startTime;\n\n      expect(result.valid).toBe(true);\n      expect(result.size).toBe(10 * 1024 * 1024);\n\n      // Should process at least 50 MB/s (conservative estimate)\n      const throughputMBps = result.size / 1024 / 1024 / (duration / 1000);\n      expect(throughputMBps).toBeGreaterThan(50);\n    });\n  });\n\n  describe('Edge cases', () => {\n    it('should handle binary data', async () => {\n      const binaryData = new Uint8Array([0x00, 0xff, 0xaa, 0x55]);\n      const file = new File([binaryData], 'binary.bin');\n\n      const result = await calculateFileChecksum(file);\n      expect(result.valid).toBe(true);\n    });\n\n    it('should handle Unicode content', async () => {\n      const unicodeContent = '你好世界 🌍 Hello मस्ते';\n      const file = new File([unicodeContent], 'unicode.txt');\n\n      const result = await calculateFileChecksum(file);\n      expect(result.valid).toBe(true);\n    });\n\n    it('should handle Blob instead of File', async () => {\n      const blob = new Blob(['Blob content'], { type: 'text/plain' });\n      const result = await calculateFileChecksum(blob);\n\n      expect(result.valid).toBe(true);\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/validators/fileIntegrity.ts","messages":[{"ruleId":"import/order","severity":2,"message":"There should be at least one empty line between import groups","line":16,"column":1,"nodeType":"ImportDeclaration","endLine":16,"endColumn":34,"fix":{"range":[540,540],"text":"\n"}},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":29,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":29,"endColumn":26},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??=`) instead of an assignment expression, as it is simpler to read.","line":30,"column":3,"nodeType":"IfStatement","messageId":"preferNullishOverAssignment","endLine":32,"endColumn":4,"suggestions":[{"messageId":"suggestNullish","data":{"equals":"="},"fix":{"range":[881,930],"text":"hashAPI ??= await xxhash();"},"desc":"Fix to nullish coalescing operator (`??=`)."}]},{"ruleId":"no-undef","severity":2,"message":"'performance' is not defined.","line":80,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":80,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'performance' is not defined.","line":103,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":103,"endColumn":39},{"ruleId":"no-undef","severity":2,"message":"'performance' is not defined.","line":123,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":123,"endColumn":34},{"ruleId":"require-await","severity":2,"message":"Async function 'calculateMultipleChecksums' has no 'await' expression.","line":186,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":186,"endColumn":49,"suggestions":[{"messageId":"removeAsync","fix":{"range":[4960,4966],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'context' should be typed with a non-any type.","line":209,"column":46,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":209,"endColumn":58},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":209,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":209,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5569,5572],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5569,5572],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":210,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":210,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .validateChecksum on an `any` value.","line":212,"column":28,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":212,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .checksum on an `any` value.","line":219,"column":15,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":219,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":220,"column":27,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":220,"endColumn":31},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":220,"column":32,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":220,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[5891,5893],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":224,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":224,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .checksum on an `any` value.","line":224,"column":30,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":224,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":228,"column":27,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":228,"endColumn":31},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":2,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":228,"column":32,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":228,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","data":{"equals":""},"fix":{"range":[6102,6104],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":1,"fixableWarningCount":0,"source":"/**\n * File Integrity Validator using xxHash (xxh64)\n *\n * WHY xxHash instead of SHA-256:\n * - Speed: 50x faster than SHA-256 (0.5s vs 27s for 6.6GB file)\n * - Performance: ~400 MB/s throughput with WebAssembly\n * - Use Case: Detects accidental corruption (not cryptographic security)\n * - Platform: Works in both browser (WASM) and Node.js\n *\n * Research Sources:\n * - https://xxhash.com/\n * - https://github.com/jungomi/xxhash-wasm\n * - Production usage: Cloudflare Workers, Astro, RSSHub, grpc-node\n */\n\nimport xxhash from 'xxhash-wasm';\nimport { logger } from '../utils/logger';\n\n/**\n * Singleton xxHash API instance for performance\n * Lazy-loaded on first use to avoid blocking app startup\n */\nlet hashAPI: Awaited<ReturnType<typeof xxhash>> | null = null;\n\n/**\n * Initialize xxHash WASM module\n * Automatically caches for subsequent calls\n */\nasync function getHashAPI() {\n  if (!hashAPI) {\n    hashAPI = await xxhash();\n  }\n  return hashAPI;\n}\n\n/**\n * File integrity result\n */\nexport interface FileIntegrityResult {\n  /** Whether the file passed integrity validation */\n  valid: boolean;\n  /** xxHash checksum (hex string) */\n  checksum: string;\n  /** File size in bytes */\n  size: number;\n  /** Processing time in milliseconds */\n  processingTime: number;\n  /** Error message if validation failed */\n  error?: string;\n}\n\n/**\n * Options for file integrity checking\n */\nexport interface FileIntegrityOptions {\n  /** Expected checksum (if validating against known value) */\n  expectedChecksum?: string;\n  /** Chunk size for streaming large files (default: 64KB) */\n  chunkSize?: number;\n  /** Enable performance logging */\n  enableLogging?: boolean;\n}\n\n/**\n * Calculate xxHash checksum for a File or Blob\n *\n * Uses streaming API for memory efficiency with large files\n *\n * @example\n * ```typescript\n * const result = await calculateFileChecksum(file);\n * console.log(`Checksum: ${result.checksum}`);\n * console.log(`Time: ${result.processingTime}ms for ${result.size} bytes`);\n * ```\n */\nexport async function calculateFileChecksum(\n  file: File | Blob,\n  options: FileIntegrityOptions = {}\n): Promise<FileIntegrityResult> {\n  const startTime = performance.now();\n  const { chunkSize = 64 * 1024, enableLogging = false } = options;\n\n  try {\n    const api = await getHashAPI();\n    const hasher = api.create64();\n\n    // Stream file in chunks for memory efficiency\n    let offset = 0;\n    const fileSize = file.size;\n\n    while (offset < fileSize) {\n      const chunk = file.slice(offset, Math.min(offset + chunkSize, fileSize));\n      const arrayBuffer = await chunk.arrayBuffer();\n      const uint8Array = new Uint8Array(arrayBuffer);\n\n      hasher.update(uint8Array);\n      offset += chunkSize;\n    }\n\n    // digest() returns bigint, convert to hex string manually\n    const checksumBigInt = hasher.digest();\n    const checksum = checksumBigInt.toString(16).padStart(16, '0');\n    const processingTime = performance.now() - startTime;\n\n    if (enableLogging && process.env.NODE_ENV !== 'production') {\n      const throughput = fileSize / 1024 / 1024 / (processingTime / 1000);\n      logger.info(\n        `[xxHash] Processed ${(fileSize / 1024 / 1024).toFixed(2)} MB in ${processingTime.toFixed(2)}ms (~${throughput.toFixed(2)} MB/s)`\n      );\n    }\n\n    return {\n      valid: true,\n      checksum,\n      size: fileSize,\n      processingTime,\n    };\n  } catch (error) {\n    return {\n      valid: false,\n      checksum: '',\n      size: file.size,\n      processingTime: performance.now() - startTime,\n      error: error instanceof Error ? error.message : 'Unknown error',\n    };\n  }\n}\n\n/**\n * Validate file integrity against expected checksum\n *\n * @example\n * ```typescript\n * const result = await validateFileIntegrity(file, {\n *   expectedChecksum: 'abc123...'\n * });\n *\n * if (result.valid) {\n *   console.log('File integrity verified!');\n * } else {\n *   console.error('Integrity check failed:', result.error);\n * }\n * ```\n */\nexport async function validateFileIntegrity(\n  file: File | Blob,\n  options: FileIntegrityOptions\n): Promise<FileIntegrityResult> {\n  const { expectedChecksum } = options;\n\n  if (!expectedChecksum) {\n    throw new Error('expectedChecksum is required for validation');\n  }\n\n  const result = await calculateFileChecksum(file, options);\n\n  if (!result.valid) {\n    return result; // Return error from checksum calculation\n  }\n\n  // Compare checksums (case-insensitive)\n  const checksumMatch = result.checksum.toLowerCase() === expectedChecksum.toLowerCase();\n\n  if (!checksumMatch) {\n    return {\n      ...result,\n      valid: false,\n      error: `Checksum mismatch: expected ${expectedChecksum}, got ${result.checksum}`,\n    };\n  }\n\n  return result;\n}\n\n/**\n * Calculate checksums for multiple files in parallel\n *\n * @example\n * ```typescript\n * const results = await calculateMultipleChecksums(files);\n * results.forEach((result, index) => {\n *   console.log(`File ${index}: ${result.checksum}`);\n * });\n * ```\n */\nexport async function calculateMultipleChecksums(\n  files: (File | Blob)[],\n  options: FileIntegrityOptions = {}\n): Promise<FileIntegrityResult[]> {\n  // Process files in parallel for maximum performance\n  return Promise.all(files.map((file) => calculateFileChecksum(file, options)));\n}\n\n/**\n * Form.io validator integration\n *\n * Validates file integrity as part of form submission\n *\n * @example\n * ```typescript\n * // In Form.io component configuration\n * {\n *   validate: {\n *     custom: 'valid = await fileIntegrityValidator(input)'\n *   }\n * }\n * ```\n */\nexport async function fileIntegrityValidator(context: any): Promise<boolean | string> {\n  const { component, value } = context;\n\n  if (!value || !component.validateChecksum) {\n    return true; // Skip validation if not enabled\n  }\n\n  const files = Array.isArray(value) ? value : [value];\n\n  for (const file of files) {\n    if (!file.checksum) {\n      return `File ${file.name || 'unknown'} is missing checksum metadata`;\n    }\n\n    const result = await validateFileIntegrity(file, {\n      expectedChecksum: file.checksum,\n    });\n\n    if (!result.valid) {\n      return `File ${file.name || 'unknown'} integrity check failed: ${result.error}`;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Generate checksum metadata for file upload\n *\n * Adds checksum to file object for later validation\n *\n * @example\n * ```typescript\n * const fileWithChecksum = await addChecksumMetadata(file);\n * // fileWithChecksum now has .checksum property\n * ```\n */\nexport async function addChecksumMetadata(\n  file: File,\n  options: FileIntegrityOptions = {}\n): Promise<File & { checksum: string; checksumAlgorithm: string }> {\n  const result = await calculateFileChecksum(file, options);\n\n  if (!result.valid) {\n    throw new Error(`Failed to calculate checksum: ${result.error}`);\n  }\n\n  // Attach checksum metadata to file object\n  return Object.assign(file, {\n    checksum: result.checksum,\n    checksumAlgorithm: 'xxh64',\n    checksumProcessingTime: result.processingTime,\n  });\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/validators/index.ts","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":10,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":10,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":10,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":10,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":22,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":22,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[460,463],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[460,463],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":23,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":23,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileMaxSize on an `any` value.","line":28,"column":43,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":28,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileMinSize on an `any` value.","line":29,"column":43,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":29,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .size on an `any` value.","line":32,"column":25,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":32,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":33,"column":27,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":33,"endColumn":31},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileMaxSize on an `any` value.","line":33,"column":69,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":33,"endColumn":80},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .size on an `any` value.","line":35,"column":25,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":35,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":36,"column":27,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":36,"endColumn":31},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fileMinSize on an `any` value.","line":36,"column":77,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":36,"endColumn":88},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":46,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":46,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1094,1097],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1094,1097],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":47,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":47,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .filePattern on an `any` value.","line":49,"column":28,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":49,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .filePattern on an `any` value.","line":49,"column":53,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":49,"endColumn":64},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .filePattern on an `any` value.","line":54,"column":51,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":54,"endColumn":62},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":57,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":57,"endColumn":82},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":57,"column":21,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":57,"endColumn":80},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":57,"column":21,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":57,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":57,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":57,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":57,"column":41,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":57,"endColumn":62},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":57,"column":46,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":57,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .toLowerCase on an `any` value.","line":57,"column":69,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":57,"endColumn":80},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":58,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":58,"endColumn":31},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .type on an `any` value.","line":58,"column":27,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":58,"endColumn":31},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":66,"column":36,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":66,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .match on an `any` value.","line":66,"column":45,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":66,"endColumn":50},{"ruleId":"security/detect-non-literal-regexp","severity":2,"message":"Found non-literal argument to RegExp Constructor","line":66,"column":51,"nodeType":"NewExpression","endLine":66,"endColumn":89},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .filePattern on an `any` value.","line":73,"column":79,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":73,"endColumn":90},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":83,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":83,"endColumn":34},{"ruleId":"require-await","severity":2,"message":"Async function 'virusScanValidator' has no 'await' expression.","line":83,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":83,"endColumn":34,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2060,2066],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":83,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2103,2106],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2103,2106],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":84,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":84,"endColumn":39},{"ruleId":"sonarjs/prefer-single-boolean-return","severity":1,"message":"Replace this if-then-else flow by a single return statement.","line":86,"column":3,"nodeType":"IfStatement","messageId":"replaceIfThenElseByReturn","endLine":88,"endColumn":4,"suggestions":[{"messageId":"suggestCast","fix":{"range":[2153,2326],"text":"return !!(!value || !component.virusScan);"},"desc":"Replace with single return statement using \"!!\" cast"},{"messageId":"suggestBoolean","fix":{"range":[2153,2326],"text":"return !value || !component.virusScan;"},"desc":"Replace with single return statement without cast (condition should be boolean!)"}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .virusScan on an `any` value.","line":86,"column":28,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":86,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":98,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":98,"endColumn":34},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":98,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2410,2413],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2410,2413],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":99,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":99,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .imageMinResolution on an `any` value.","line":101,"column":29,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":101,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .imageMaxResolution on an `any` value.","line":101,"column":62,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":101,"endColumn":80},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `any` typed value.","line":108,"column":10,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":108,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .type on an `any` value.","line":108,"column":15,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":108,"endColumn":19},{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":133,"column":28,"nodeType":"Literal","endLine":133,"endColumn":61},{"ruleId":"unicorn/better-regex","severity":2,"message":"/^(\\d+(?:\\.\\d+)?)\\s*([KMGT]?B)$/i can be optimized to /^(\\d+(?:\\.\\d+)?)\\s*([gkmt]?b)$/i.","line":133,"column":28,"nodeType":"Literal","messageId":"better-regex","endLine":133,"endColumn":61,"fix":{"range":[3163,3196],"text":"/^(\\d+(?:\\.\\d+)?)\\s*([gkmt]?b)$/i"}},{"ruleId":"unicorn/prefer-number-properties","severity":2,"message":"Prefer `Number.parseFloat` over `parseFloat`.","line":136,"column":17,"nodeType":"Identifier","messageId":"error","endLine":136,"endColumn":27,"fix":{"range":[3243,3253],"text":"Number.parseFloat"}},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":139,"column":19,"nodeType":"MemberExpression","endLine":139,"endColumn":30}],"suppressedMessages":[],"errorCount":42,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":2,"fixableWarningCount":0,"source":"/**\n * Custom validators for file upload components\n */\n\n// Export security utilities\nexport * from './magicNumbers';\nexport * from './sanitizeFilename';\nexport * from './fileIntegrity';\n\nexport function registerValidators() {\n  return {\n    fileSize: fileSizeValidator,\n    fileType: fileTypeValidator,\n    virusScan: virusScanValidator,\n    imageResolution: imageResolutionValidator,\n  };\n}\n\n/**\n * Validate file size\n */\nfunction fileSizeValidator(context: any) {\n  const { component, value } = context;\n\n  if (!value) return true;\n\n  const files = Array.isArray(value) ? value : [value];\n  const maxSize = parseFileSize(component.fileMaxSize);\n  const minSize = parseFileSize(component.fileMinSize);\n\n  for (const file of files) {\n    if (maxSize && file.size > maxSize) {\n      return `File ${file.name} exceeds maximum size of ${component.fileMaxSize}`;\n    }\n    if (minSize && file.size < minSize) {\n      return `File ${file.name} is smaller than minimum size of ${component.fileMinSize}`;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Validate file type\n */\nfunction fileTypeValidator(context: any) {\n  const { component, value } = context;\n\n  if (!value || !component.filePattern || component.filePattern === '*') {\n    return true;\n  }\n\n  const files = Array.isArray(value) ? value : [value];\n  const allowedTypes = parseFilePattern(component.filePattern);\n\n  for (const file of files) {\n    const fileExt = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n    const fileMime = file.type;\n\n    let isAllowed = false;\n    for (const pattern of allowedTypes) {\n      if (pattern.startsWith('.') && fileExt === pattern) {\n        isAllowed = true;\n        break;\n      }\n      if (pattern.includes('/') && fileMime.match(new RegExp(pattern.replace('*', '.*')))) {\n        isAllowed = true;\n        break;\n      }\n    }\n\n    if (!isAllowed) {\n      return `File type ${fileExt} is not allowed. Allowed types: ${component.filePattern}`;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Validate virus scan (placeholder - requires server-side implementation)\n */\nasync function virusScanValidator(context: any) {\n  const { component, value } = context;\n\n  if (!value || !component.virusScan) {\n    return true;\n  }\n\n  // This would need to call a server-side virus scanning API\n  // For now, we'll just return true\n  return true;\n}\n\n/**\n * Validate image resolution\n */\nfunction imageResolutionValidator(context: any) {\n  const { component, value } = context;\n\n  if (!value || (!component.imageMinResolution && !component.imageMaxResolution)) {\n    return true;\n  }\n\n  const files = Array.isArray(value) ? value : [value];\n\n  for (const file of files) {\n    if (!file.type.startsWith('image/')) {\n      continue;\n    }\n\n    // This would need to load the image and check dimensions\n    // For now, we'll skip this validation\n  }\n\n  return true;\n}\n\n/**\n * Helper function to parse file size strings\n */\nfunction parseFileSize(size: string): number | null {\n  if (!size) return null;\n\n  const units: Record<string, number> = {\n    B: 1,\n    KB: 1024,\n    MB: 1024 * 1024,\n    GB: 1024 * 1024 * 1024,\n    TB: 1024 * 1024 * 1024 * 1024,\n  };\n\n  const match = size.match(/^(\\d+(?:\\.\\d+)?)\\s*([KMGT]?B)$/i);\n  if (!match) return null;\n\n  const value = parseFloat(match[1]);\n  const unit = match[2].toUpperCase();\n\n  return value * (units[unit] || 1);\n}\n\n/**\n * Helper function to parse file patterns\n */\nfunction parseFilePattern(pattern: string): string[] {\n  if (!pattern || pattern === '*') return ['*'];\n\n  return pattern.split(',').map((p) => p.trim());\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/validators/magicNumbers.test.ts","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): packages/formio-file-upload/src/validators/magicNumbers.test.ts"}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Tests for magic number verification\n */\n\nimport { verifyFileType, detectFileType, FILE_SIGNATURES, hasSignatureSupport } from './magicNumbers';\n\ndescribe('magicNumbers', () => {\n  describe('verifyFileType', () => {\n    it('should verify JPEG file signature', async () => {\n      const jpegBytes = new Uint8Array([0xFF, 0xD8, 0xFF, 0xE0, 0x00, 0x10, 0x4A, 0x46]);\n      const file = new File([jpegBytes], 'test.jpg', { type: 'image/jpeg' });\n\n      const result = await verifyFileType(file, 'image/jpeg');\n      expect(result).toBe(true);\n    });\n\n    it('should verify PNG file signature', async () => {\n      const pngBytes = new Uint8Array([0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A]);\n      const file = new File([pngBytes], 'test.png', { type: 'image/png' });\n\n      const result = await verifyFileType(file, 'image/png');\n      expect(result).toBe(true);\n    });\n\n    it('should verify GIF file signature', async () => {\n      const gifBytes = new Uint8Array([0x47, 0x49, 0x46, 0x38, 0x39, 0x61]);\n      const file = new File([gifBytes], 'test.gif', { type: 'image/gif' });\n\n      const result = await verifyFileType(file, 'image/gif');\n      expect(result).toBe(true);\n    });\n\n    it('should verify PDF file signature', async () => {\n      const pdfBytes = new Uint8Array([0x25, 0x50, 0x44, 0x46, 0x2D, 0x31, 0x2E, 0x34]);\n      const file = new File([pdfBytes], 'test.pdf', { type: 'application/pdf' });\n\n      const result = await verifyFileType(file, 'application/pdf');\n      expect(result).toBe(true);\n    });\n\n    it('should reject file with wrong signature', async () => {\n      // PHP file with JPEG extension\n      const phpBytes = new Uint8Array([0x3C, 0x3F, 0x70, 0x68, 0x70]); // <?php\n      const file = new File([phpBytes], 'malicious.jpg', { type: 'image/jpeg' });\n\n      const result = await verifyFileType(file, 'image/jpeg');\n      expect(result).toBe(false);\n    });\n\n    it('should handle files without signature definition', async () => {\n      const unknownBytes = new Uint8Array([0x00, 0x01, 0x02, 0x03]);\n      const file = new File([unknownBytes], 'test.txt', { type: 'text/plain' });\n\n      // Should return true (allow) when no signature defined\n      const result = await verifyFileType(file, 'text/plain');\n      expect(result).toBe(true);\n    });\n\n    it('should verify ZIP file signature', async () => {\n      const zipBytes = new Uint8Array([0x50, 0x4B, 0x03, 0x04]);\n      const file = new File([zipBytes], 'test.zip', { type: 'application/zip' });\n\n      const result = await verifyFileType(file, 'application/zip');\n      expect(result).toBe(true);\n    });\n\n    it('should handle wildcard bytes in signatures', async () => {\n      // WebP has null bytes in signature\n      const webpBytes = new Uint8Array([\n        0x52, 0x49, 0x46, 0x46,  // RIFF\n        0x00, 0x00, 0x00, 0x00,  // File size (wildcard)\n        0x57, 0x45, 0x42, 0x50   // WEBP\n      ]);\n      const file = new File([webpBytes], 'test.webp', { type: 'image/webp' });\n\n      const result = await verifyFileType(file, 'image/webp');\n      expect(result).toBe(true);\n    });\n\n    it('should fail securely on error', async () => {\n      // Simulate error by passing invalid file\n      const result = await verifyFileType(null as any, 'image/jpeg');\n      expect(result).toBe(false);\n    });\n  });\n\n  describe('detectFileType', () => {\n    it('should detect correct MIME type from multiple options', async () => {\n      const jpegBytes = new Uint8Array([0xFF, 0xD8, 0xFF, 0xE0]);\n      const file = new File([jpegBytes], 'unknown.dat', { type: 'application/octet-stream' });\n\n      const allowedTypes = ['image/png', 'image/jpeg', 'image/gif'];\n      const detected = await detectFileType(file, allowedTypes);\n\n      expect(detected).toBe('image/jpeg');\n    });\n\n    it('should return null if no type matches', async () => {\n      const randomBytes = new Uint8Array([0x00, 0x01, 0x02, 0x03]);\n      const file = new File([randomBytes], 'unknown.dat', { type: 'application/octet-stream' });\n\n      const allowedTypes = ['image/png', 'image/jpeg'];\n      const detected = await detectFileType(file, allowedTypes);\n\n      expect(detected).toBeNull();\n    });\n\n    it('should handle empty allowed types', async () => {\n      const jpegBytes = new Uint8Array([0xFF, 0xD8, 0xFF, 0xE0]);\n      const file = new File([jpegBytes], 'test.jpg', { type: 'image/jpeg' });\n\n      const detected = await detectFileType(file, []);\n      expect(detected).toBeNull();\n    });\n  });\n\n  describe('FILE_SIGNATURES', () => {\n    it('should have signatures for common image types', () => {\n      expect(FILE_SIGNATURES['image/jpeg']).toBeDefined();\n      expect(FILE_SIGNATURES['image/png']).toBeDefined();\n      expect(FILE_SIGNATURES['image/gif']).toBeDefined();\n      expect(FILE_SIGNATURES['image/webp']).toBeDefined();\n    });\n\n    it('should have signatures for document types', () => {\n      expect(FILE_SIGNATURES['application/pdf']).toBeDefined();\n    });\n\n    it('should have signatures for archive types', () => {\n      expect(FILE_SIGNATURES['application/zip']).toBeDefined();\n      expect(FILE_SIGNATURES['application/x-rar-compressed']).toBeDefined();\n    });\n\n    it('should have proper signature structure', () => {\n      const jpeg = FILE_SIGNATURES['image/jpeg'];\n      expect(jpeg.mime).toBe('image/jpeg');\n      expect(jpeg.description).toBeTruthy();\n      expect(Array.isArray(jpeg.signatures)).toBe(true);\n      expect(jpeg.signatures.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('hasSignatureSupport', () => {\n    it('should return true for supported types', () => {\n      expect(hasSignatureSupport('image/jpeg')).toBe(true);\n      expect(hasSignatureSupport('image/png')).toBe(true);\n      expect(hasSignatureSupport('application/pdf')).toBe(true);\n    });\n\n    it('should return false for unsupported types', () => {\n      expect(hasSignatureSupport('text/plain')).toBe(false);\n      expect(hasSignatureSupport('application/json')).toBe(false);\n    });\n  });\n\n  describe('Security scenarios', () => {\n    it('should detect MIME type spoofing', async () => {\n      // Executable masquerading as image\n      const exeBytes = new Uint8Array([0x4D, 0x5A]); // MZ header (EXE)\n      const file = new File([exeBytes], 'virus.jpg', { type: 'image/jpeg' });\n\n      const result = await verifyFileType(file, 'image/jpeg');\n      expect(result).toBe(false);\n    });\n\n    it('should detect PHP file with image extension', async () => {\n      const phpBytes = new Uint8Array([0x3C, 0x3F, 0x70, 0x68, 0x70]); // <?php\n      const file = new File([phpBytes], 'shell.gif', { type: 'image/gif' });\n\n      const result = await verifyFileType(file, 'image/gif');\n      expect(result).toBe(false);\n    });\n\n    it('should accept valid image despite suspicious name', async () => {\n      const pngBytes = new Uint8Array([0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A]);\n      const file = new File([pngBytes], 'suspicious.php.png', { type: 'image/png' });\n\n      // Signature should pass (filename sanitization is separate)\n      const result = await verifyFileType(file, 'image/png');\n      expect(result).toBe(true);\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/validators/magicNumbers.ts","messages":[{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":159,"column":23,"nodeType":"MemberExpression","endLine":159,"endColumn":52},{"ruleId":"security/detect-object-injection","severity":2,"message":"Generic Object Injection Sink","line":210,"column":12,"nodeType":"MemberExpression","endLine":210,"endColumn":24},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":228,"column":25,"nodeType":"MemberExpression","endLine":228,"endColumn":50},{"ruleId":"security/detect-object-injection","severity":2,"message":"Variable Assigned to Object Injection Sink","line":252,"column":21,"nodeType":"MemberExpression","endLine":252,"endColumn":46}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Magic Number (File Signature) Verification\n *\n * Validates file types by inspecting actual file content (magic numbers)\n * to prevent MIME type spoofing attacks.\n *\n * Security: Prevents attackers from uploading malicious files by changing\n * the MIME type or file extension.\n */\n\nimport { logger } from '../utils/logger';\n\nexport interface FileSignature {\n  mime: string;\n  signatures: (number | null)[][];\n  description: string;\n}\n\n/**\n * File type signatures (magic numbers)\n * Each signature is an array of byte values at the start of the file\n */\nexport const FILE_SIGNATURES: Record<string, FileSignature> = {\n  // Images\n  'image/jpeg': {\n    mime: 'image/jpeg',\n    signatures: [\n      [0xff, 0xd8, 0xff, 0xdb], // JPEG raw\n      [0xff, 0xd8, 0xff, 0xe0], // JPEG JFIF\n      [0xff, 0xd8, 0xff, 0xe1], // JPEG EXIF\n      [0xff, 0xd8, 0xff, 0xe2], // JPEG still\n      [0xff, 0xd8, 0xff, 0xe3], // JPEG Samsung\n    ],\n    description: 'JPEG Image',\n  },\n  'image/png': {\n    mime: 'image/png',\n    signatures: [[0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a]],\n    description: 'PNG Image',\n  },\n  'image/gif': {\n    mime: 'image/gif',\n    signatures: [\n      [0x47, 0x49, 0x46, 0x38, 0x37, 0x61], // GIF87a\n      [0x47, 0x49, 0x46, 0x38, 0x39, 0x61], // GIF89a\n    ],\n    description: 'GIF Image',\n  },\n  'image/webp': {\n    mime: 'image/webp',\n    signatures: [[0x52, 0x49, 0x46, 0x46, null, null, null, null, 0x57, 0x45, 0x42, 0x50]],\n    description: 'WebP Image',\n  },\n  'image/bmp': {\n    mime: 'image/bmp',\n    signatures: [[0x42, 0x4d]],\n    description: 'BMP Image',\n  },\n  'image/tiff': {\n    mime: 'image/tiff',\n    signatures: [\n      [0x49, 0x49, 0x2a, 0x00], // Little-endian\n      [0x4d, 0x4d, 0x00, 0x2a], // Big-endian\n    ],\n    description: 'TIFF Image',\n  },\n\n  // Documents\n  'application/pdf': {\n    mime: 'application/pdf',\n    signatures: [\n      [0x25, 0x50, 0x44, 0x46, 0x2d], // %PDF-\n    ],\n    description: 'PDF Document',\n  },\n\n  // Archives\n  'application/zip': {\n    mime: 'application/zip',\n    signatures: [\n      [0x50, 0x4b, 0x03, 0x04], // ZIP local file header\n      [0x50, 0x4b, 0x05, 0x06], // ZIP empty archive\n      [0x50, 0x4b, 0x07, 0x08], // ZIP spanned archive\n    ],\n    description: 'ZIP Archive',\n  },\n  'application/x-rar-compressed': {\n    mime: 'application/x-rar-compressed',\n    signatures: [\n      [0x52, 0x61, 0x72, 0x21, 0x1a, 0x07, 0x00], // RAR v1.5+\n      [0x52, 0x61, 0x72, 0x21, 0x1a, 0x07, 0x01, 0x00], // RAR v5.0+\n    ],\n    description: 'RAR Archive',\n  },\n  'application/x-7z-compressed': {\n    mime: 'application/x-7z-compressed',\n    signatures: [[0x37, 0x7a, 0xbc, 0xaf, 0x27, 0x1c]],\n    description: '7-Zip Archive',\n  },\n\n  // Microsoft Office (ZIP-based)\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document': {\n    mime: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n    signatures: [\n      [0x50, 0x4b, 0x03, 0x04], // ZIP (needs content inspection)\n    ],\n    description: 'Microsoft Word Document (DOCX)',\n  },\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': {\n    mime: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n    signatures: [\n      [0x50, 0x4b, 0x03, 0x04], // ZIP (needs content inspection)\n    ],\n    description: 'Microsoft Excel Spreadsheet (XLSX)',\n  },\n\n  // Video\n  'video/mp4': {\n    mime: 'video/mp4',\n    signatures: [\n      [0x00, 0x00, 0x00, null, 0x66, 0x74, 0x79, 0x70], // ftyp\n    ],\n    description: 'MP4 Video',\n  },\n  'video/webm': {\n    mime: 'video/webm',\n    signatures: [[0x1a, 0x45, 0xdf, 0xa3]],\n    description: 'WebM Video',\n  },\n\n  // Audio\n  'audio/mpeg': {\n    mime: 'audio/mpeg',\n    signatures: [\n      [0xff, 0xfb], // MP3 with MPEG-1 Layer 3\n      [0xff, 0xf3], // MP3 with MPEG-2 Layer 3\n      [0xff, 0xf2], // MP3 with MPEG-2.5 Layer 3\n      [0x49, 0x44, 0x33], // MP3 with ID3v2\n    ],\n    description: 'MP3 Audio',\n  },\n  'audio/wav': {\n    mime: 'audio/wav',\n    signatures: [[0x52, 0x49, 0x46, 0x46, null, null, null, null, 0x57, 0x41, 0x56, 0x45]],\n    description: 'WAV Audio',\n  },\n};\n\n/**\n * Verify file type by checking magic numbers\n *\n * @param file - File to verify\n * @param expectedType - Expected MIME type\n * @returns Promise<boolean> - True if file matches expected type\n */\nexport async function verifyFileType(file: File, expectedType: string): Promise<boolean> {\n  try {\n    // Get file signature from database\n    const signature = FILE_SIGNATURES[expectedType];\n\n    // If no signature defined, allow the file (fallback to MIME check only)\n    if (!signature) {\n      logger.warn(`[Security] No signature defined for MIME type: ${expectedType}`);\n      return true;\n    }\n\n    // Read enough bytes to check signature (12 bytes covers most formats)\n    const buffer = await file.slice(0, 12).arrayBuffer();\n    const bytes = new Uint8Array(buffer);\n\n    // Check if file matches any of the valid signatures\n    const isValid = signature.signatures.some((sig) => matchesSignature(bytes, sig));\n\n    if (!isValid) {\n      logger.warn(`[Security] File signature mismatch for ${file.name}`, {\n        declaredType: expectedType,\n        fileBytes: Array.from(bytes.slice(0, 8))\n          .map((b) => `0x${b.toString(16).toUpperCase().padStart(2, '0')}`)\n          .join(' '),\n        expectedSignatures: signature.signatures.map((s) =>\n          s\n            .map((b) => (b === null ? 'XX' : `0x${b.toString(16).toUpperCase().padStart(2, '0')}`))\n            .join(' ')\n        ),\n      });\n    }\n\n    return isValid;\n  } catch (error) {\n    logger.error('[Security] Error verifying file type:', { error });\n    // Fail securely: reject file if verification fails\n    return false;\n  }\n}\n\n/**\n * Check if file bytes match a signature pattern\n *\n * @param bytes - File bytes to check\n * @param signature - Expected signature (null = any byte)\n * @returns boolean - True if matches\n */\nfunction matchesSignature(bytes: Uint8Array, signature: (number | null)[]): boolean {\n  return signature.every((expectedByte, index) => {\n    // null means \"any byte\" (wildcard)\n    if (expectedByte === null) {\n      return true;\n    }\n    // Check if byte matches\n    return bytes[index] === expectedByte;\n  });\n}\n\n/**\n * Verify multiple file types (for files with ambiguous extensions)\n *\n * @param file - File to verify\n * @param allowedTypes - Array of allowed MIME types\n * @returns Promise<string | null> - Detected MIME type or null if no match\n */\nexport async function detectFileType(file: File, allowedTypes: string[]): Promise<string | null> {\n  try {\n    const buffer = await file.slice(0, 12).arrayBuffer();\n    const bytes = new Uint8Array(buffer);\n\n    // Check each allowed type\n    for (const mimeType of allowedTypes) {\n      const signature = FILE_SIGNATURES[mimeType];\n      if (!signature) continue;\n\n      const matches = signature.signatures.some((sig) => matchesSignature(bytes, sig));\n\n      if (matches) {\n        return mimeType;\n      }\n    }\n\n    return null;\n  } catch (error) {\n    logger.error('[Security] Error detecting file type:', { error });\n    return null;\n  }\n}\n\n/**\n * Get human-readable file type description\n *\n * @param mimeType - MIME type\n * @returns string - Description or MIME type\n */\nexport function getFileTypeDescription(mimeType: string): string {\n  const signature = FILE_SIGNATURES[mimeType];\n  return signature?.description || mimeType;\n}\n\n/**\n * Check if file type has magic number support\n *\n * @param mimeType - MIME type to check\n * @returns boolean - True if signatures are defined\n */\nexport function hasSignatureSupport(mimeType: string): boolean {\n  return mimeType in FILE_SIGNATURES;\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/validators/sanitizeFilename.test.ts","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): packages/formio-file-upload/src/validators/sanitizeFilename.test.ts"}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Tests for filename sanitization\n */\n\nimport {\n  sanitizeFilename,\n  validateFilename,\n  generateSafeFallbackName,\n  extractExtension,\n  hasAllowedExtension,\n  DANGEROUS_EXTENSIONS,\n} from './sanitizeFilename';\n\ndescribe('sanitizeFilename', () => {\n  describe('basic sanitization', () => {\n    it('should sanitize safe filename', () => {\n      const result = sanitizeFilename('document.pdf', { addTimestamp: false });\n      expect(result).toBe('document.pdf');\n    });\n\n    it('should remove path traversal attacks', () => {\n      const result = sanitizeFilename('../../../etc/passwd', { addTimestamp: false });\n      expect(result).not.toContain('..');\n      expect(result).not.toContain('/');\n    });\n\n    it('should remove dangerous characters', () => {\n      const result = sanitizeFilename('file<>:|\"*.txt', { addTimestamp: false });\n      expect(result).not.toContain('<');\n      expect(result).not.toContain('>');\n      expect(result).not.toContain(':');\n      expect(result).not.toContain('|');\n      expect(result).not.toContain('\"');\n      expect(result).not.toContain('*');\n    });\n\n    it('should remove null bytes', () => {\n      const result = sanitizeFilename('file\\0name.txt', { addTimestamp: false });\n      expect(result).not.toContain('\\0');\n    });\n\n    it('should trim leading/trailing dots and spaces', () => {\n      const result = sanitizeFilename('  ..filename.txt  ', { addTimestamp: false });\n      expect(result).not.toMatch(/^\\./);\n      expect(result).not.toMatch(/^\\s/);\n      expect(result).not.toMatch(/\\s$/);\n    });\n  });\n\n  describe('dangerous extensions', () => {\n    it('should detect .php extension', () => {\n      const result = sanitizeFilename('malicious.php', { addTimestamp: false });\n      expect(result).not.toContain('.php');\n      expect(result).toContain('.safe');\n    });\n\n    it('should detect double extensions (.jpg.php)', () => {\n      const result = sanitizeFilename('image.jpg.php', { addTimestamp: false });\n      expect(result).not.toContain('.php');\n    });\n\n    it('should detect .exe extension', () => {\n      const result = sanitizeFilename('virus.exe', { addTimestamp: false });\n      expect(result).not.toContain('.exe');\n    });\n\n    it('should detect .sh scripts', () => {\n      const result = sanitizeFilename('script.sh', { addTimestamp: false });\n      expect(result).not.toContain('.sh');\n    });\n\n    it('should preserve safe extensions', () => {\n      const safeFiles = ['image.jpg', 'document.pdf', 'data.json', 'style.css'];\n      safeFiles.forEach(filename => {\n        const result = sanitizeFilename(filename, { addTimestamp: false });\n        const ext = filename.substring(filename.lastIndexOf('.'));\n        expect(result).toContain(ext);\n      });\n    });\n  });\n\n  describe('length limits', () => {\n    it('should truncate long filenames', () => {\n      const longName = 'a'.repeat(300) + '.txt';\n      const result = sanitizeFilename(longName, { addTimestamp: false });\n      expect(result.length).toBeLessThanOrEqual(255);\n    });\n\n    it('should preserve extension when truncating', () => {\n      const longName = 'a'.repeat(300) + '.pdf';\n      const result = sanitizeFilename(longName, { addTimestamp: false });\n      expect(result).toContain('.pdf');\n    });\n\n    it('should handle custom max length', () => {\n      const longName = 'a'.repeat(100) + '.txt';\n      const result = sanitizeFilename(longName, {\n        addTimestamp: false,\n        maxLength: 50\n      });\n      expect(result.length).toBeLessThanOrEqual(54); // 50 + .txt\n    });\n  });\n\n  describe('reserved names', () => {\n    it('should detect Windows reserved names', () => {\n      const reserved = ['CON', 'PRN', 'AUX', 'NUL', 'COM1', 'LPT1'];\n      reserved.forEach(name => {\n        const result = sanitizeFilename(`${name}.txt`, { addTimestamp: false });\n        expect(result).toContain('file_');\n      });\n    });\n\n    it('should handle case-insensitive reserved names', () => {\n      const result = sanitizeFilename('con.txt', { addTimestamp: false });\n      expect(result).toContain('file_');\n    });\n  });\n\n  describe('options', () => {\n    it('should add timestamp when enabled', () => {\n      const result = sanitizeFilename('test.txt', { addTimestamp: true });\n      expect(result).toMatch(/test_\\d+\\.txt/);\n    });\n\n    it('should not add timestamp when disabled', () => {\n      const result = sanitizeFilename('test.txt', { addTimestamp: false });\n      expect(result).toBe('test.txt');\n    });\n\n    it('should convert to lowercase when requested', () => {\n      const result = sanitizeFilename('MyFile.PDF', {\n        addTimestamp: false,\n        lowercase: true\n      });\n      expect(result).toBe('myfile.pdf');\n    });\n\n    it('should use custom replacement character', () => {\n      const result = sanitizeFilename('file:name.txt', {\n        addTimestamp: false,\n        replacement: '-'\n      });\n      expect(result).toContain('-');\n      expect(result).not.toContain(':');\n    });\n\n    it('should preserve extension when dangerous and preserveExtension=true', () => {\n      const result = sanitizeFilename('file.php', {\n        addTimestamp: false,\n        preserveExtension: true\n      });\n      expect(result).toContain('.php');\n    });\n  });\n\n  describe('edge cases', () => {\n    it('should handle empty filename', () => {\n      const result = sanitizeFilename('');\n      expect(result).toBeTruthy();\n      expect(result).toMatch(/^file_\\d+_[a-z0-9]+$/);\n    });\n\n    it('should handle filename with no extension', () => {\n      const result = sanitizeFilename('README', { addTimestamp: false });\n      expect(result).toBe('README');\n    });\n\n    it('should handle filename with multiple dots', () => {\n      const result = sanitizeFilename('archive.tar.gz', { addTimestamp: false });\n      expect(result).toContain('.gz');\n    });\n\n    it('should handle Unicode characters', () => {\n      const result = sanitizeFilename('文档.pdf', {\n        addTimestamp: false,\n        allowUnicode: true\n      });\n      expect(result).toContain('文档');\n    });\n\n    it('should remove Unicode when not allowed', () => {\n      const result = sanitizeFilename('文档.pdf', {\n        addTimestamp: false,\n        allowUnicode: false\n      });\n      expect(result).not.toContain('文档');\n    });\n\n    it('should handle null input', () => {\n      const result = sanitizeFilename(null as any);\n      expect(result).toBeTruthy();\n      expect(result).toMatch(/^file_\\d+_[a-z0-9]+$/);\n    });\n\n    it('should handle undefined input', () => {\n      const result = sanitizeFilename(undefined as any);\n      expect(result).toBeTruthy();\n    });\n  });\n\n  describe('validateFilename', () => {\n    it('should validate safe filename', () => {\n      const result = validateFilename('document.pdf');\n      expect(result.valid).toBe(true);\n      expect(result.errors).toHaveLength(0);\n    });\n\n    it('should detect null bytes', () => {\n      const result = validateFilename('file\\0name.txt');\n      expect(result.valid).toBe(false);\n      expect(result.errors).toContain('Filename contains null bytes');\n    });\n\n    it('should detect path traversal', () => {\n      const result = validateFilename('../../etc/passwd');\n      expect(result.valid).toBe(false);\n      expect(result.errors).toContain('Filename contains path traversal patterns');\n    });\n\n    it('should detect dangerous characters in sanitized input', () => {\n      // validateFilename is called AFTER sanitization in production\n      // Test that it validates the clean filename correctly\n      const sanitized = sanitizeFilename('file<>name.txt', { addTimestamp: false });\n      const result = validateFilename(sanitized);\n      expect(result.valid).toBe(true); // After sanitization, it should be valid\n      expect(sanitized).not.toContain('<');\n      expect(sanitized).not.toContain('>');\n    });\n\n    it('should detect dangerous extensions', () => {\n      const result = validateFilename('malicious.php');\n      expect(result.valid).toBe(false);\n      expect(result.errors).toContain('Filename contains dangerous extension');\n    });\n\n    it('should detect too long filename', () => {\n      const longName = 'a'.repeat(300) + '.txt';\n      const result = validateFilename(longName);\n      expect(result.valid).toBe(false);\n      expect(result.errors.some(e => e.includes('too long'))).toBe(true);\n    });\n\n    it('should detect reserved names', () => {\n      const result = validateFilename('CON.txt');\n      expect(result.valid).toBe(false);\n      expect(result.errors).toContain('Filename is a reserved system name');\n    });\n  });\n\n  describe('extractExtension', () => {\n    it('should extract extension with dot', () => {\n      expect(extractExtension('file.txt')).toBe('.txt');\n      expect(extractExtension('image.jpg')).toBe('.jpg');\n    });\n\n    it('should handle no extension', () => {\n      expect(extractExtension('README')).toBe('');\n    });\n\n    it('should handle multiple dots', () => {\n      expect(extractExtension('archive.tar.gz')).toBe('.gz');\n    });\n\n    it('should sanitize dangerous extensions', () => {\n      expect(extractExtension('malicious.php')).toBe('.safe');\n    });\n\n    it('should handle empty input', () => {\n      expect(extractExtension('')).toBe('');\n    });\n  });\n\n  describe('hasAllowedExtension', () => {\n    it('should check against allowed list', () => {\n      const allowed = ['.jpg', '.png', '.gif'];\n      expect(hasAllowedExtension('image.jpg', allowed)).toBe(true);\n      expect(hasAllowedExtension('image.png', allowed)).toBe(true);\n      expect(hasAllowedExtension('document.pdf', allowed)).toBe(false);\n    });\n\n    it('should handle extensions without dots', () => {\n      const allowed = ['jpg', 'png'];\n      expect(hasAllowedExtension('image.jpg', allowed)).toBe(true);\n    });\n\n    it('should be case-insensitive', () => {\n      const allowed = ['.JPG'];\n      expect(hasAllowedExtension('image.jpg', allowed)).toBe(true);\n    });\n  });\n\n  describe('generateSafeFallbackName', () => {\n    it('should generate unique names', () => {\n      const name1 = generateSafeFallbackName();\n      const name2 = generateSafeFallbackName();\n      expect(name1).not.toBe(name2);\n    });\n\n    it('should match safe pattern', () => {\n      const name = generateSafeFallbackName();\n      expect(name).toMatch(/^file_\\d+_[a-z0-9]+$/);\n    });\n  });\n\n  describe('security scenarios', () => {\n    it('should prevent directory traversal', () => {\n      const attacks = [\n        '../../../etc/passwd',\n        '..\\\\..\\\\..\\\\windows\\\\system32\\\\config\\\\sam',\n        'uploads/../../../etc/passwd',\n      ];\n\n      attacks.forEach(attack => {\n        const result = sanitizeFilename(attack, { addTimestamp: false });\n        expect(result).not.toContain('..');\n        expect(result).not.toContain('/');\n        expect(result).not.toContain('\\\\');\n      });\n    });\n\n    it('should prevent double extension attacks', () => {\n      const attacks = [\n        'shell.php.jpg',\n        'backdoor.asp.png',\n        'exploit.jsp.gif',\n      ];\n\n      attacks.forEach(attack => {\n        const result = sanitizeFilename(attack, { addTimestamp: false });\n        DANGEROUS_EXTENSIONS.forEach(ext => {\n          expect(result.toLowerCase()).not.toContain(ext);\n        });\n      });\n    });\n\n    it('should prevent XSS in filenames', () => {\n      const attacks = [\n        '<script>alert(\"xss\")</script>.jpg',\n        'image\"><script>alert(1)</script>.png',\n        'file\\' onclick=\"alert(1)\".pdf',\n      ];\n\n      attacks.forEach(attack => {\n        const result = sanitizeFilename(attack, { addTimestamp: false });\n        expect(result).not.toContain('<');\n        expect(result).not.toContain('>');\n        expect(result).not.toContain('\"');\n        expect(result).not.toContain(\"'\");\n      });\n    });\n\n    it('should prevent null byte injection', () => {\n      const result = sanitizeFilename('shell.php\\0.jpg', { addTimestamp: false });\n      expect(result).not.toContain('\\0');\n      expect(result).not.toContain('.php');\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/src/validators/sanitizeFilename.ts","messages":[{"ruleId":"unicorn/better-regex","severity":2,"message":"/[<>:\"/\\\\|?*'\\x00-\\x1f\\x7f]/g can be optimized to /[\\x00-\\x1f\"'*/:<>?\\\\|\\x7f]/g.","line":82,"column":32,"nodeType":"Literal","messageId":"better-regex","endLine":82,"endColumn":61,"fix":{"range":[1181,1210],"text":"/[\\x00-\\x1f\"'*/:<>?\\\\|\\x7f]/g"}},{"ruleId":"unicorn/escape-case","severity":2,"message":"Use uppercase characters for the value of the escape sequence.","line":82,"column":32,"nodeType":"Literal","messageId":"escape-case","endLine":82,"endColumn":61,"fix":{"range":[1181,1210],"text":"/[<>:\"/\\\\|?*'\\x00-\\x1F\\x7F]/g"}},{"ruleId":"no-control-regex","severity":2,"message":"Unexpected control character(s) in regular expression: \\x00, \\x1f.","line":82,"column":32,"nodeType":"Literal","messageId":"unexpected","endLine":82,"endColumn":61},{"ruleId":"sonarjs/cognitive-complexity","severity":2,"message":"Refactor this function to reduce its Cognitive Complexity from 16 to the 15 allowed.","line":167,"column":17,"nodeType":null,"messageId":"refactorFunction","endLine":167,"endColumn":33},{"ruleId":"prefer-template","severity":2,"message":"Unexpected string concatenation.","line":225,"column":13,"nodeType":"BinaryExpression","messageId":"unexpectedStringConcatenation","endLine":225,"endColumn":46,"fix":{"range":[4162,4195],"text":"`${ext.replace(/\\./g, '_')  }.safe`"}},{"ruleId":"no-control-regex","severity":2,"message":"Unexpected control character(s) in regular expression: \\x00.","line":238,"column":25,"nodeType":"Literal","messageId":"unexpected","endLine":238,"endColumn":40},{"ruleId":"no-control-regex","severity":2,"message":"Unexpected control character(s) in regular expression: \\x00.","line":239,"column":23,"nodeType":"Literal","messageId":"unexpected","endLine":239,"endColumn":38},{"ruleId":"unicorn/better-regex","severity":2,"message":"/^[.\\s]+|[.\\s]+$/g can be optimized to /^[\\s.]+|[\\s.]+$/g.","line":243,"column":23,"nodeType":"Literal","messageId":"better-regex","endLine":243,"endColumn":41,"fix":{"range":[4717,4735],"text":"/^[\\s.]+|[\\s.]+$/g"}},{"ruleId":"unicorn/better-regex","severity":2,"message":"/^[.\\s]+|[.\\s]+$/g can be optimized to /^[\\s.]+|[\\s.]+$/g.","line":244,"column":21,"nodeType":"Literal","messageId":"better-regex","endLine":244,"endColumn":39,"fix":{"range":[4762,4780],"text":"/^[\\s.]+|[\\s.]+$/g"}},{"ruleId":"security/detect-non-literal-regexp","severity":2,"message":"Found non-literal argument to RegExp Constructor","line":254,"column":31,"nodeType":"NewExpression","endLine":254,"endColumn":81},{"ruleId":"security/detect-non-literal-regexp","severity":2,"message":"Found non-literal argument to RegExp Constructor","line":273,"column":25,"nodeType":"NewExpression","endLine":273,"endColumn":68},{"ruleId":"prefer-template","severity":2,"message":"Unexpected string concatenation.","line":278,"column":11,"nodeType":"BinaryExpression","messageId":"unexpectedStringConcatenation","endLine":278,"endColumn":20,"fix":{"range":[5853,5862],"text":"`.${  ext}`"}},{"ruleId":"no-unused-vars","severity":2,"message":"'_options' is assigned a value but never used.","line":315,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":315,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"_options"},"fix":{"range":[6702,6738],"text":""},"desc":"Remove unused variable '_options'."}]},{"ruleId":"prefer-template","severity":2,"message":"Unexpected string concatenation.","line":345,"column":68,"nodeType":"BinaryExpression","messageId":"unexpectedStringConcatenation","endLine":345,"endColumn":77,"fix":{"range":[7553,7562],"text":"`${ext  }.`"}},{"ruleId":"unicorn/better-regex","severity":2,"message":"/[.*+?^${}()|[\\]\\\\]/g can be optimized to /[$()*+.?[\\\\\\]^{|}]/g.","line":387,"column":22,"nodeType":"Literal","messageId":"better-regex","endLine":387,"endColumn":43,"fix":{"range":[8552,8573],"text":"/[$()*+.?[\\\\\\]^{|}]/g"}},{"ruleId":"prefer-template","severity":2,"message":"Unexpected string concatenation.","line":432,"column":43,"nodeType":"BinaryExpression","messageId":"unexpectedStringConcatenation","endLine":432,"endColumn":64,"fix":{"range":[9646,9667],"text":"`.${  e.toLowerCase()}`"}}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":9,"fixableWarningCount":0,"source":"/**\n * Filename Sanitization Utilities\n *\n * Prevents security vulnerabilities related to malicious filenames:\n * - Path traversal attacks (../../etc/passwd)\n * - Double extension attacks (.jpg.php)\n * - Special character exploits\n * - Null byte injection\n * - XSS in filenames\n */\n\nimport { logger } from '../utils/logger';\n\n/**\n * Dangerous file extensions that should never be allowed\n */\nexport const DANGEROUS_EXTENSIONS = [\n  // Executables\n  '.exe',\n  '.com',\n  '.bat',\n  '.cmd',\n  '.sh',\n  '.bash',\n  '.zsh',\n\n  // Scripts\n  '.js',\n  '.mjs',\n  '.cjs',\n  '.vbs',\n  '.vbe',\n  '.ps1',\n  '.psm1',\n\n  // Server-side code\n  '.php',\n  '.php3',\n  '.php4',\n  '.php5',\n  '.phtml',\n  '.phps',\n  '.asp',\n  '.aspx',\n  '.jsp',\n  '.jspx',\n  '.cgi',\n  '.pl',\n  '.py',\n  '.rb',\n\n  // Configuration files\n  '.htaccess',\n  '.htpasswd',\n  '.ini',\n  '.conf',\n\n  // Compressed executables\n  '.scr',\n  '.pif',\n  '.application',\n  '.gadget',\n  '.msi',\n  '.msp',\n  '.jar',\n  '.war',\n  '.ear',\n\n  // Links and shortcuts\n  '.lnk',\n  '.url',\n  '.desktop',\n\n  // Web archives that can execute\n  '.hta',\n  '.htr',\n];\n\n/**\n * Characters that are dangerous in filenames\n */\nexport const DANGEROUS_CHARS = /[<>:\"/\\\\|?*'\\x00-\\x1f\\x7f]/g;\n\n/**\n * Path traversal patterns\n */\nexport const PATH_TRAVERSAL = /\\.\\.[/\\\\]/g;\n\n/**\n * Maximum safe filename length (POSIX standard is 255 bytes)\n */\nexport const MAX_FILENAME_LENGTH = 255;\n\n/**\n * Reserved Windows filenames\n */\nexport const RESERVED_NAMES = [\n  'CON',\n  'PRN',\n  'AUX',\n  'NUL',\n  'COM1',\n  'COM2',\n  'COM3',\n  'COM4',\n  'COM5',\n  'COM6',\n  'COM7',\n  'COM8',\n  'COM9',\n  'LPT1',\n  'LPT2',\n  'LPT3',\n  'LPT4',\n  'LPT5',\n  'LPT6',\n  'LPT7',\n  'LPT8',\n  'LPT9',\n];\n\nexport interface SanitizeOptions {\n  /**\n   * Replace dangerous characters with this string\n   * @default '_'\n   */\n  replacement?: string;\n\n  /**\n   * Maximum filename length (without extension)\n   * @default 200\n   */\n  maxLength?: number;\n\n  /**\n   * Preserve original extension even if dangerous\n   * @default false\n   */\n  preserveExtension?: boolean;\n\n  /**\n   * Add timestamp to prevent collisions\n   * @default true\n   */\n  addTimestamp?: boolean;\n\n  /**\n   * Convert to lowercase\n   * @default false\n   */\n  lowercase?: boolean;\n\n  /**\n   * Allow Unicode characters\n   * @default true\n   */\n  allowUnicode?: boolean;\n}\n\n/**\n * Sanitize filename to prevent security vulnerabilities\n *\n * @param filename - Original filename\n * @param options - Sanitization options\n * @returns Sanitized filename\n */\nexport function sanitizeFilename(filename: string, options: SanitizeOptions = {}): string {\n  const {\n    replacement = '_',\n    maxLength = 200,\n    preserveExtension = false,\n    addTimestamp = true,\n    lowercase = false,\n    allowUnicode = true,\n  } = options;\n\n  if (!filename || typeof filename !== 'string') {\n    return generateSafeFallbackName();\n  }\n\n  let safe = filename;\n\n  // Remove null bytes (security risk)\n  safe = safe.replace(/\\0/g, '');\n\n  // Remove any path components (path traversal prevention)\n  safe = safe.replace(/^.*[/\\\\]/, '');\n\n  // Remove path traversal patterns\n  safe = safe.replace(PATH_TRAVERSAL, replacement);\n\n  // Split into name and extension\n  const lastDotIndex = safe.lastIndexOf('.');\n  let name = lastDotIndex > 0 ? safe.substring(0, lastDotIndex) : safe;\n  let ext = lastDotIndex > 0 ? safe.substring(lastDotIndex) : '';\n\n  // Convert to lowercase if requested\n  if (lowercase) {\n    name = name.toLowerCase();\n    ext = ext.toLowerCase();\n  }\n\n  // Check for dangerous double extensions\n  if (!preserveExtension) {\n    const dangerousExtFound = DANGEROUS_EXTENSIONS.some((dangerousExt) => {\n      const extLower = ext.toLowerCase();\n      const nameLower = name.toLowerCase();\n\n      // Check if extension is dangerous\n      if (extLower === dangerousExt) {\n        return true;\n      }\n\n      // Check for double extension (.jpg.php)\n      if (nameLower.endsWith(dangerousExt)) {\n        return true;\n      }\n\n      return false;\n    });\n\n    if (dangerousExtFound) {\n      logger.warn(`[Security] Dangerous extension detected in: ${filename}`);\n      // Replace dangerous extension with safe marker\n      ext = ext.replace(/\\./g, '_') + '.safe';\n      name = name.replace(/\\./g, '_');\n    }\n  }\n\n  // Replace dangerous characters in name\n  name = name.replace(DANGEROUS_CHARS, replacement);\n\n  // Replace dangerous characters in extension\n  ext = ext.replace(DANGEROUS_CHARS, replacement);\n\n  // Remove non-ASCII characters if not allowed\n  if (!allowUnicode) {\n    name = name.replace(/[^\\x00-\\x7F]/g, replacement);\n    ext = ext.replace(/[^\\x00-\\x7F]/g, replacement);\n  }\n\n  // Remove leading/trailing dots and spaces (Windows compatibility)\n  name = name.replace(/^[.\\s]+|[.\\s]+$/g, '');\n  ext = ext.replace(/^[.\\s]+|[.\\s]+$/g, '');\n\n  // Check for reserved Windows names\n  const nameUpper = name.toUpperCase();\n  if (RESERVED_NAMES.includes(nameUpper)) {\n    logger.warn(`[Security] Reserved Windows filename detected: ${name}`);\n    name = `file_${name}`;\n  }\n\n  // Collapse multiple replacements\n  const multipleReplacement = new RegExp(`${escapeRegex(replacement)}{2,}`, 'g');\n  name = name.replace(multipleReplacement, replacement);\n\n  // Ensure name is not empty\n  if (!name || name === replacement) {\n    name = 'unnamed';\n  }\n\n  // Add timestamp to prevent collisions\n  if (addTimestamp) {\n    const timestamp = Date.now();\n    name = `${name}_${timestamp}`;\n  }\n\n  // Enforce length limit (leave room for extension)\n  const maxNameLength = Math.min(maxLength, MAX_FILENAME_LENGTH - ext.length - 1);\n  if (name.length > maxNameLength) {\n    name = name.substring(0, maxNameLength);\n    // Remove trailing replacement character\n    name = name.replace(new RegExp(`${escapeRegex(replacement)}+$`), '');\n  }\n\n  // Ensure extension starts with dot\n  if (ext && !ext.startsWith('.')) {\n    ext = '.' + ext;\n  }\n\n  // Combine name and extension\n  const sanitized = name + ext;\n\n  // Final validation\n  if (sanitized.length > MAX_FILENAME_LENGTH) {\n    logger.warn(`[Security] Filename too long after sanitization: ${sanitized.length} bytes`);\n    return generateSafeFallbackName();\n  }\n\n  // Log if filename was changed significantly\n  if (sanitized !== filename) {\n    logger.info(`[Security] Filename sanitized: \"${filename}\" -> \"${sanitized}\"`);\n  }\n\n  return sanitized;\n}\n\nexport interface ValidationOptions {\n  /**\n   * Validate raw filename without sanitization\n   * @default false\n   */\n  raw?: boolean;\n}\n\n/**\n * Check if filename contains dangerous patterns\n *\n * @param filename - Filename to check\n * @param options - Validation options\n * @returns Object with validation result\n */\nexport function validateFilename(\n  filename: string,\n  _options: ValidationOptions = {}\n): {\n  valid: boolean;\n  errors: string[];\n} {\n  const errors: string[] = [];\n\n  if (!filename || typeof filename !== 'string') {\n    errors.push('Filename is empty or invalid');\n    return { valid: false, errors };\n  }\n\n  // Check for null bytes\n  if (filename.includes('\\0')) {\n    errors.push('Filename contains null bytes');\n  }\n\n  // Check for path traversal\n  if (PATH_TRAVERSAL.test(filename)) {\n    errors.push('Filename contains path traversal patterns');\n  }\n\n  // Check for dangerous characters\n  if (DANGEROUS_CHARS.test(filename)) {\n    errors.push('Filename contains dangerous characters');\n  }\n\n  // Check for dangerous extensions\n  const filenameLower = filename.toLowerCase();\n  const hasDangerousExt = DANGEROUS_EXTENSIONS.some(\n    (ext) => filenameLower.endsWith(ext) || filenameLower.includes(ext + '.')\n  );\n\n  if (hasDangerousExt) {\n    errors.push('Filename contains dangerous extension');\n  }\n\n  // Check length\n  if (filename.length > MAX_FILENAME_LENGTH) {\n    errors.push(`Filename too long (${filename.length} > ${MAX_FILENAME_LENGTH})`);\n  }\n\n  // Check for reserved names\n  const nameWithoutExt = filename.substring(0, filename.lastIndexOf('.'));\n  if (RESERVED_NAMES.includes(nameWithoutExt.toUpperCase())) {\n    errors.push('Filename is a reserved system name');\n  }\n\n  return {\n    valid: errors.length === 0,\n    errors,\n  };\n}\n\n/**\n * Generate a safe fallback filename\n *\n * @returns Safe filename with timestamp\n */\nexport function generateSafeFallbackName(): string {\n  const timestamp = Date.now();\n  const random = Math.random().toString(36).substring(2, 8);\n  return `file_${timestamp}_${random}`;\n}\n\n/**\n * Escape special regex characters\n *\n * @param str - String to escape\n * @returns Escaped string\n */\nfunction escapeRegex(str: string): string {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\n/**\n * Extract safe extension from filename\n *\n * @param filename - Filename\n * @returns Extension (with dot) or empty string\n */\nexport function extractExtension(filename: string): string {\n  if (!filename || typeof filename !== 'string') {\n    return '';\n  }\n\n  const lastDot = filename.lastIndexOf('.');\n  if (lastDot === -1 || lastDot === 0) {\n    return '';\n  }\n\n  let ext = filename.substring(lastDot);\n\n  // Sanitize extension\n  ext = ext.replace(DANGEROUS_CHARS, '_');\n  ext = ext.toLowerCase();\n\n  // Check if dangerous\n  if (DANGEROUS_EXTENSIONS.includes(ext)) {\n    return '.safe';\n  }\n\n  return ext;\n}\n\n/**\n * Check if extension is in allowed list\n *\n * @param filename - Filename\n * @param allowedExtensions - Array of allowed extensions (with or without dot)\n * @returns boolean\n */\nexport function hasAllowedExtension(filename: string, allowedExtensions: string[]): boolean {\n  const ext = extractExtension(filename);\n  if (!ext) return false;\n\n  const normalizedAllowed = allowedExtensions.map((e) =>\n    e.startsWith('.') ? e.toLowerCase() : '.' + e.toLowerCase()\n  );\n\n  return normalizedAllowed.includes(ext);\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/test_actual_error.test.ts","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): packages/formio-file-upload/test_actual_error.test.ts"}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { calculateFileChecksum } from './src/validators/fileIntegrity';\n\ndescribe('Debug fileIntegrity', () => {\n  it('should show actual error', async () => {\n    const file = new File(['Hello World'], 'test.txt', { type: 'text/plain' });\n    const result = await calculateFileChecksum(file);\n    \n    console.log('Full result:', JSON.stringify(result, null, 2));\n    console.log('Valid:', result.valid);\n    console.log('Error:', result.error);\n    console.log('Checksum:', result.checksum);\n    \n    expect(result.valid).toBe(true);\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]},{"filePath":"/Users/mishal/code/worktrees/formio-monorepo-20251009/packages/formio-file-upload/test_textencoder_local.js","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: \"parserOptions.project\" has been provided for @typescript-eslint/parser.\nThe file was not found in any of the provided project(s): packages/formio-file-upload/test_textencoder_local.js"}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Test TextEncoder in Jest/JSDOM environment\nconsole.log('Node.js TextEncoder:', typeof TextEncoder);\nconsole.log('Node.js global.TextEncoder:', typeof global.TextEncoder);\n\n// Simulate JSDOM environment\ndelete global.TextEncoder;\nconsole.log('After delete - TextEncoder:', typeof TextEncoder);\nconsole.log('After delete - global.TextEncoder:', typeof global.TextEncoder);\n\n// Check if util.TextEncoder works\nconst util = require('util');\nconsole.log('util.TextEncoder:', typeof util.TextEncoder);\n\n// Try to use it\ntry {\n  const encoder = new util.TextEncoder();\n  const encoded = encoder.encode('Hello');\n  console.log('Encoding works:', encoded);\n} catch (e) {\n  console.error('Encoding failed:', e.message);\n}\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[]}]}]
