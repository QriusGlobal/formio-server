# ═══════════════════════════════════════════════════════════════
#  Custom FormIO Build - Local Environment Configuration
# ═══════════════════════════════════════════════════════════════
#
#  Purpose: Local development environment variables
#  Usage: Copy to .env or export individually
#
#  Security Note: These are DEVELOPMENT-ONLY credentials
#                 NEVER use these in production!
#
# ═══════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────
#  Service Ports (macOS M4 Pro)
# ───────────────────────────────────────────────────────────────

FORMIO_PORT=3001
MONGO_PORT=27017
REDIS_PORT=6379
GCS_PORT=4443
TUS_PORT=1080

# ───────────────────────────────────────────────────────────────
#  Database Configuration
# ───────────────────────────────────────────────────────────────

MONGO_DB_NAME=formioapp_custom
MONGO=mongodb://mongodb:27017/formioapp_custom

# ───────────────────────────────────────────────────────────────
#  Redis Configuration (BullMQ Job Queue)
# ───────────────────────────────────────────────────────────────

REDIS_HOST=redis
REDIS_PORT=6379

# ───────────────────────────────────────────────────────────────
#  Secrets (CHANGE IN PRODUCTION!)
# ───────────────────────────────────────────────────────────────
#
#  ⚠️  WARNING: These are development-only secrets
#  For production:
#    - Use Google Secret Manager
#    - Generate with: openssl rand -hex 32
#    - Never commit to git
#
# ───────────────────────────────────────────────────────────────

JWT_SECRET=dev-jwt-secret-change-in-production-use-openssl-rand-hex-32
DB_SECRET=dev-db-secret-change-in-production-use-openssl-rand-hex-32

# ───────────────────────────────────────────────────────────────
#  File Storage (GCS Emulator)
# ───────────────────────────────────────────────────────────────

FORMIO_FILES_SERVER=gcs
FORMIO_S3_SERVER=http://gcs-emulator:4443
FORMIO_S3_BUCKET=formio-custom-uploads
FORMIO_S3_REGION=auto
FORMIO_S3_KEY=local-access-key
FORMIO_S3_SECRET=local-secret-key
GCS_PROJECT_ID=formio-custom-project
GCS_BUCKET_NAME=formio-custom-uploads
GCS_ACCESS_KEY=local-access-key
GCS_SECRET_KEY=local-secret-key

# ───────────────────────────────────────────────────────────────
#  Async File Upload Configuration
# ───────────────────────────────────────────────────────────────

ENABLE_ASYNC_GCS_UPLOAD=true
BULLMQ_WORKER_CONCURRENCY=3

# ───────────────────────────────────────────────────────────────
#  TUS Configuration (Resumable Uploads)
# ───────────────────────────────────────────────────────────────

TUS_PORT=1080
TUS_MAX_SIZE=5368709120  # 5GB in bytes

# ───────────────────────────────────────────────────────────────
#  Admin Credentials (LOCAL ONLY!)
# ───────────────────────────────────────────────────────────────

ROOT_EMAIL=admin@formio.local
ROOT_PASSWORD=admin123

# ───────────────────────────────────────────────────────────────
#  Server Configuration
# ───────────────────────────────────────────────────────────────

PORT=3001
HOST=0.0.0.0
NODE_ENV=development

# ───────────────────────────────────────────────────────────────
#  CORS Configuration
# ───────────────────────────────────────────────────────────────

CORS_ORIGIN=http://localhost:64849,http://localhost:3000

# ───────────────────────────────────────────────────────────────
#  Logging
# ───────────────────────────────────────────────────────────────

DEBUG=formio:*
LOG_LEVEL=debug

# ───────────────────────────────────────────────────────────────
#  Rate Limiting
# ───────────────────────────────────────────────────────────────

DISABLE_RATE_LIMIT=true

# ───────────────────────────────────────────────────────────────
#  Docker Build Configuration
# ───────────────────────────────────────────────────────────────

NODE_VERSION=20
PNPM_VERSION=8.15.0

# ═══════════════════════════════════════════════════════════════
#  Usage Instructions
# ═══════════════════════════════════════════════════════════════
#
#  Option 1: Use with docker-compose (automatic)
#    docker-compose.yml automatically loads these values
#
#  Option 2: Export to shell
#    export $(cat config/local.env | grep -v '^#' | xargs)
#
#  Option 3: Copy to .env
#    cp config/local.env .env
#    docker compose --env-file .env up
#
# ═══════════════════════════════════════════════════════════════
#
#  Production Deployment
# ═══════════════════════════════════════════════════════════════
#
#  For Cloud Run deployment:
#    1. Use Google Secret Manager for all secrets
#    2. Set MONGO to Cloud SQL connection string
#    3. Set FORMIO_S3_SERVER to real GCS endpoint
#    4. Generate secure JWT_SECRET and DB_SECRET
#    5. Enable rate limiting (DISABLE_RATE_LIMIT=false)
#    6. Set NODE_ENV=production
#
# ═══════════════════════════════════════════════════════════════
