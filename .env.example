# ═══════════════════════════════════════════════════════════════
#  Form.io Docker Compose Environment Variables
# ═══════════════════════════════════════════════════════════════
#
# ⚠️ SECURITY WARNING ⚠️
# This is a template - DO NOT use these values in production!
# Generate strong random values for all secrets.
# Run: ./scripts/validate-credentials.sh to check for weak credentials
#
# Usage: Copy this file to .env and customize values
#   cp .env.example .env
#
# ═══════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────
#  MongoDB Configuration
# ───────────────────────────────────────────────────────────────

MONGO_DB_NAME=formioapp

# ───────────────────────────────────────────────────────────────
#  Form.io Server Configuration
# ───────────────────────────────────────────────────────────────

FORMIO_PORT=3001
NODE_ENV=development

# Secrets (CHANGE IN PRODUCTION!)
JWT_SECRET=your-jwt-secret-here-change-in-production
DB_SECRET=your-db-secret-here-change-in-production

# Admin Credentials
ROOT_EMAIL=admin@formio.local
ROOT_PASSWORD=admin123

# CORS Configuration
CORS_ORIGIN=http://localhost:64849,http://localhost:3000

# Logging
DEBUG=formio:*

# Rate Limiting
DISABLE_RATE_LIMIT=false

# ───────────────────────────────────────────────────────────────
#  GCS Async Upload Configuration
# ───────────────────────────────────────────────────────────────

# Enable async upload with BullMQ job queue
ENABLE_ASYNC_GCS_UPLOAD=true

# Number of concurrent upload workers (adjust based on server capacity)
BULLMQ_WORKER_CONCURRENCY=3

# GCS Configuration
GCS_PROJECT_ID=formio-project
GCS_BUCKET_NAME=formio-uploads

# Google Cloud Storage (local emulator)
GCS_ACCESS_KEY=formio-local-key
GCS_SECRET_KEY=formio-local-secret

# ───────────────────────────────────────────────────────────────
#  TUS Server Configuration
# ───────────────────────────────────────────────────────────────

TUS_PORT=1080

# Maximum upload size (5GB default)
TUS_MAX_SIZE=5368709120

# ───────────────────────────────────────────────────────────────
#  Upload Processor Configuration (--profile full)
# ───────────────────────────────────────────────────────────────

# Number of concurrent file processing jobs
PROCESSOR_CONCURRENCY=5

# Number of files to process in each batch
PROCESSOR_BATCH_SIZE=10

# Polling interval for new uploads (milliseconds)
PROCESSOR_POLL_INTERVAL=5000

# ───────────────────────────────────────────────────────────────
#  Webhook Handler Configuration (--profile full)
# ───────────────────────────────────────────────────────────────

WEBHOOK_SECRET=your-webhook-secret-here

# ───────────────────────────────────────────────────────────────
#  Nginx Configuration
# ───────────────────────────────────────────────────────────────

# HTTPS mode (requires SSL certificates in nginx/ssl/)
NGINX_HTTPS_ENABLED=false

# ───────────────────────────────────────────────────────────────
#  Vite Frontend Configuration
# ───────────────────────────────────────────────────────────────

# Form.io API backend URL
VITE_API_URL=http://localhost:3001

# TUS resumable upload endpoint
VITE_TUS_ENDPOINT=http://localhost:1080/files/

# ═══════════════════════════════════════════════════════════════
#  ENVIRONMENT-SPECIFIC CONFIGURATIONS
# ═══════════════════════════════════════════════════════════════

# Development
# -----------
# NODE_ENV=development
# DEBUG=formio:*
# DISABLE_RATE_LIMIT=true
# ENABLE_ASYNC_GCS_UPLOAD=true

# Testing
# -------
# NODE_ENV=test
# DEBUG=formio:test:*
# DISABLE_RATE_LIMIT=true
# MONGO_DB_NAME=formioapp_test

# Production
# ----------
# NODE_ENV=production
# DEBUG=formio:error,formio:warn
# DISABLE_RATE_LIMIT=false
# ENABLE_ASYNC_GCS_UPLOAD=true
# BULLMQ_WORKER_CONCURRENCY=10
# (Use strong JWT_SECRET and DB_SECRET!)

# ═══════════════════════════════════════════════════════════════
