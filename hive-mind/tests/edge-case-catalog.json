{
  "edgeCaseCatalog": {
    "version": "1.0.0",
    "generated": "2025-09-30",
    "components": ["TUS Upload", "Uppy Upload"],
    "categories": {
      "networkFailures": {
        "description": "Tests for various network failure scenarios",
        "testFile": "tests/e2e/edge-network.spec.ts",
        "scenarios": [
          {
            "name": "Offline Mode",
            "description": "Upload behavior when network is completely offline",
            "expectedBehavior": "Show user-friendly error, allow retry when online",
            "criticalPath": true
          },
          {
            "name": "Slow 3G Network",
            "description": "Upload performance on slow 3G connection (50KB/s, 2s latency)",
            "expectedBehavior": "Progress tracking, reasonable completion time",
            "performanceThreshold": "< 2 minutes for 1MB file"
          },
          {
            "name": "Packet Loss (30%)",
            "description": "Simulate 30% packet loss during upload",
            "expectedBehavior": "Automatic retry, eventual success",
            "retryLogic": "Exponential backoff"
          },
          {
            "name": "DNS Resolution Failure",
            "description": "Server hostname cannot be resolved",
            "expectedBehavior": "User-friendly network error message",
            "errorHandling": "No technical jargon"
          },
          {
            "name": "Connection Timeout",
            "description": "Server does not respond within timeout period",
            "expectedBehavior": "Timeout error after 5 seconds",
            "gracefulDegradation": true
          },
          {
            "name": "Server Unreachable",
            "description": "Connection refused by server",
            "expectedBehavior": "Connection error with retry option",
            "userAction": "Retry button visible"
          },
          {
            "name": "Intermittent Failures",
            "description": "Random 30% failure rate during upload",
            "expectedBehavior": "Automatic retry, most uploads succeed",
            "successRate": "> 70%"
          },
          {
            "name": "Pause/Resume on Network Loss",
            "description": "Network disconnects during upload",
            "expectedBehavior": "Auto-pause, manual resume after reconnection",
            "tusProtocol": "Resume from exact byte position"
          },
          {
            "name": "Network Switching",
            "description": "Switch from WiFi to 3G to WiFi during upload",
            "expectedBehavior": "Adapt to speed changes, complete successfully",
            "resilience": "High"
          }
        ]
      },
      "largeFiles": {
        "description": "Tests for large file uploads with memory monitoring",
        "testFile": "tests/e2e/edge-large-files.spec.ts",
        "scenarios": [
          {
            "name": "500MB File Upload",
            "description": "Upload 500MB file with progress tracking",
            "expectedBehavior": "Chunked upload, progress updates every 5%",
            "memoryLimit": "< 200MB peak memory",
            "chunkSize": "5-25MB dynamic",
            "estimatedTime": "< 4 minutes"
          },
          {
            "name": "1GB File Upload",
            "description": "Upload 1GB file efficiently",
            "expectedBehavior": "Memory-efficient chunking, speed tracking",
            "memoryLimit": "< 300MB peak memory",
            "performanceMetrics": ["upload speed", "chunk count"],
            "estimatedTime": "< 5 minutes"
          },
          {
            "name": "2GB File Upload",
            "description": "Upload 2GB file if browser supports",
            "expectedBehavior": "Handles browser limitations gracefully",
            "browserSupport": "Skip on Safari",
            "memoryLimit": "< 400MB peak memory",
            "browserLimitations": true
          },
          {
            "name": "Large File Resume",
            "description": "Pause and resume 500MB upload",
            "expectedBehavior": "Resume from paused position, no data loss",
            "tusResume": true,
            "dataIntegrity": "Verified"
          },
          {
            "name": "Memory Stability",
            "description": "Monitor memory during 800MB upload",
            "expectedBehavior": "Stable memory, no continuous growth",
            "memoryGrowth": "< 50% over upload duration",
            "gcEfficiency": "Monitored"
          }
        ]
      },
      "browserStates": {
        "description": "Tests for various browser state changes",
        "testFile": "tests/e2e/edge-browser.spec.ts",
        "scenarios": [
          {
            "name": "Tab Hidden",
            "description": "Browser tab becomes hidden during upload",
            "expectedBehavior": "Upload continues in background",
            "apiUsed": "Page Visibility API",
            "throttling": "Potential browser throttling handled"
          },
          {
            "name": "Browser Minimize",
            "description": "Browser minimized during upload",
            "expectedBehavior": "Upload continues, no interruption",
            "visibilityChange": true
          },
          {
            "name": "Page Refresh",
            "description": "Page refreshed during upload",
            "expectedBehavior": "TUS: Upload state in localStorage, manual resume. Uppy: Auto-resume via Golden Retriever",
            "tusStorage": "localStorage",
            "uppyPlugin": "Golden Retriever"
          },
          {
            "name": "Multiple Tabs",
            "description": "Multiple tabs uploading simultaneously",
            "expectedBehavior": "Independent uploads, no interference",
            "isolation": "Per-tab upload state",
            "concurrency": "Handled by browser"
          },
          {
            "name": "Incognito Mode",
            "description": "Upload in private/incognito window",
            "expectedBehavior": "Full functionality, localStorage available",
            "storageAvailable": true,
            "privacy": "Maintained"
          },
          {
            "name": "LocalStorage Persistence",
            "description": "Upload state saved to localStorage",
            "expectedBehavior": "Upload URL and progress stored",
            "dataStored": ["upload URL", "progress", "metadata"],
            "tusProtocol": "Resume capability"
          },
          {
            "name": "SessionStorage",
            "description": "SessionStorage used alongside localStorage",
            "expectedBehavior": "Complementary storage, no conflicts",
            "storageTypes": "Both supported"
          }
        ]
      },
      "raceConditions": {
        "description": "Tests for concurrent operations and race conditions",
        "testFile": "tests/e2e/edge-race.spec.ts",
        "scenarios": [
          {
            "name": "Multiple Uploads with Random Cancellations",
            "description": "10 uploads started, 5 randomly cancelled",
            "expectedBehavior": "Cancelled uploads removed, others complete",
            "cancellationHandling": "Clean state management",
            "noErrors": true
          },
          {
            "name": "Rapid Pause/Resume",
            "description": "Pause and resume 10 times in quick succession",
            "expectedBehavior": "Stable state transitions, eventual completion",
            "stateManagement": "Robust",
            "raceCondition": "Handled"
          },
          {
            "name": "Component Unmount",
            "description": "Navigate away during upload",
            "expectedBehavior": "Clean unmount, no memory leaks",
            "cleanup": "Event listeners removed",
            "memoryLeaks": "None"
          },
          {
            "name": "Form Submission",
            "description": "Form submitted during upload",
            "expectedBehavior": "Prevent submission or cancel upload cleanly",
            "userWarning": "Optional",
            "gracefulHandling": true
          },
          {
            "name": "Concurrent Different States",
            "description": "5 uploads in different states (uploading, paused, pending)",
            "expectedBehavior": "Independent state management per file",
            "stateIsolation": true,
            "noInterference": true
          },
          {
            "name": "Rapid File Additions",
            "description": "Add 15 files in 5 rapid batches",
            "expectedBehavior": "All files queued and processed",
            "queueManagement": "FIFO",
            "noDataLoss": true
          },
          {
            "name": "Auth Token Refresh",
            "description": "401 error during upload (simulated token expiry)",
            "expectedBehavior": "Graceful error or automatic retry",
            "authHandling": "Configurable",
            "retryOn401": "Optional"
          }
        ]
      },
      "resourceExhaustion": {
        "description": "Tests for resource limits and exhaustion",
        "testFile": "tests/e2e/edge-limits.spec.ts",
        "scenarios": [
          {
            "name": "100 Simultaneous Files",
            "description": "Upload 100 small files simultaneously",
            "expectedBehavior": "Graceful handling, no crash",
            "memoryLimit": "< 500MB",
            "concurrencyLimit": "3-10 active uploads",
            "queueing": "Remaining files queued"
          },
          {
            "name": "Exceed Max File Size",
            "description": "Upload 100MB file with 50MB limit",
            "expectedBehavior": "Rejection with user-friendly error",
            "errorMessage": "File size exceeds 50MB limit",
            "validationTiming": "Before upload starts"
          },
          {
            "name": "Exceed Max File Count",
            "description": "Upload 15 files with 10 file limit",
            "expectedBehavior": "Accept first 10, reject remaining with error",
            "errorMessage": "Maximum 10 files allowed",
            "validationTiming": "On file addition"
          },
          {
            "name": "Storage Quota Exceeded",
            "description": "localStorage quota exceeded",
            "expectedBehavior": "Handle QuotaExceededError gracefully",
            "fallback": "Continue with reduced functionality",
            "errorHandling": "Silent or user notification"
          },
          {
            "name": "Memory Pressure",
            "description": "20 files of 10MB each (200MB total)",
            "expectedBehavior": "Memory stable, no continuous growth",
            "memoryMonitoring": "Over 30 seconds",
            "gracefulDegradation": true
          },
          {
            "name": "Concurrent Upload Limit",
            "description": "50 files queued",
            "expectedBehavior": "Limit active uploads to 3-10",
            "queueManagement": true,
            "throttling": "Automatic"
          },
          {
            "name": "Network Request Limit",
            "description": "30 files triggering many requests",
            "expectedBehavior": "Request batching or queueing",
            "requestManagement": "Efficient",
            "serverLoad": "Considerate"
          }
        ]
      },
      "security": {
        "description": "Security validation and XSS prevention tests",
        "testFile": "tests/e2e/edge-security.spec.ts",
        "scenarios": [
          {
            "name": "Executable Files",
            "description": "Upload .exe, .bat, .sh, .cmd files",
            "expectedBehavior": "Reject with clear error message",
            "validation": "Client-side and server-side",
            "blockedTypes": [".exe", ".bat", ".sh", ".cmd", ".com", ".msi"],
            "security": "High priority"
          },
          {
            "name": "XSS in File Names",
            "description": "File name: <script>alert('XSS')</script>.txt",
            "expectedBehavior": "HTML-escape or sanitize file name",
            "sanitization": "HTML entities",
            "noExecution": true,
            "displayedSafely": true
          },
          {
            "name": "Path Traversal",
            "description": "File name: ../../../etc/passwd",
            "expectedBehavior": "Strip path traversal sequences",
            "sanitization": "Remove ../, ../\\, /etc/",
            "securityIssue": "Critical"
          },
          {
            "name": "Oversized File Name",
            "description": "File name with 10,000 characters",
            "expectedBehavior": "Truncate with ellipsis, no UI break",
            "maxLength": "< 500 characters displayed",
            "uiStability": "Maintained"
          },
          {
            "name": "Special Characters",
            "description": "File name: file:with*special|chars?.txt",
            "expectedBehavior": "Sanitize or remove dangerous characters",
            "sanitization": "Remove |, *, ?, :, <, >",
            "fileSystemSafe": true
          },
          {
            "name": "Metadata XSS",
            "description": "Malicious metadata in file object",
            "expectedBehavior": "Sanitize metadata before display",
            "metadataHandling": "Escaped",
            "noExecution": true
          },
          {
            "name": "CSV Injection",
            "description": "File names: =1+1, @SUM(A1:A10), +cmd|/c calc",
            "expectedBehavior": "Escape formula characters",
            "sanitization": "Prefix with ' or escape",
            "excelSafety": true
          },
          {
            "name": "Null Byte Injection",
            "description": "File name: file\\x00.txt.exe",
            "expectedBehavior": "Strip null bytes",
            "sanitization": "Remove \\x00",
            "securityImplication": "File type confusion"
          }
        ]
      }
    },
    "testExecution": {
      "totalScenarios": 51,
      "estimatedDuration": "120-180 minutes",
      "parallelization": "Supported per category",
      "browsers": ["Chromium", "Firefox", "WebKit", "Mobile Chrome", "Mobile Safari"],
      "specialProjects": ["Slow 3G", "Offline"],
      "ciIntegration": {
        "retries": 2,
        "workers": 1,
        "timeout": 120000
      }
    },
    "utilities": {
      "networkSimulator": {
        "file": "tests/utils/network-simulator.ts",
        "capabilities": [
          "Network condition emulation (3G, 4G, WiFi)",
          "Packet loss simulation",
          "DNS failure simulation",
          "Timeout simulation",
          "Server unreachable simulation",
          "Intermittent failure simulation",
          "Network monitoring and request tracking"
        ]
      },
      "memoryMonitor": {
        "file": "tests/utils/memory-monitor.ts",
        "capabilities": [
          "Real-time memory tracking",
          "Peak memory detection",
          "Average memory calculation",
          "Memory growth analysis",
          "Memory leak detection",
          "Report generation"
        ]
      },
      "testHelpers": {
        "file": "tests/utils/test-helpers.ts",
        "capabilities": [
          "Console error monitoring",
          "Test file generation",
          "Malicious filename creation",
          "Tab visibility simulation",
          "Storage utilities (localStorage, sessionStorage)",
          "Network idle detection",
          "Screenshot with timestamp"
        ]
      }
    },
    "playwrightConfig": {
      "file": "tests/playwright.config.ts",
      "features": [
        "Multiple browser testing",
        "Mobile viewport testing",
        "Network condition projects",
        "Trace on failure",
        "Screenshot on failure",
        "Video recording",
        "HTML, JSON, JUnit reporters",
        "Dev server integration"
      ]
    },
    "coverage": {
      "networkScenarios": 9,
      "largeFileScenarios": 5,
      "browserStateScenarios": 7,
      "raceConditionScenarios": 7,
      "resourceExhaustionScenarios": 7,
      "securityScenarios": 8,
      "totalScenarios": 51,
      "criticalPathsCovered": true,
      "edgeCasesCovered": true,
      "securityValidated": true
    },
    "runCommands": {
      "all": "npm run test:e2e",
      "network": "npm run test:e2e tests/e2e/edge-network.spec.ts",
      "largeFiles": "npm run test:e2e tests/e2e/edge-large-files.spec.ts",
      "browser": "npm run test:e2e tests/e2e/edge-browser.spec.ts",
      "race": "npm run test:e2e tests/e2e/edge-race.spec.ts",
      "limits": "npm run test:e2e tests/e2e/edge-limits.spec.ts",
      "security": "npm run test:e2e tests/e2e/edge-security.spec.ts",
      "debug": "npm run test:e2e:debug",
      "ui": "npm run test:e2e:ui",
      "headed": "npm run test:e2e:headed"
    }
  }
}